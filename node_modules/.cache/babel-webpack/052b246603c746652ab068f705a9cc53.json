{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, ViewChild, ComponentFactoryResolver, ApplicationRef, forwardRef, ViewEncapsulation, Injectable, Optional, Pipe, HostBinding, HostListener, NgModule, InjectionToken } from '@angular/core';\nimport * as i4 from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, FormGroup, FormControl, Validators as Validators$1, ReactiveFormsModule } from '@angular/forms';\nimport { Plugin, PluginKey, NodeSelection, EditorState } from 'prosemirror-state';\nimport { DecorationSet, Decoration, EditorView } from 'prosemirror-view';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport { Fragment, Slice, DOMSerializer, DOMParser } from 'prosemirror-model';\nimport { schema } from 'ngx-editor/schema';\nexport { marks, nodes, schema } from 'ngx-editor/schema';\nimport { Subject, fromEvent, asyncScheduler } from 'rxjs';\nimport { toggleMark, lift, wrapIn, setBlockType, newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock, chainCommands, exitCode, baseKeymap } from 'prosemirror-commands';\nimport { applyMark, removeLink, removeMark } from 'ngx-editor/commands';\nimport { isMarkActive, isNodeActive, getSelectionNodes, getSelectionMarks, markInputRule } from 'ngx-editor/helpers';\nimport { liftListItem, wrapInList, splitListItem, sinkListItem } from 'prosemirror-schema-list';\nimport * as i1 from '@angular/platform-browser';\nimport { throttleTime } from 'rxjs/operators';\nimport { isNil } from 'ngx-editor/utils';\nimport { keymap } from 'prosemirror-keymap';\nimport { undo, redo, history } from 'prosemirror-history';\nimport { wrappingInputRule, textblockTypeInputRule, smartQuotes, ellipsis, emDash, inputRules } from 'prosemirror-inputrules';\nconst _c0 = [\"imgEl\"];\n\nfunction ImageViewComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 4);\n    i0.ɵɵelementStart(1, \"span\", 5);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.startResizing($event, \"left\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\", 6);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_2_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.startResizing($event, \"right\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 7);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_3_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.startResizing($event, \"left\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 8);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_4_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.startResizing($event, \"right\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    \"NgxEditor__Resizer--Active\": a0\n  };\n};\n\nconst _c2 = [\"ngxEditor\"];\nconst _c3 = [\"*\"];\n\nfunction LinkComponent_div_2_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.href.errors == null ? null : ctx_r1.href.errors[\"pattern\"]) && \"Please enter valid url.\", \" \");\n  }\n}\n\nfunction LinkComponent_div_2_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r2.text.errors == null ? null : ctx_r2.text.errors[\"required\"]) && \"This is required\", \" \");\n  }\n}\n\nfunction LinkComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function LinkComponent_div_2_Template_form_ngSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.insertLink($event);\n    });\n    i0.ɵɵelementStart(2, \"div\", 4);\n    i0.ɵɵelementStart(3, \"div\", 5);\n    i0.ɵɵelementStart(4, \"label\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 7);\n    i0.ɵɵtemplate(7, LinkComponent_div_2_div_7_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 4);\n    i0.ɵɵelementStart(9, \"div\", 5);\n    i0.ɵɵelementStart(10, \"label\", 6);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 9);\n    i0.ɵɵtemplate(13, LinkComponent_div_2_div_13_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 4);\n    i0.ɵɵelementStart(15, \"div\", 5);\n    i0.ɵɵelementStart(16, \"label\");\n    i0.ɵɵelement(17, \"input\", 10);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 11);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"url\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.href.touched && ctx_r0.href.invalid);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"text\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.text.touched && ctx_r0.text.invalid);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getLabel(\"openInNewTab\"), \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.form.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"insert\"));\n  }\n}\n\nfunction ImageComponent_div_2_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.src.errors == null ? null : ctx_r1.src.errors[\"pattern\"]) && \"Please enter valid url.\", \" \");\n  }\n}\n\nfunction ImageComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function ImageComponent_div_2_Template_form_ngSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.insertLink($event);\n    });\n    i0.ɵɵelementStart(2, \"div\", 4);\n    i0.ɵɵelementStart(3, \"div\", 5);\n    i0.ɵɵelementStart(4, \"label\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 7);\n    i0.ɵɵtemplate(7, ImageComponent_div_2_div_7_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 4);\n    i0.ɵɵelementStart(9, \"div\", 5);\n    i0.ɵɵelementStart(10, \"label\", 6);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 4);\n    i0.ɵɵelementStart(14, \"div\", 5);\n    i0.ɵɵelementStart(15, \"label\", 6);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"input\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 11);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"url\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.src.touched && ctx_r0.src.invalid);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"altText\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"title\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.form.valid || !ctx_r0.form.dirty);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"insert\"));\n  }\n}\n\nconst _c4 = function (a0, a1) {\n  return {\n    \"NgxEditor__Dropdown--Active\": a0,\n    \"NgxEditor--Disabled\": a1\n  };\n};\n\nfunction DropdownComponent_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵlistener(\"mousedown\", function DropdownComponent_div_2_div_1_Template_div_mousedown_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return ctx_r3.onClick($event, item_r2);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c4, item_r2 === ctx_r1.activeItem, ctx_r1.disabledItems.includes(item_r2)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getName(item_r2), \" \");\n  }\n}\n\nfunction DropdownComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, DropdownComponent_div_2_div_1_Template, 2, 5, \"div\", 3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.items);\n  }\n}\n\nconst _c5 = function (a0, a1) {\n  return {\n    backgroundColor: a0,\n    color: a1\n  };\n};\n\nconst _c6 = function (a0) {\n  return {\n    \"NgxEditor__Color--Active\": a0\n  };\n};\n\nfunction ColorPickerComponent_div_2_div_1_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_div_2_div_1_button_1_Template_button_mousedown_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const color_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(3);\n      return ctx_r5.onColorSelect($event, color_r4);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const color_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(3, _c5, color_r4, ctx_r3.getContrastYIQ(color_r4)))(\"title\", color_r4)(\"ngClass\", i0.ɵɵpureFunction1(6, _c6, ctx_r3.activeColors.includes(color_r4)));\n  }\n}\n\nfunction ColorPickerComponent_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, ColorPickerComponent_div_2_div_1_button_1_Template, 1, 8, \"button\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const colorGroup_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", colorGroup_r2);\n  }\n}\n\nfunction ColorPickerComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, ColorPickerComponent_div_2_div_1_Template, 2, 1, \"div\", 3);\n    i0.ɵɵelementStart(2, \"button\", 4);\n    i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_div_2_Template_button_mousedown_2_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.remove($event);\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.presets);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.isActive);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getLabel(\"remove\"), \" \");\n  }\n}\n\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-toggle-command\", 7);\n  }\n\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r7.iconContainerClass);\n    i0.ɵɵproperty(\"toolbarItem\", item_r5);\n  }\n}\n\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_link_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-link\");\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r8.iconContainerClass);\n  }\n}\n\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_image_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-image\");\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r9.iconContainerClass);\n  }\n}\n\nfunction MenuComponent_ng_container_1_ng_container_1_ng_container_4_ngx_dropdown_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-dropdown\", 9);\n  }\n\n  if (rf & 2) {\n    const dropdownItem_r16 = ctx.$implicit;\n    const ctx_r15 = i0.ɵɵnextContext(4);\n    i0.ɵɵclassMap(ctx_r15.dropdownContainerClass);\n    i0.ɵɵproperty(\"group\", dropdownItem_r16.key)(\"items\", dropdownItem_r16.value);\n  }\n}\n\nfunction MenuComponent_ng_container_1_ng_container_1_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuComponent_ng_container_1_ng_container_1_ng_container_4_ngx_dropdown_1_Template, 1, 4, \"ngx-dropdown\", 8);\n    i0.ɵɵpipe(2, \"keyvalue\");\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 1, ctx_r10.getDropdownItems(item_r5)));\n  }\n}\n\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-color-picker\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r11.iconContainerClass);\n    i0.ɵɵproperty(\"presets\", ctx_r11.presets);\n  }\n}\n\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-color-picker\", 11);\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r12.iconContainerClass);\n    i0.ɵɵproperty(\"presets\", ctx_r12.presets);\n  }\n}\n\nfunction MenuComponent_ng_container_1_ng_container_1_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r13.seperatorClass);\n  }\n}\n\nfunction MenuComponent_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template, 1, 3, \"ngx-toggle-command\", 3);\n    i0.ɵɵtemplate(2, MenuComponent_ng_container_1_ng_container_1_ngx_link_2_Template, 1, 2, \"ngx-link\", 4);\n    i0.ɵɵtemplate(3, MenuComponent_ng_container_1_ng_container_1_ngx_image_3_Template, 1, 2, \"ngx-image\", 4);\n    i0.ɵɵtemplate(4, MenuComponent_ng_container_1_ng_container_1_ng_container_4_Template, 3, 3, \"ng-container\", 2);\n    i0.ɵɵtemplate(5, MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_5_Template, 1, 3, \"ngx-color-picker\", 5);\n    i0.ɵɵtemplate(6, MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template, 1, 3, \"ngx-color-picker\", 6);\n    i0.ɵɵtemplate(7, MenuComponent_ng_container_1_ng_container_1_div_7_Template, 1, 2, \"div\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    const lastItem_r6 = ctx.last;\n    const lastToolbarItem_r3 = i0.ɵɵnextContext().last;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.toggleCommands.includes(item_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"link\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"image\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isDropDown(item_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"text_color\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"background_color\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", lastItem_r6 && !lastToolbarItem_r3);\n  }\n}\n\nfunction MenuComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuComponent_ng_container_1_ng_container_1_Template, 8, 7, \"ng-container\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const toolbarItem_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", toolbarItem_r2);\n  }\n}\n\nfunction MenuComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementContainer(1, 12);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r1.customMenuRef);\n  }\n}\n\nconst _c7 = function (a0, a1) {\n  return {\n    \"NgxEditor--Disabled\": a0,\n    \"NgxEditor__MenuBar--Reverse\": a1\n  };\n};\n\nconst _c8 = function (a0, a1) {\n  return {\n    \"NgxBubbleMenu__Icon--Active\": a0,\n    \"NgxEditor--Disabled\": a1\n  };\n};\n\nfunction BubbleComponent_ng_container_0_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵlistener(\"mousedown\", function BubbleComponent_ng_container_0_ng_container_1_div_1_Template_div_mousedown_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const item_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.onClick($event, item_r4);\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelement(1, \"svg\", 4);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(3, _c8, ctx_r6.activeItems.includes(item_r4), !ctx_r6.execulableItems.includes(item_r4)))(\"title\", ctx_r6.getTitle(item_r4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r6.getIcon(item_r4), i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction BubbleComponent_ng_container_0_ng_container_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 5);\n  }\n}\n\nfunction BubbleComponent_ng_container_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BubbleComponent_ng_container_0_ng_container_1_div_1_Template, 2, 6, \"div\", 1);\n    i0.ɵɵtemplate(2, BubbleComponent_ng_container_0_ng_container_1_div_2_Template, 1, 0, \"div\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    const lastItem_r5 = ctx.last;\n    const lastToolbarItem_r2 = i0.ɵɵnextContext().last;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.toggleCommands.includes(item_r4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", lastItem_r5 && !lastToolbarItem_r2);\n  }\n}\n\nfunction BubbleComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BubbleComponent_ng_container_0_ng_container_1_Template, 3, 2, \"ng-container\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const toolbarItem_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", toolbarItem_r1);\n  }\n}\n\nfunction FloatingMenuComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"ngx-bubble\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"editor\", ctx_r1.editor);\n  }\n}\n\nconst editablePlugin = (editable = true) => {\n  return new Plugin({\n    key: new PluginKey('editable'),\n    state: {\n      init() {\n        return editable;\n      },\n\n      apply(tr, previousVal) {\n        var _a;\n\n        return (_a = tr.getMeta('UPDATE_EDITABLE')) !== null && _a !== void 0 ? _a : previousVal;\n      }\n\n    },\n    props: {\n      editable(state) {\n        return this.getState(state);\n      },\n\n      attributes(state) {\n        const isEnabled = this.getState(state);\n\n        if (isEnabled) {\n          return null;\n        }\n\n        return {\n          class: 'NgxEditor__Content--Disabled'\n        };\n      }\n\n    }\n  });\n};\n\nconst PLACEHOLDER_CLASSNAME = 'NgxEditor__Placeholder';\n\nconst placeholderPlugin = text => {\n  return new Plugin({\n    key: new PluginKey('placeholder'),\n    state: {\n      init() {\n        return text !== null && text !== void 0 ? text : '';\n      },\n\n      apply(tr, previousVal) {\n        var _a;\n\n        const placeholder = (_a = tr.getMeta('UPDATE_PLACEHOLDER')) !== null && _a !== void 0 ? _a : previousVal;\n        return placeholder;\n      }\n\n    },\n    props: {\n      decorations(state) {\n        const {\n          doc\n        } = state;\n        const {\n          textContent,\n          childCount\n        } = doc;\n        const placeholder = this.getState(state);\n\n        if (!placeholder || childCount > 1) {\n          return DecorationSet.empty;\n        }\n\n        const decorations = [];\n\n        const decorate = (node, pos) => {\n          var _a;\n\n          if (node.type.isBlock && node.childCount === 0 && textContent.length === 0) {\n            const placeholderNode = Decoration.node(pos, pos + node.nodeSize, {\n              class: PLACEHOLDER_CLASSNAME,\n              'data-placeholder': placeholder,\n              'data-align': (_a = node.attrs['align']) !== null && _a !== void 0 ? _a : null\n            });\n            decorations.push(placeholderNode);\n          }\n\n          return false;\n        };\n\n        doc.descendants(decorate);\n        return DecorationSet.create(doc, decorations);\n      }\n\n    }\n  });\n};\n\nconst attributesPlugin = (attributes = {}) => {\n  return new Plugin({\n    key: new PluginKey('attributes'),\n    props: {\n      attributes\n    }\n  });\n};\n\nconst focusPlugin = cb => {\n  return new Plugin({\n    key: new PluginKey('focus'),\n    props: {\n      handleDOMEvents: {\n        focus: () => {\n          cb();\n          return false;\n        }\n      }\n    }\n  });\n};\n\nconst blurPlugin = cb => {\n  return new Plugin({\n    key: new PluginKey('blur'),\n    props: {\n      handleDOMEvents: {\n        blur: () => {\n          cb();\n          return false;\n        }\n      }\n    }\n  });\n};\n\nclass ImageViewComponent {\n  constructor() {\n    this.alt = '';\n    this.title = '';\n    this.outerWidth = '';\n    this.selected = false;\n    this.imageResize = new EventEmitter();\n  }\n\n  startResizing(e, direction) {\n    e.preventDefault();\n    this.resizeImage(e, direction);\n  }\n\n  resizeImage(evt, direction) {\n    const startX = evt.pageX;\n    const startWidth = this.imgEl.nativeElement.clientWidth;\n    const isLeftResize = direction === 'left';\n    const {\n      width\n    } = window.getComputedStyle(this.view.dom);\n    const editorWidth = parseInt(width, 10);\n\n    const onMouseMove = e => {\n      const currentX = e.pageX;\n      const diffInPx = currentX - startX;\n      const computedWidth = isLeftResize ? startWidth - diffInPx : startWidth + diffInPx; // prevent image overflow the editor\n      // prevent resizng below 20px\n\n      if (computedWidth > editorWidth || computedWidth < 20) {\n        return;\n      }\n\n      this.outerWidth = `${computedWidth}px`;\n    };\n\n    const onMouseUp = e => {\n      e.preventDefault();\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      this.imageResize.emit();\n    };\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  }\n\n}\n\nImageViewComponent.ɵfac = function ImageViewComponent_Factory(t) {\n  return new (t || ImageViewComponent)();\n};\n\nImageViewComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ImageViewComponent,\n  selectors: [[\"ngx-image-view\"]],\n  viewQuery: function ImageViewComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imgEl = _t.first);\n    }\n  },\n  inputs: {\n    src: \"src\",\n    alt: \"alt\",\n    title: \"title\",\n    outerWidth: \"outerWidth\",\n    selected: \"selected\",\n    view: \"view\"\n  },\n  outputs: {\n    imageResize: \"imageResize\"\n  },\n  decls: 4,\n  vars: 9,\n  consts: [[1, \"NgxEditor__ImageWrapper\", 3, \"ngClass\"], [\"class\", \"NgxEditor__ResizeHandle\", 4, \"ngIf\"], [3, \"src\", \"alt\", \"title\"], [\"imgEl\", \"\"], [1, \"NgxEditor__ResizeHandle\"], [1, \"NgxEditor__ResizeHandle--TL\", 3, \"mousedown\"], [1, \"NgxEditor__ResizeHandle--TR\", 3, \"mousedown\"], [1, \"NgxEditor__ResizeHandle--BL\", 3, \"mousedown\"], [1, \"NgxEditor__ResizeHandle--BR\", 3, \"mousedown\"]],\n  template: function ImageViewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"span\", 0);\n      i0.ɵɵtemplate(1, ImageViewComponent_span_1_Template, 5, 0, \"span\", 1);\n      i0.ɵɵelement(2, \"img\", 2, 3);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"width\", ctx.outerWidth);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c1, ctx.selected));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.selected);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"src\", ctx.src, i0.ɵɵsanitizeUrl)(\"alt\", ctx.alt)(\"title\", ctx.title);\n    }\n  },\n  directives: [i3.NgClass, i3.NgIf],\n  styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ImageViewComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-image-view',\n      template: \"<span class=\\\"NgxEditor__ImageWrapper\\\" [ngClass]=\\\"{'NgxEditor__Resizer--Active': selected}\\\" [style.width]=\\\"outerWidth\\\">\\n  <span class=\\\"NgxEditor__ResizeHandle\\\" *ngIf=\\\"selected\\\">\\n    <span class=\\\"NgxEditor__ResizeHandle--TL\\\"  (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--TR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n  </span>\\n  <img [src]=\\\"src\\\" [alt]=\\\"alt\\\" [title]=\\\"title\\\" #imgEl />\\n</span>\\n\",\n      styles: [\"*,*:before,*:after{box-sizing:border-box}img{width:100%;height:100%}.NgxEditor__ImageWrapper{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL{bottom:-5px;left:-5px;cursor:sw-resize}\\n\"]\n    }]\n  }], null, {\n    src: [{\n      type: Input\n    }],\n    alt: [{\n      type: Input\n    }],\n    title: [{\n      type: Input\n    }],\n    outerWidth: [{\n      type: Input\n    }],\n    selected: [{\n      type: Input\n    }],\n    view: [{\n      type: Input\n    }],\n    imageResize: [{\n      type: Output\n    }],\n    imgEl: [{\n      type: ViewChild,\n      args: ['imgEl', {\n        static: true\n      }]\n    }]\n  });\n})();\n\nclass ImageRezieView {\n  constructor(node, view, getPos, injector) {\n    this.updating = false;\n\n    this.handleResize = () => {\n      if (this.updating) {\n        return;\n      }\n\n      const {\n        state,\n        dispatch\n      } = this.view;\n      const {\n        tr\n      } = state;\n      const transaction = tr.setNodeMarkup(this.getPos(), undefined, {\n        src: this.imageComponentRef.instance.src,\n        width: this.imageComponentRef.instance.outerWidth\n      });\n      const resolvedPos = transaction.doc.resolve(this.getPos());\n      const newSelection = new NodeSelection(resolvedPos);\n      transaction.setSelection(newSelection);\n      dispatch(transaction);\n    };\n\n    const dom = document.createElement('image-view');\n    const componentFactoryResolver = injector.get(ComponentFactoryResolver);\n    this.applicationRef = injector.get(ApplicationRef); // Create the component and wire it up with the element\n\n    const factory = componentFactoryResolver.resolveComponentFactory(ImageViewComponent);\n    this.imageComponentRef = factory.create(injector, [], dom); // Attach to the view so that the change detector knows to run\n\n    this.applicationRef.attachView(this.imageComponentRef.hostView);\n    this.setNodeAttributes(node.attrs);\n    this.imageComponentRef.instance.view = view;\n    this.dom = dom;\n    this.view = view;\n    this.node = node;\n    this.getPos = getPos;\n    this.resizeSubscription = this.imageComponentRef.instance.imageResize.subscribe(() => {\n      this.handleResize();\n    });\n  }\n\n  computeChanges(prevAttrs, newAttrs) {\n    return JSON.stringify(prevAttrs) === JSON.stringify(newAttrs);\n  }\n\n  setNodeAttributes(attrs) {\n    this.imageComponentRef.instance.src = attrs['src'];\n    this.imageComponentRef.instance.alt = attrs['alt'];\n    this.imageComponentRef.instance.title = attrs['title'];\n    this.imageComponentRef.instance.outerWidth = attrs['width'];\n  }\n\n  update(node) {\n    if (node.type !== this.node.type) {\n      return false;\n    }\n\n    this.node = node;\n    const changed = this.computeChanges(this.node.attrs, node.attrs);\n\n    if (changed) {\n      this.updating = true;\n      this.setNodeAttributes(node.attrs);\n      this.updating = false;\n    }\n\n    return true;\n  }\n\n  ignoreMutation() {\n    return true;\n  }\n\n  selectNode() {\n    this.imageComponentRef.instance.selected = true;\n  }\n\n  deselectNode() {\n    this.imageComponentRef.instance.selected = false;\n  }\n\n  destroy() {\n    this.resizeSubscription.unsubscribe();\n    this.applicationRef.detachView(this.imageComponentRef.hostView);\n  }\n\n}\n\nconst imageResizePlugin = injector => {\n  return new Plugin({\n    key: new PluginKey('image-resize'),\n    props: {\n      nodeViews: {\n        image: (node, view, getPos) => {\n          return new ImageRezieView(node, view, getPos, injector);\n        }\n      }\n    }\n  });\n};\n\nconst HTTP_LINK_REGEX = /((https?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+\\.?(:\\d+)?(\\/\\S*)?)$/;\n\nconst linkify = fragment => {\n  const linkified = [];\n  fragment.forEach(child => {\n    if (child.isText) {\n      const text = child.text;\n      let pos = 0;\n      const match = HTTP_LINK_REGEX.exec(text);\n\n      if (match) {\n        const start = match.index;\n        const end = start + match[0].length;\n        const link = child.type.schema.marks.link;\n\n        if (start > 0) {\n          linkified.push(child.cut(pos, start));\n        }\n\n        const urlText = text.slice(start, end);\n        linkified.push(child.cut(start, end).mark(link.create({\n          href: urlText\n        }).addToSet(child.marks)));\n        pos = end;\n      }\n\n      if (pos < text.length) {\n        linkified.push(child.cut(pos));\n      }\n    } else {\n      linkified.push(child.copy(linkify(child.content)));\n    }\n  });\n  return Fragment.fromArray(linkified);\n};\n\nconst linkifyPlugin = () => {\n  return new Plugin({\n    key: new PluginKey('linkify'),\n    props: {\n      transformPasted: slice => {\n        return new Slice(linkify(slice.content), slice.openStart, slice.openEnd);\n      }\n    }\n  });\n};\n\nconst emptyDoc = {\n  type: 'doc',\n  content: [{\n    type: 'paragraph'\n  }]\n}; // https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\n\nconst toHTML = (json, inputSchema) => {\n  const schema$1 = inputSchema !== null && inputSchema !== void 0 ? inputSchema : schema;\n  const contentNode = schema$1.nodeFromJSON(json);\n  const html = DOMSerializer.fromSchema(schema$1).serializeFragment(contentNode.content);\n  const div = document.createElement('div');\n  div.appendChild(html);\n  return div.innerHTML;\n};\n\nconst toDoc = (html, inputSchema) => {\n  const schema$1 = inputSchema !== null && inputSchema !== void 0 ? inputSchema : schema;\n  const el = document.createElement('div');\n  el.innerHTML = html;\n  return DOMParser.fromSchema(schema$1).parse(el).toJSON();\n};\n\nconst parseContent = (value, schema) => {\n  if (!value) {\n    return schema.nodeFromJSON(emptyDoc);\n  }\n\n  if (typeof value !== 'string') {\n    return schema.nodeFromJSON(value);\n  }\n\n  const docJson = toDoc(value, schema);\n  return schema.nodeFromJSON(docJson);\n};\n\nclass NgxEditorComponent {\n  constructor(_renderer, _injector, _elementRef) {\n    this._renderer = _renderer;\n    this._injector = _injector;\n    this._elementRef = _elementRef;\n    this.placeholder = 'Type Here...';\n    this.focusOut = new EventEmitter();\n    this.focusIn = new EventEmitter();\n    this.subscriptions = [];\n\n    this.onChange = () => {};\n\n    this.onTouched = () => {};\n  }\n\n  writeValue(value) {\n    if (!this.outputFormat && typeof value === 'string') {\n      this.outputFormat = 'html';\n    }\n\n    this.editor.setContent(value);\n  }\n\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled) {\n    this.setMeta('UPDATE_EDITABLE', !isDisabled);\n\n    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n  }\n\n  handleChange(jsonDoc) {\n    if (this.outputFormat === 'html') {\n      const html = toHTML(jsonDoc, this.editor.schema);\n      this.onChange(html);\n      return;\n    }\n\n    this.onChange(jsonDoc);\n  }\n\n  setMeta(key, value) {\n    const {\n      dispatch,\n      state: {\n        tr\n      }\n    } = this.editor.view;\n    dispatch(tr.setMeta(key, value));\n  }\n\n  setPlaceholder(placeholder) {\n    this.setMeta('UPDATE_PLACEHOLDER', placeholder);\n  }\n\n  registerPlugins() {\n    this.editor.registerPlugin(editablePlugin());\n    this.editor.registerPlugin(placeholderPlugin(this.placeholder));\n    this.editor.registerPlugin(attributesPlugin({\n      class: 'NgxEditor__Content'\n    }));\n    this.editor.registerPlugin(focusPlugin(() => {\n      this.focusIn.emit();\n    }));\n    this.editor.registerPlugin(focusPlugin(() => {\n      this.focusIn.emit();\n    }));\n    this.editor.registerPlugin(blurPlugin(() => {\n      this.focusOut.emit();\n      this.onTouched();\n    }));\n\n    if (this.editor.features.resizeImage) {\n      this.editor.registerPlugin(imageResizePlugin(this._injector));\n    }\n\n    if (this.editor.features.linkOnPaste) {\n      this.editor.registerPlugin(linkifyPlugin());\n    }\n  }\n\n  ngOnInit() {\n    if (!this.editor) {\n      throw new Error('NgxEditor: Required editor instance');\n    }\n\n    this.registerPlugins();\n\n    this._renderer.appendChild(this.ngxEditor.nativeElement, this.editor.view.dom);\n\n    const contentChangeSubscription = this.editor.valueChanges.subscribe(jsonDoc => {\n      this.handleChange(jsonDoc);\n    });\n    this.subscriptions.push(contentChangeSubscription);\n  }\n\n  ngOnChanges(changes) {\n    if ((changes === null || changes === void 0 ? void 0 : changes['placeholder']) && !changes['placeholder'].isFirstChange()) {\n      this.setPlaceholder(changes['placeholder'].currentValue);\n    }\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.forEach(subscription => {\n      subscription.unsubscribe();\n    });\n  }\n\n}\n\nNgxEditorComponent.ɵfac = function NgxEditorComponent_Factory(t) {\n  return new (t || NgxEditorComponent)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nNgxEditorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NgxEditorComponent,\n  selectors: [[\"ngx-editor\"]],\n  viewQuery: function NgxEditorComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c2, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ngxEditor = _t.first);\n    }\n  },\n  inputs: {\n    editor: \"editor\",\n    outputFormat: \"outputFormat\",\n    placeholder: \"placeholder\"\n  },\n  outputs: {\n    focusOut: \"focusOut\",\n    focusIn: \"focusIn\"\n  },\n  features: [i0.ɵɵProvidersFeature([{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => NgxEditorComponent),\n    multi: true\n  }]), i0.ɵɵNgOnChangesFeature],\n  ngContentSelectors: _c3,\n  decls: 3,\n  vars: 0,\n  consts: [[1, \"NgxEditor\"], [\"ngxEditor\", \"\"]],\n  template: function NgxEditorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵprojection(2);\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active{background-color:#e8f0fe}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active.NgxEditor__MenuItem--Text{color:#1a73e8}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active svg{fill:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open{background-color:#e8f0fe}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected .NgxEditor__Dropdown--Text,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open .NgxEditor__Dropdown--Text{color:#1a73e8}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\\n\"],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-editor',\n      providers: [{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: forwardRef(() => NgxEditorComponent),\n        multi: true\n      }],\n      encapsulation: ViewEncapsulation.None,\n      template: \"<div class=\\\"NgxEditor\\\" #ngxEditor>\\n  <ng-content></ng-content>\\n</div>\\n\",\n      styles: [\".NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active{background-color:#e8f0fe}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active.NgxEditor__MenuItem--Text{color:#1a73e8}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active svg{fill:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open{background-color:#e8f0fe}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected .NgxEditor__Dropdown--Text,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open .NgxEditor__Dropdown--Text{color:#1a73e8}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.Injector\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    ngxEditor: [{\n      type: ViewChild,\n      args: ['ngxEditor', {\n        static: true\n      }]\n    }],\n    editor: [{\n      type: Input\n    }],\n    outputFormat: [{\n      type: Input\n    }],\n    placeholder: [{\n      type: Input\n    }],\n    focusOut: [{\n      type: Output\n    }],\n    focusIn: [{\n      type: Output\n    }]\n  });\n})();\n\nclass MenuService {\n  constructor() {\n    this.customMenuRefChange = new Subject();\n  }\n\n  setCustomMenuRef(c) {\n    this.customMenuRefChange.next(c);\n  }\n\n}\n\nMenuService.ɵfac = function MenuService_Factory(t) {\n  return new (t || MenuService)();\n};\n\nMenuService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: MenuService,\n  factory: MenuService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MenuService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\n\nvar bold = `\n  <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n`;\nvar italic = `\n  <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\" />\n`;\nvar code = `\n<path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n`;\nvar underline = `\n<path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"/>\n`;\nvar strike = `\n<path d=\"M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z\"/>\n`;\nvar orderedList = `\n<path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"/>\n`;\nvar bulletList = `\n<path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\"/>\n`;\nvar quote = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z\"/>\n`;\nvar link = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n`;\nvar unlink = `\n<path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\"/>\n`;\nvar image = `\n<path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n`;\nvar alignLeft = `\n<path d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\"/>\n`;\nvar alignCenter = `\n<path d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\"/>\n`;\nvar alignRight = `\n<path d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\"/>\n`;\nvar alignJustify = `\n<path d=\"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z\"/>\n`;\nvar textColor = `\n<path d=\"M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z\"/>\n`;\nvar colorFill = `\n<path d=\"M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z\"/>\n`; // Icons source: https://material.io/\n\nconst DEFAULT_ICON_HEIGHT = 20;\nconst DEFAULT_ICON_WIDTH = 20;\nconst icons = {\n  bold,\n  italic,\n  code,\n  underline,\n  strike,\n  ordered_list: orderedList,\n  bullet_list: bulletList,\n  blockquote: quote,\n  link,\n  unlink,\n  image,\n  align_left: alignLeft,\n  align_center: alignCenter,\n  align_right: alignRight,\n  align_justify: alignJustify,\n  text_color: textColor,\n  color_fill: colorFill\n};\n\nclass Icon {\n  static get(name, fill = '#000') {\n    const path = icons[name] || '<path></path>';\n    return `\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=${fill}\n        height=${DEFAULT_ICON_HEIGHT}\n        width=${DEFAULT_ICON_WIDTH}\n      >\n        ${path}\n      </svg>\n    `;\n  }\n\n  static getPath(name) {\n    const path = icons[name] || '<path></path>';\n    return path;\n  }\n\n}\n\nclass Mark {\n  constructor(name) {\n    this.name = name;\n  }\n\n  apply() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.marks[this.name];\n\n      if (!type) {\n        return false;\n      }\n\n      return applyMark(type)(state, dispatch);\n    };\n  }\n\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.marks[this.name];\n\n      if (!type) {\n        return false;\n      }\n\n      return toggleMark(type)(state, dispatch);\n    };\n  }\n\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = schema.marks[this.name];\n\n    if (!type) {\n      return false;\n    }\n\n    return isMarkActive(state, type);\n  }\n\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n\n}\n\nclass Blockqote {\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.nodes.blockquote;\n\n      if (!type) {\n        return false;\n      }\n\n      if (this.isActive(state)) {\n        return lift(state, dispatch);\n      }\n\n      return wrapIn(type)(state, dispatch);\n    };\n  }\n\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = schema.nodes.blockquote;\n\n    if (!type) {\n      return false;\n    }\n\n    return isNodeActive(state, type);\n  }\n\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n\n}\n\nclass ListItem {\n  constructor(isBulletList = false) {\n    this.isBulletList = false;\n    this.isBulletList = isBulletList;\n  }\n\n  getType(schema) {\n    return this.isBulletList ? schema.nodes['bullet_list'] : schema.nodes['ordered_list'];\n  }\n\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = this.getType(schema);\n\n      if (!type) {\n        return false;\n      }\n\n      if (this.isActive(state)) {\n        return liftListItem(schema.nodes.list_item)(state, dispatch);\n      }\n\n      return wrapInList(type)(state, dispatch);\n    };\n  }\n\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = this.getType(schema);\n\n    if (!type) {\n      return false;\n    }\n\n    return isNodeActive(state, type);\n  }\n\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n\n}\n\nclass Heading {\n  constructor(level) {\n    this.level = level;\n  }\n\n  apply() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.nodes.heading;\n\n      if (!type) {\n        return false;\n      }\n\n      return setBlockType(type)(state, dispatch);\n    };\n  }\n\n  toggle() {\n    return (state, dispatch) => {\n      var _a;\n\n      const {\n        schema,\n        selection,\n        doc\n      } = state;\n      const type = schema.nodes.heading;\n\n      if (!type) {\n        return false;\n      }\n\n      const nodePos = selection.$from.before(1);\n      const node = doc.nodeAt(nodePos);\n      const attrs = (_a = node === null || node === void 0 ? void 0 : node.attrs) !== null && _a !== void 0 ? _a : {};\n\n      if (this.isActive(state)) {\n        return setBlockType(schema.nodes.paragraph, attrs)(state, dispatch);\n      }\n\n      return setBlockType(type, Object.assign(Object.assign({}, attrs), {\n        level: this.level\n      }))(state, dispatch);\n    };\n  }\n\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const nodesInSelection = getSelectionNodes(state);\n    const type = schema.nodes.heading;\n\n    if (!type) {\n      return false;\n    }\n\n    const supportedNodes = [type, schema.nodes.text, schema.nodes.blockquote]; // heading is a text node\n    // don't mark as active when it has more nodes\n\n    const nodes = nodesInSelection.filter(node => {\n      return supportedNodes.includes(node.type);\n    });\n    const acitveNode = nodes.find(node => {\n      return node.attrs['level'] === this.level;\n    });\n    return Boolean(acitveNode);\n  }\n\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n\n}\n\nclass TextAlign {\n  constructor(align) {\n    this.align = align;\n  }\n\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        doc,\n        selection,\n        tr,\n        schema\n      } = state;\n      const {\n        from,\n        to\n      } = selection;\n      let applicable = false;\n      doc.nodesBetween(from, to, (node, pos) => {\n        const nodeType = node.type;\n\n        if ([schema.nodes.paragraph, schema.nodes.heading].includes(nodeType)) {\n          applicable = true;\n          tr.setNodeMarkup(pos, nodeType, Object.assign(Object.assign({}, node.attrs), {\n            align: this.align\n          }));\n        }\n\n        return true;\n      });\n\n      if (!applicable) {\n        return false;\n      }\n\n      if (tr.docChanged) {\n        dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n      }\n\n      return true;\n    };\n  }\n\n  isActive(state) {\n    const nodes = getSelectionNodes(state);\n    const active = nodes.find(node => {\n      return node.attrs['align'] === this.align;\n    });\n    return Boolean(active);\n  }\n\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n\n}\n\nconst defaultOptions = {\n  strict: true\n};\n\nclass Link$1 {\n  update(attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        selection\n      } = state;\n      const type = schema.marks.link;\n\n      if (!type) {\n        return false;\n      }\n\n      if (selection.empty) {\n        return false;\n      }\n\n      return toggleMark(type, attrs)(state, dispatch);\n    };\n  }\n\n  insert(text, attrs) {\n    return (state, dispatch) => {\n      var _a, _b;\n\n      const {\n        schema,\n        tr\n      } = state;\n      const type = schema.marks.link;\n\n      if (!type) {\n        return false;\n      }\n\n      const linkAttrs = {\n        href: attrs.href,\n        title: (_a = attrs.title) !== null && _a !== void 0 ? _a : text,\n        target: (_b = attrs.target) !== null && _b !== void 0 ? _b : '_blank'\n      };\n      const node = schema.text(text, [schema.marks.link.create(linkAttrs)]);\n      tr.replaceSelectionWith(node, false).scrollIntoView();\n\n      if (tr.docChanged) {\n        dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  isActive(state, options = defaultOptions) {\n    if (options.strict) {\n      return true;\n    }\n\n    const {\n      schema\n    } = state;\n    const type = schema.marks.link;\n\n    if (!type) {\n      return false;\n    }\n\n    return isMarkActive(state, type);\n  }\n\n  remove(state, dispatch) {\n    return removeLink()(state, dispatch);\n  }\n\n  canExecute(state) {\n    const testAttrs = {\n      href: ''\n    };\n    return this.insert('Exec', testAttrs)(state) || this.update(testAttrs)(state);\n  }\n\n}\n\nclass Image$1 {\n  insert(src, attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        tr,\n        selection\n      } = state;\n      const type = schema.nodes.image;\n\n      if (!type) {\n        return false;\n      }\n\n      const imageAttrs = Object.assign({\n        width: null,\n        src\n      }, attrs);\n\n      if (!imageAttrs.width && selection instanceof NodeSelection && selection.node.type === type) {\n        imageAttrs.width = selection.node.attrs['width'];\n      }\n\n      tr.replaceSelectionWith(type.createAndFill(imageAttrs));\n      const resolvedPos = tr.doc.resolve(tr.selection.anchor - tr.selection.$anchor.nodeBefore.nodeSize);\n      tr.setSelection(new NodeSelection(resolvedPos)).scrollIntoView();\n\n      if (tr.docChanged) {\n        dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  isActive(state) {\n    const {\n      selection\n    } = state;\n\n    if (selection instanceof NodeSelection) {\n      return selection.node.type.name === 'image';\n    }\n\n    return false;\n  }\n\n}\n\nclass TextColor$1 {\n  constructor(name) {\n    this.name = name;\n  }\n\n  apply(attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        selection,\n        doc\n      } = state;\n      const type = schema.marks[this.name];\n\n      if (!type) {\n        return false;\n      }\n\n      const {\n        from,\n        to,\n        empty\n      } = selection;\n\n      if (!empty && from + 1 === to) {\n        const node = doc.nodeAt(from);\n\n        if ((node === null || node === void 0 ? void 0 : node.isAtom) && !node.isText && node.isLeaf) {\n          // An atomic node (e.g. Image) is selected.\n          return false;\n        }\n      }\n\n      return applyMark(type, attrs)(state, dispatch);\n    };\n  }\n\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = schema.marks[this.name];\n\n    if (!type) {\n      return false;\n    }\n\n    return isMarkActive(state, type);\n  }\n\n  getActiveColors(state) {\n    if (!this.isActive(state)) {\n      return [];\n    }\n\n    const {\n      schema\n    } = state;\n    const marks = getSelectionMarks(state);\n    const colors = marks.filter(mark => mark.type === schema.marks[this.name]).map(mark => mark.attrs['color']).filter(Boolean);\n    return colors;\n  }\n\n  remove() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.marks[this.name];\n\n      if (!type) {\n        return false;\n      }\n\n      return removeMark(type)(state, dispatch);\n    };\n  }\n\n  canExecute(state) {\n    const attrs = this.name === 'text_color' ? {\n      color: ''\n    } : {\n      backgroundColor: ''\n    };\n    return this.apply(attrs)(state);\n  }\n\n}\n\nconst STRONG = new Mark('strong');\nconst EM = new Mark('em');\nconst CODE = new Mark('code');\nconst UNDERLINE = new Mark('u');\nconst STRIKE = new Mark('s');\nconst BLOCKQUOTE = new Blockqote();\nconst UL = new ListItem(true);\nconst OL = new ListItem(false);\nconst H1 = new Heading(1);\nconst H2 = new Heading(2);\nconst H3 = new Heading(3);\nconst H4 = new Heading(4);\nconst H5 = new Heading(5);\nconst H6 = new Heading(6);\nconst ALIGN_LEFT = new TextAlign('left');\nconst ALIGN_CENTER = new TextAlign('center');\nconst ALIGN_RIGHT = new TextAlign('right');\nconst ALIGN_JUSTIFY = new TextAlign('justify');\nconst LINK = new Link$1();\nconst IMAGE = new Image$1();\nconst TEXT_COLOR = new TextColor$1('text_color');\nconst TEXT_BACKGROUND_COLOR = new TextColor$1('text_background_color');\nconst ToggleCommands = {\n  bold: STRONG,\n  italic: EM,\n  code: CODE,\n  underline: UNDERLINE,\n  strike: STRIKE,\n  blockquote: BLOCKQUOTE,\n  bullet_list: UL,\n  ordered_list: OL,\n  h1: H1,\n  h2: H2,\n  h3: H3,\n  h4: H4,\n  h5: H5,\n  h6: H6,\n  align_left: ALIGN_LEFT,\n  align_center: ALIGN_CENTER,\n  align_right: ALIGN_RIGHT,\n  align_justify: ALIGN_JUSTIFY\n};\nconst Link = LINK;\nconst Image = IMAGE;\nconst TextColor = TEXT_COLOR;\nconst TextBackgroundColor = TEXT_BACKGROUND_COLOR;\nconst defaults = {\n  // menu\n  bold: 'Bold',\n  italic: 'Italic',\n  code: 'Code',\n  underline: 'Underline',\n  strike: 'Strike',\n  blockquote: 'Blockquote',\n  bullet_list: 'Bullet List',\n  ordered_list: 'Ordered List',\n  heading: 'Heading',\n  h1: 'Header 1',\n  h2: 'Header 2',\n  h3: 'Header 3',\n  h4: 'Header 4',\n  h5: 'Header 5',\n  h6: 'Header 6',\n  align_left: 'Left Align',\n  align_center: 'Center Align',\n  align_right: 'Right Align',\n  align_justify: 'Justify',\n  text_color: 'Text Color',\n  background_color: 'Background Color',\n  insertLink: 'Insert Link',\n  removeLink: 'Remove Link',\n  insertImage: 'Insert Image',\n  // pupups, forms, others...\n  url: 'URL',\n  text: 'Text',\n  openInNewTab: 'Open in new tab',\n  insert: 'Insert',\n  altText: 'Alt Text',\n  title: 'Title',\n  remove: 'Remove'\n};\n\nclass Locals {\n  constructor(newLocals = {}) {\n    this.locals = defaults;\n\n    this.get = key => {\n      var _a;\n\n      return (_a = this.locals[key]) !== null && _a !== void 0 ? _a : '';\n    };\n\n    this.locals = Object.assign({}, defaults, newLocals);\n  }\n\n}\n\nclass NgxEditorServiceConfig {\n  constructor() {\n    this.locals = {};\n  }\n\n}\n\nNgxEditorServiceConfig.ɵfac = function NgxEditorServiceConfig_Factory(t) {\n  return new (t || NgxEditorServiceConfig)();\n};\n\nNgxEditorServiceConfig.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NgxEditorServiceConfig,\n  factory: NgxEditorServiceConfig.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorServiceConfig, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\n\nclass NgxEditorService {\n  constructor(config) {\n    this.config = config;\n  }\n\n  get locals() {\n    return new Locals(this.config.locals);\n  }\n\n}\n\nNgxEditorService.ɵfac = function NgxEditorService_Factory(t) {\n  return new (t || NgxEditorService)(i0.ɵɵinject(NgxEditorServiceConfig, 8));\n};\n\nNgxEditorService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NgxEditorService,\n  factory: NgxEditorService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: NgxEditorServiceConfig,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\n\nconst provideMyServiceOptions = config => {\n  var _a;\n\n  return {\n    locals: (_a = config.locals) !== null && _a !== void 0 ? _a : {}\n  };\n};\n\nclass SanitizeHtmlPipe {\n  constructor(sanitizer) {\n    this.sanitizer = sanitizer;\n  }\n\n  transform(value) {\n    return this.sanitizer.bypassSecurityTrustHtml(value);\n  }\n\n}\n\nSanitizeHtmlPipe.ɵfac = function SanitizeHtmlPipe_Factory(t) {\n  return new (t || SanitizeHtmlPipe)(i0.ɵɵdirectiveInject(i1.DomSanitizer, 16));\n};\n\nSanitizeHtmlPipe.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n  name: \"sanitizeHtml\",\n  type: SanitizeHtmlPipe,\n  pure: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SanitizeHtmlPipe, [{\n    type: Pipe,\n    args: [{\n      name: 'sanitizeHtml'\n    }]\n  }], function () {\n    return [{\n      type: i1.DomSanitizer\n    }];\n  }, null);\n})();\n\nclass ToggleCommandComponent {\n  constructor(ngxeService, menuService) {\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.isActive = false;\n    this.disabled = false;\n\n    this.update = view => {\n      const {\n        state\n      } = view;\n      const command = ToggleCommands[this.name];\n      this.isActive = command.isActive(state);\n      this.disabled = !command.canExecute(state);\n    };\n  }\n\n  get name() {\n    return this.toolbarItem;\n  }\n\n  toggle(e) {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    const command = ToggleCommands[this.name];\n    command.toggle()(state, dispatch);\n  }\n\n  getTitle(name) {\n    return this.ngxeService.locals.get(name);\n  }\n\n  ngOnInit() {\n    this.html = Icon.get(this.name);\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n\n}\n\nToggleCommandComponent.ɵfac = function ToggleCommandComponent_Factory(t) {\n  return new (t || ToggleCommandComponent)(i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n};\n\nToggleCommandComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ToggleCommandComponent,\n  selectors: [[\"ngx-toggle-command\"]],\n  hostVars: 4,\n  hostBindings: function ToggleCommandComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.isActive)(\"NgxEditor--Disabled\", ctx.disabled);\n    }\n  },\n  inputs: {\n    toolbarItem: \"toolbarItem\"\n  },\n  decls: 2,\n  vars: 4,\n  consts: [[1, \"NgxEditor__MenuItem--IconContainer\", 3, \"innerHTML\", \"title\", \"mousedown\"]],\n  template: function ToggleCommandComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function ToggleCommandComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.toggle($event);\n      });\n      i0.ɵɵpipe(1, \"sanitizeHtml\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 2, ctx.html), i0.ɵɵsanitizeHtml)(\"title\", ctx.getTitle(ctx.name));\n    }\n  },\n  pipes: [SanitizeHtmlPipe],\n  styles: [\"\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ToggleCommandComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-toggle-command',\n      template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"html | sanitizeHtml\\\" (mousedown)=\\\"toggle($event)\\\"\\n  [title]=\\\"getTitle(name)\\\">\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: NgxEditorService\n    }, {\n      type: MenuService\n    }];\n  }, {\n    toolbarItem: [{\n      type: Input\n    }],\n    isActive: [{\n      type: HostBinding,\n      args: ['class.NgxEditor__MenuItem--Active']\n    }],\n    disabled: [{\n      type: HostBinding,\n      args: ['class.NgxEditor--Disabled']\n    }]\n  });\n})();\n\nclass LinkComponent {\n  constructor(el, ngxeService, menuService) {\n    this.el = el;\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.showPopup = false;\n    this.isActive = false;\n    this.canExecute = true;\n    this.form = new FormGroup({\n      href: new FormControl('', [Validators$1.required, Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)')]),\n      text: new FormControl('', [Validators$1.required]),\n      openInNewTab: new FormControl(true)\n    });\n\n    this.setText = () => {\n      const {\n        state: {\n          selection,\n          doc\n        }\n      } = this.editorView;\n      const {\n        empty,\n        from,\n        to\n      } = selection;\n      const selectedText = !empty ? doc.textBetween(from, to) : '';\n\n      if (selectedText) {\n        this.text.patchValue(selectedText);\n        this.text.disable();\n      }\n    };\n\n    this.update = view => {\n      const {\n        state\n      } = view;\n      this.isActive = Link.isActive(state, {\n        strict: false\n      });\n      this.canExecute = Link.canExecute(state);\n    };\n  }\n\n  get valid() {\n    return this.isActive || this.showPopup;\n  }\n\n  get disabled() {\n    return !this.canExecute;\n  }\n\n  get icon() {\n    return Icon.get(this.isActive ? 'unlink' : 'link');\n  }\n\n  get title() {\n    return this.ngxeService.locals.get(this.isActive ? 'removeLink' : 'insertLink');\n  }\n\n  get href() {\n    return this.form.get('href');\n  }\n\n  get text() {\n    return this.form.get('text');\n  }\n\n  onDocumentClick(e) {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hideForm();\n    }\n  }\n\n  getLabel(key) {\n    return this.ngxeService.locals.get(key);\n  }\n\n  hideForm() {\n    this.showPopup = false;\n    this.form.reset({\n      href: '',\n      text: '',\n      openInNewTab: true\n    });\n    this.text.enable();\n  }\n\n  onMouseDown(e) {\n    if (e.button !== 0) {\n      return;\n    }\n\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n\n    if (this.isActive) {\n      Link.remove(state, dispatch);\n      return;\n    }\n\n    this.showPopup = !this.showPopup;\n\n    if (this.showPopup) {\n      this.setText();\n    }\n  }\n\n  insertLink(e) {\n    e.preventDefault();\n    const {\n      text,\n      href,\n      openInNewTab\n    } = this.form.getRawValue();\n    const {\n      dispatch,\n      state\n    } = this.editorView;\n    const {\n      selection\n    } = state;\n    const attrs = {\n      title: href,\n      href,\n      target: openInNewTab ? '_blank' : '_self'\n    };\n\n    if (selection.empty) {\n      Link.insert(text, attrs)(state, dispatch);\n      this.editorView.focus();\n    } else {\n      Link.update(attrs)(state, dispatch);\n    }\n\n    this.hideForm();\n  }\n\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n\n}\n\nLinkComponent.ɵfac = function LinkComponent_Factory(t) {\n  return new (t || LinkComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n};\n\nLinkComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: LinkComponent,\n  selectors: [[\"ngx-link\"]],\n  hostVars: 4,\n  hostBindings: function LinkComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function LinkComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onDocumentClick($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.valid)(\"NgxEditor--Disabled\", ctx.disabled);\n    }\n  },\n  decls: 3,\n  vars: 5,\n  consts: [[1, \"NgxEditor__MenuItem--IconContainer\", 3, \"innerHTML\", \"title\", \"mousedown\"], [\"class\", \"NgxEditor__Popup\", 4, \"ngIf\"], [1, \"NgxEditor__Popup\"], [1, \"NgxEditor__Popup--Form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"NgxEditor__Popup--FormGroup\"], [1, \"NgxEditor__Popup--Col\"], [1, \"NgxEditor__Popup--Label\"], [\"type\", \"href\", \"id\", \"href\", \"formControlName\", \"href\", \"autofocus\", \"\", \"autocomplete\", \"off\"], [\"class\", \"NgxEditor__HelpText NgxEditor__HelpText--Error\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"text\", \"autocomplete\", \"off\"], [\"type\", \"checkbox\", \"formControlName\", \"openInNewTab\"], [\"type\", \"submit\", 3, \"disabled\"], [1, \"NgxEditor__HelpText\", \"NgxEditor__HelpText--Error\"]],\n  template: function LinkComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function LinkComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.onMouseDown($event);\n      });\n      i0.ɵɵpipe(1, \"sanitizeHtml\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, LinkComponent_div_2_Template, 21, 8, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 3, ctx.icon), i0.ɵɵsanitizeHtml)(\"title\", ctx.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showPopup);\n    }\n  },\n  directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName, i4.CheckboxControlValueAccessor],\n  pipes: [SanitizeHtmlPipe],\n  styles: [\"\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LinkComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-link',\n      template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"href\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"href.touched && href.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ href.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('text')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"text\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"text.touched && text.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ text.errors?.['required'] && 'This is required' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" formControlName=\\\"openInNewTab\\\" />\\n          {{getLabel('openInNewTab')}}\\n        </label>\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: NgxEditorService\n    }, {\n      type: MenuService\n    }];\n  }, {\n    valid: [{\n      type: HostBinding,\n      args: ['class.NgxEditor__MenuItem--Active']\n    }],\n    disabled: [{\n      type: HostBinding,\n      args: ['class.NgxEditor--Disabled']\n    }],\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }]\n  });\n})();\n\nclass ImageComponent {\n  constructor(el, ngxeService, menuService) {\n    this.el = el;\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.showPopup = false;\n    this.isActive = false;\n    this.form = new FormGroup({\n      src: new FormControl('', [Validators$1.required, Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)')]),\n      alt: new FormControl(''),\n      title: new FormControl('')\n    });\n\n    this.update = view => {\n      const {\n        state\n      } = view;\n      this.isActive = Image.isActive(state);\n    };\n  }\n\n  get valid() {\n    return this.isActive || this.showPopup;\n  }\n\n  get icon() {\n    return Icon.get('image');\n  }\n\n  get src() {\n    return this.form.get('src');\n  }\n\n  onDocumentClick(e) {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hideForm();\n    }\n  }\n\n  getLabel(key) {\n    return this.ngxeService.locals.get(key);\n  }\n\n  hideForm() {\n    this.showPopup = false;\n    this.form.reset({\n      src: '',\n      alt: '',\n      title: ''\n    });\n  }\n\n  onMouseDown(e) {\n    if (e.button !== 0) {\n      return;\n    }\n\n    this.showPopup = !this.showPopup;\n\n    if (this.showPopup) {\n      this.fillForm();\n    }\n  }\n\n  fillForm() {\n    const {\n      state\n    } = this.editorView;\n    const {\n      selection\n    } = state;\n\n    if (selection instanceof NodeSelection && this.isActive) {\n      const {\n        src,\n        alt = '',\n        title = ''\n      } = selection.node.attrs;\n      this.form.setValue({\n        src,\n        alt,\n        title\n      });\n    }\n  }\n\n  insertLink(e) {\n    e.preventDefault();\n    const {\n      src,\n      alt,\n      title\n    } = this.form.getRawValue();\n    const {\n      dispatch,\n      state\n    } = this.editorView;\n    const attrs = {\n      alt,\n      title\n    };\n    Image.insert(src, attrs)(state, dispatch);\n    this.editorView.focus();\n    this.hideForm();\n  }\n\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n\n}\n\nImageComponent.ɵfac = function ImageComponent_Factory(t) {\n  return new (t || ImageComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n};\n\nImageComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ImageComponent,\n  selectors: [[\"ngx-image\"]],\n  hostVars: 2,\n  hostBindings: function ImageComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function ImageComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onDocumentClick($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.valid);\n    }\n  },\n  decls: 3,\n  vars: 5,\n  consts: [[1, \"NgxEditor__MenuItem--IconContainer\", 3, \"innerHTML\", \"title\", \"mousedown\"], [\"class\", \"NgxEditor__Popup\", 4, \"ngIf\"], [1, \"NgxEditor__Popup\"], [1, \"NgxEditor__Popup--Form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"NgxEditor__Popup--FormGroup\"], [1, \"NgxEditor__Popup--Col\"], [1, \"NgxEditor__Popup--Label\"], [\"type\", \"href\", \"id\", \"href\", \"formControlName\", \"src\", \"autofocus\", \"\", \"autocomplete\", \"off\"], [\"class\", \"NgxEditor__HelpText NgxEditor__HelpText--Error\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"alt\", \"autocomplete\", \"off\"], [\"type\", \"text\", \"formControlName\", \"title\", \"autocomplete\", \"off\"], [\"type\", \"submit\", 3, \"disabled\"], [1, \"NgxEditor__HelpText\", \"NgxEditor__HelpText--Error\"]],\n  template: function ImageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function ImageComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.onMouseDown($event);\n      });\n      i0.ɵɵpipe(1, \"sanitizeHtml\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, ImageComponent_div_2_Template, 20, 7, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 3, ctx.icon), i0.ɵɵsanitizeHtml)(\"title\", ctx.getLabel(\"insertImage\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showPopup);\n    }\n  },\n  directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName],\n  pipes: [SanitizeHtmlPipe],\n  styles: [\"\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ImageComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-image',\n      template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\"\\n  [title]=\\\"getLabel('insertImage')\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"src\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"src.touched && src.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ src.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('altText')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"alt\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('title')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"title\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid || !form.dirty\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: NgxEditorService\n    }, {\n      type: MenuService\n    }];\n  }, {\n    valid: [{\n      type: HostBinding,\n      args: ['class.NgxEditor__MenuItem--Active']\n    }],\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }]\n  });\n})();\n\nclass DropdownComponent {\n  constructor(ngxeService, menuService, el) {\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.el = el;\n    this.isDropdownOpen = false;\n    this.activeItems = [];\n    this.disabledItems = [];\n\n    this.update = view => {\n      const {\n        state\n      } = view;\n      this.activeItems = [];\n      this.disabledItems = [];\n      this.items.forEach(item => {\n        const command = ToggleCommands[item];\n        const isActive = command.isActive(state);\n\n        if (isActive) {\n          this.activeItems.push(item);\n        }\n\n        if (!command.canExecute(state)) {\n          this.disabledItems.push(item);\n        }\n      });\n\n      if (this.activeItems.length === 1) {\n        this.activeItem = this.activeItems[0];\n      } else {\n        this.activeItem = null;\n      }\n    };\n  }\n\n  get isSelected() {\n    return Boolean(this.activeItem || this.isDropdownOpen);\n  }\n\n  get isDropdownDisabled() {\n    return this.disabledItems.length === this.items.length;\n  }\n\n  onDocumentClick(target) {\n    if (!this.el.nativeElement.contains(target) && this.isDropdownOpen) {\n      this.isDropdownOpen = false;\n    }\n  }\n\n  getName(key) {\n    return this.ngxeService.locals.get(key);\n  }\n\n  toggleDropdown(e) {\n    e.preventDefault();\n    this.isDropdownOpen = !this.isDropdownOpen;\n  }\n\n  onClick(e, item) {\n    e.preventDefault(); // consider only left click\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const command = ToggleCommands[item];\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    command.toggle()(state, dispatch);\n    this.isDropdownOpen = false;\n  }\n\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n\n}\n\nDropdownComponent.ɵfac = function DropdownComponent_Factory(t) {\n  return new (t || DropdownComponent)(i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nDropdownComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: DropdownComponent,\n  selectors: [[\"ngx-dropdown\"]],\n  hostVars: 4,\n  hostBindings: function DropdownComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function DropdownComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onDocumentClick($event.target);\n      }, false, i0.ɵɵresolveDocument);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__Dropdown--Selected\", ctx.isSelected)(\"NgxEditor--Disabled\", ctx.isDropdownDisabled);\n    }\n  },\n  inputs: {\n    group: \"group\",\n    items: \"items\"\n  },\n  decls: 3,\n  vars: 2,\n  consts: [[1, \"NgxEditor__Dropdown--Text\", 3, \"mousedown\"], [\"class\", \"NgxEditor__Dropdown--DropdownMenu\", 4, \"ngIf\"], [1, \"NgxEditor__Dropdown--DropdownMenu\"], [\"class\", \"NgxEditor__Dropdown--Item\", 3, \"ngClass\", \"mousedown\", 4, \"ngFor\", \"ngForOf\"], [1, \"NgxEditor__Dropdown--Item\", 3, \"ngClass\", \"mousedown\"]],\n  template: function DropdownComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function DropdownComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.toggleDropdown($event);\n      });\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, DropdownComponent_div_2_Template, 2, 1, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" \", ctx.getName(ctx.activeItem || ctx.group), \"\\n\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isDropdownOpen);\n    }\n  },\n  directives: [i3.NgIf, i3.NgForOf, i3.NgClass],\n  styles: [\"\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DropdownComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-dropdown',\n      template: \"<div class=\\\"NgxEditor__Dropdown--Text\\\" (mousedown)=\\\"toggleDropdown($event)\\\">\\n  {{getName(activeItem || group)}}\\n</div>\\n\\n<div class=\\\"NgxEditor__Dropdown--DropdownMenu\\\" *ngIf=\\\"isDropdownOpen\\\">\\n  <div class=\\\"NgxEditor__Dropdown--Item\\\" *ngFor=\\\"let item of items\\\" (mousedown)=\\\"onClick($event, item)\\\"\\n    [ngClass]=\\\"{'NgxEditor__Dropdown--Active': item === activeItem, 'NgxEditor--Disabled':disabledItems.includes(item)}\\\">\\n    {{getName(item)}}\\n  </div>\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: NgxEditorService\n    }, {\n      type: MenuService\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    group: [{\n      type: Input\n    }],\n    items: [{\n      type: Input\n    }],\n    isSelected: [{\n      type: HostBinding,\n      args: ['class.NgxEditor__Dropdown--Selected']\n    }],\n    isDropdownDisabled: [{\n      type: HostBinding,\n      args: ['class.NgxEditor--Disabled']\n    }],\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event.target']]\n    }]\n  });\n})();\n\nclass ColorPickerComponent {\n  constructor(el, menuService, ngxeService) {\n    this.el = el;\n    this.menuService = menuService;\n    this.ngxeService = ngxeService;\n    this.showPopup = false;\n    this.isActive = false;\n    this.activeColors = [];\n    this.canExecute = true;\n\n    this.update = view => {\n      const {\n        state\n      } = view;\n      this.canExecute = this.command.canExecute(state);\n      this.isActive = this.command.isActive(state);\n      this.activeColors = [];\n\n      if (this.isActive) {\n        this.activeColors = this.command.getActiveColors(state);\n      }\n    };\n  }\n\n  get valid() {\n    return this.isActive || this.showPopup;\n  }\n\n  get disabled() {\n    return !this.canExecute;\n  }\n\n  get title() {\n    return this.getLabel(this.type === 'text_color' ? 'text_color' : 'background_color');\n  }\n\n  get icon() {\n    return Icon.get(this.type === 'text_color' ? 'text_color' : 'color_fill');\n  }\n\n  get command() {\n    return this.type === 'text_color' ? TextColor : TextBackgroundColor;\n  }\n\n  getContrastYIQ(hexcolor) {\n    hexcolor = hexcolor.replace('#', '');\n    const r = parseInt(hexcolor.substr(0, 2), 16);\n    const g = parseInt(hexcolor.substr(2, 2), 16);\n    const b = parseInt(hexcolor.substr(4, 2), 16);\n    const yiq = (r * 299 + g * 587 + b * 114) / 1000;\n    return yiq >= 128 ? 'black' : 'white';\n  }\n\n  onDocumentClick(e) {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hidePopup();\n    }\n  }\n\n  hidePopup() {\n    this.showPopup = false;\n  }\n\n  togglePopup(e) {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    this.showPopup = !this.showPopup;\n  }\n\n  remove(e) {\n    e.preventDefault();\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    this.command.remove()(state, dispatch);\n    this.hidePopup();\n  }\n\n  onColorSelect(e, color) {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n\n    if (this.type === 'text_color') {\n      const attrs = {\n        color\n      };\n      this.command.apply(attrs)(state, dispatch);\n    } else {\n      const attrs = {\n        backgroundColor: color\n      };\n      this.command.apply(attrs)(state, dispatch);\n    }\n\n    if (!this.editorView.hasFocus()) {\n      this.editorView.focus();\n    }\n\n    this.hidePopup();\n  }\n\n  getLabel(key) {\n    return this.ngxeService.locals.get(key);\n  }\n\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n\n}\n\nColorPickerComponent.ɵfac = function ColorPickerComponent_Factory(t) {\n  return new (t || ColorPickerComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(MenuService), i0.ɵɵdirectiveInject(NgxEditorService));\n};\n\nColorPickerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ColorPickerComponent,\n  selectors: [[\"ngx-color-picker\"]],\n  hostVars: 4,\n  hostBindings: function ColorPickerComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onDocumentClick($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.valid)(\"NgxEditor--Disabled\", ctx.disabled);\n    }\n  },\n  inputs: {\n    presets: \"presets\",\n    type: \"type\"\n  },\n  decls: 3,\n  vars: 5,\n  consts: [[1, \"NgxEditor__MenuItem--IconContainer\", 3, \"innerHTML\", \"title\", \"mousedown\"], [\"class\", \"NgxEditor__Popup\", 4, \"ngIf\"], [1, \"NgxEditor__Popup\"], [\"class\", \"NgxEditor__ColorContainer\", 4, \"ngFor\", \"ngForOf\"], [1, \"NgxEditor__MenuItem--Button\", 3, \"disabled\", \"mousedown\"], [1, \"NgxEditor__ColorContainer\"], [\"class\", \"NgxEditor__Color\", 3, \"ngStyle\", \"title\", \"ngClass\", \"mousedown\", 4, \"ngFor\", \"ngForOf\"], [1, \"NgxEditor__Color\", 3, \"ngStyle\", \"title\", \"ngClass\", \"mousedown\"]],\n  template: function ColorPickerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.togglePopup($event);\n      });\n      i0.ɵɵpipe(1, \"sanitizeHtml\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, ColorPickerComponent_div_2_Template, 4, 3, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 3, ctx.icon), i0.ɵɵsanitizeHtml)(\"title\", ctx.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showPopup);\n    }\n  },\n  directives: [i3.NgIf, i3.NgForOf, i3.NgStyle, i3.NgClass],\n  pipes: [SanitizeHtmlPipe],\n  styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ColorPickerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-color-picker',\n      template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"togglePopup($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <div *ngFor=\\\"let colorGroup of presets\\\" class=\\\"NgxEditor__ColorContainer\\\">\\n    <button class=\\\"NgxEditor__Color\\\" *ngFor=\\\"let color of colorGroup\\\"\\n      [ngStyle]=\\\"{backgroundColor: color, color:getContrastYIQ(color)}\\\" [title]=\\\"color\\\"\\n      (mousedown)=\\\"onColorSelect($event, color)\\\"\\n      [ngClass]=\\\"{'NgxEditor__Color--Active': activeColors.includes(color)}\\\"></button>\\n  </div>\\n\\n  <button class=\\\"NgxEditor__MenuItem--Button\\\" (mousedown)=\\\"remove($event)\\\" [disabled]=\\\"!isActive\\\">\\n    {{getLabel('remove')}}\\n  </button>\\n</div>\\n\",\n      styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup{width:230px}.NgxEditor__ColorContainer{display:flex;justify-content:space-between}.NgxEditor__ColorContainer+.NgxEditor__ColorContainer{margin-top:5px}.NgxEditor__Color{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button{margin-top:5px}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: MenuService\n    }, {\n      type: NgxEditorService\n    }];\n  }, {\n    presets: [{\n      type: Input\n    }],\n    type: [{\n      type: Input\n    }],\n    valid: [{\n      type: HostBinding,\n      args: ['class.NgxEditor__MenuItem--Active']\n    }],\n    disabled: [{\n      type: HostBinding,\n      args: ['class.NgxEditor--Disabled']\n    }],\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }]\n  });\n})();\n\nconst DEFAULT_TOOLBAR = [['bold', 'italic'], ['code', 'blockquote'], ['underline', 'strike'], ['ordered_list', 'bullet_list'], [{\n  heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']\n}], ['link', 'image'], ['text_color', 'background_color'], ['align_left', 'align_center', 'align_right', 'align_justify']];\nconst TOOLBAR_MINIMAL = [['bold', 'italic'], [{\n  heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']\n}], ['link', 'image'], ['text_color', 'background_color']];\nconst DEFAULT_COLOR_PRESETS = ['#b60205', '#d93f0b', '#fbca04', '#0e8a16', '#006b75', '#1d76db', '#0052cc', '#5319e7', '#e99695', '#f9d0c4', '#fef2c0', '#c2e0c6', '#bfdadc', '#c5def5', '#bfd4f2', '#d4c5f9'];\n\nclass MenuComponent {\n  constructor(menuService) {\n    this.menuService = menuService;\n    this.toolbar = TOOLBAR_MINIMAL;\n    this.colorPresets = DEFAULT_COLOR_PRESETS;\n    this.disabled = false;\n    this.customMenuRef = null;\n    this.dropdownPlacement = 'bottom';\n    this.toggleCommands = ['bold', 'italic', 'underline', 'strike', 'code', 'blockquote', 'ordered_list', 'bullet_list', 'align_left', 'align_center', 'align_right', 'align_justify'];\n    this.iconContainerClass = ['NgxEditor__MenuItem', 'NgxEditor__MenuItem--Icon'];\n    this.dropdownContainerClass = ['NgxEditor__Dropdown'];\n    this.seperatorClass = ['NgxEditor__Seperator'];\n  }\n\n  get presets() {\n    const col = 8;\n    const colors = [];\n    this.colorPresets.forEach((color, index) => {\n      const row = Math.floor(index / col);\n\n      if (!colors[row]) {\n        colors.push([]);\n      }\n\n      colors[row].push(color);\n    });\n    return colors;\n  }\n\n  isDropDown(item) {\n    if (item === null || item === void 0 ? void 0 : item.heading) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getDropdownItems(item) {\n    return item;\n  }\n\n  ngOnInit() {\n    if (!this.editor) {\n      throw new Error('NgxEditor: Required editor instance');\n    }\n\n    this.menuService.editor = this.editor;\n  }\n\n}\n\nMenuComponent.ɵfac = function MenuComponent_Factory(t) {\n  return new (t || MenuComponent)(i0.ɵɵdirectiveInject(MenuService));\n};\n\nMenuComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: MenuComponent,\n  selectors: [[\"ngx-editor-menu\"]],\n  inputs: {\n    toolbar: \"toolbar\",\n    colorPresets: \"colorPresets\",\n    disabled: \"disabled\",\n    editor: \"editor\",\n    customMenuRef: \"customMenuRef\",\n    dropdownPlacement: \"dropdownPlacement\"\n  },\n  features: [i0.ɵɵProvidersFeature([MenuService])],\n  decls: 3,\n  vars: 6,\n  consts: [[1, \"NgxEditor__MenuBar\", 3, \"ngClass\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [3, \"toolbarItem\", \"class\", 4, \"ngIf\"], [3, \"class\", 4, \"ngIf\"], [\"type\", \"text_color\", 3, \"class\", \"presets\", 4, \"ngIf\"], [\"type\", \"background_color\", 3, \"class\", \"presets\", 4, \"ngIf\"], [3, \"toolbarItem\"], [3, \"class\", \"group\", \"items\", 4, \"ngFor\", \"ngForOf\"], [3, \"group\", \"items\"], [\"type\", \"text_color\", 3, \"presets\"], [\"type\", \"background_color\", 3, \"presets\"], [3, \"ngTemplateOutlet\"]],\n  template: function MenuComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, MenuComponent_ng_container_1_Template, 2, 1, \"ng-container\", 1);\n      i0.ɵɵtemplate(2, MenuComponent_ng_container_2_Template, 2, 1, \"ng-container\", 2);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(3, _c7, ctx.disabled, ctx.dropdownPlacement === \"top\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.toolbar);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.customMenuRef);\n    }\n  },\n  directives: [i3.NgClass, i3.NgForOf, i3.NgIf, ToggleCommandComponent, LinkComponent, ImageComponent, DropdownComponent, ColorPickerComponent, i3.NgTemplateOutlet],\n  pipes: [i3.KeyValuePipe],\n  styles: [\"\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MenuComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-editor-menu',\n      providers: [MenuService],\n      template: \"<div class=\\\"NgxEditor__MenuBar\\\" [ngClass]=\\\"{'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top'}\\\">\\n\\n  <ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last\\\">\\n    <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last\\\">\\n\\n      <!-- toggle icons -->\\n      <ngx-toggle-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"toggleCommands.includes(item)\\\">\\n      </ngx-toggle-command>\\n\\n      <!-- link -->\\n      <ngx-link [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'link'\\\"></ngx-link>\\n\\n      <!-- image -->\\n      <ngx-image [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'image'\\\">\\n      </ngx-image>\\n\\n      <!-- dropdown -->\\n      <ng-container *ngIf=\\\"isDropDown(item)\\\">\\n        <ngx-dropdown *ngFor=\\\"let dropdownItem of getDropdownItems(item) | keyvalue\\\" [class]=\\\"dropdownContainerClass\\\"\\n          [group]=\\\"dropdownItem.key\\\" [items]=\\\"dropdownItem.value\\\">\\n        </ngx-dropdown>\\n      </ng-container>\\n\\n      <!-- text color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'text_color'\\\" type=\\\"text_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n      <!-- background color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'background_color'\\\" type=\\\"background_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n\\n      <!-- seperator -->\\n      <div [class]=\\\"seperatorClass\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <!-- custom menu -->\\n  <ng-container *ngIf=\\\"customMenuRef\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"customMenuRef\\\"></ng-container>\\n  </ng-container>\\n\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: MenuService\n    }];\n  }, {\n    toolbar: [{\n      type: Input\n    }],\n    colorPresets: [{\n      type: Input\n    }],\n    disabled: [{\n      type: Input\n    }],\n    editor: [{\n      type: Input\n    }],\n    customMenuRef: [{\n      type: Input\n    }],\n    dropdownPlacement: [{\n      type: Input\n    }]\n  });\n})();\n\nclass BubbleComponent {\n  constructor(sanitizeHTML, ngxeService) {\n    this.sanitizeHTML = sanitizeHTML;\n    this.ngxeService = ngxeService;\n    this.execulableItems = [];\n    this.activeItems = [];\n    this.toolbar = [['bold', 'italic', 'underline', 'strike'], ['ordered_list', 'bullet_list', 'blockquote', 'code'], ['align_left', 'align_center', 'align_right', 'align_justify']];\n    this.toggleCommands = ['bold', 'italic', 'underline', 'strike', 'ordered_list', 'bullet_list', 'blockquote', 'code', 'align_left', 'align_center', 'align_right', 'align_justify'];\n  }\n\n  get view() {\n    return this.editor.view;\n  }\n\n  getIcon(name) {\n    const icon = Icon.getPath(name);\n    return this.sanitizeHTML.transform(icon);\n  }\n\n  getTitle(name) {\n    return this.ngxeService.locals.get(name);\n  }\n\n  onClick(e, commandName) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const {\n      state,\n      dispatch\n    } = this.view;\n    const command = ToggleCommands[commandName];\n    command.toggle()(state, dispatch);\n  }\n\n  update(view) {\n    this.activeItems = [];\n    this.execulableItems = [];\n    const {\n      state\n    } = view;\n    this.toggleCommands.forEach(toolbarItem => {\n      const command = ToggleCommands[toolbarItem];\n      const isActive = command.isActive(state);\n\n      if (isActive) {\n        this.activeItems.push(toolbarItem);\n      }\n\n      const canExecute = command.canExecute(state);\n\n      if (canExecute) {\n        this.execulableItems.push(toolbarItem);\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.updateSubscription = this.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n\n}\n\nBubbleComponent.ɵfac = function BubbleComponent_Factory(t) {\n  return new (t || BubbleComponent)(i0.ɵɵdirectiveInject(SanitizeHtmlPipe), i0.ɵɵdirectiveInject(NgxEditorService));\n};\n\nBubbleComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: BubbleComponent,\n  selectors: [[\"ngx-bubble\"]],\n  inputs: {\n    editor: \"editor\"\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngFor\", \"ngForOf\"], [\"class\", \"NgxBubbleMenu__Icon\", 3, \"ngClass\", \"title\", \"mousedown\", 4, \"ngIf\"], [\"class\", \"NgxBubbleMenu__Seperator\", 4, \"ngIf\"], [1, \"NgxBubbleMenu__Icon\", 3, \"ngClass\", \"title\", \"mousedown\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 24 24\", \"height\", \"20\", \"width\", \"20\", 3, \"innerHTML\"], [1, \"NgxBubbleMenu__Seperator\"]],\n  template: function BubbleComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, BubbleComponent_ng_container_0_Template, 2, 1, \"ng-container\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngForOf\", ctx.toolbar);\n    }\n  },\n  directives: [i3.NgForOf, i3.NgIf, i3.NgClass],\n  styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{display:flex;background-color:#000;color:#fff;padding:5px;border-radius:4px}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]{height:30px;width:30px;transition:.3s ease-in-out;border-radius:2px;display:flex;align-items:center;justify-content:center}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#fff}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]:hover{background-color:#636262}.NgxBubbleMenu__Icon[_ngcontent-%COMP%] + .NgxBubbleMenu__Icon[_ngcontent-%COMP%]{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active[_ngcontent-%COMP%]{background-color:#fff}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#000}.NgxBubbleMenu__Seperator[_ngcontent-%COMP%]{border-left:1px solid white;margin:0 5px}\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(BubbleComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-bubble',\n      template: \"<ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last\\\">\\n  <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last\\\">\\n      <div class=\\\"NgxBubbleMenu__Icon\\\" [ngClass]=\\\"{'NgxBubbleMenu__Icon--Active': this.activeItems.includes(item),\\n  'NgxEditor--Disabled': !this.execulableItems.includes(item)}\\\" (mousedown)=\\\"onClick($event, item)\\\"\\n          *ngIf=\\\"toggleCommands.includes(item)\\\" [title]=\\\"getTitle(item)\\\">\\n          <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" height=\\\"20\\\" width=\\\"20\\\"\\n              [innerHTML]=\\\"getIcon(item)\\\"></svg>\\n      </div>\\n      <div class=\\\"NgxBubbleMenu__Seperator\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n  </ng-container>\\n</ng-container>\\n\",\n      styles: [\"*,*:before,*:after{box-sizing:border-box}:host{display:flex;background-color:#000;color:#fff;padding:5px;border-radius:4px}.NgxBubbleMenu__Icon{height:30px;width:30px;transition:.3s ease-in-out;border-radius:2px;display:flex;align-items:center;justify-content:center}.NgxBubbleMenu__Icon svg{fill:#fff}.NgxBubbleMenu__Icon:hover{background-color:#636262}.NgxBubbleMenu__Icon+.NgxBubbleMenu__Icon{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active{background-color:#fff}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active svg{fill:#000}.NgxBubbleMenu__Seperator{border-left:1px solid white;margin:0 5px}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: SanitizeHtmlPipe\n    }, {\n      type: NgxEditorService\n    }];\n  }, {\n    editor: [{\n      type: Input\n    }]\n  });\n})();\n\nclass FloatingMenuComponent {\n  constructor(el, sanitizeHTML) {\n    this.el = el;\n    this.sanitizeHTML = sanitizeHTML;\n    this.posLeft = 0;\n    this.posTop = 0;\n    this.showMenu = false;\n    this.dragging = false;\n    this.execulableItems = [];\n    this.activeItems = [];\n  }\n\n  get display() {\n    return {\n      visibility: this.showMenu ? 'visible' : 'hidden',\n      opacity: this.showMenu ? '1' : '0',\n      top: this.posTop + 'px',\n      left: this.posLeft + 'px'\n    };\n  }\n\n  get view() {\n    return this.editor.view;\n  }\n\n  onMouseDown(e) {\n    const target = e.target;\n\n    if (this.el.nativeElement.contains(target) && target.nodeName !== 'INPUT') {\n      e.preventDefault();\n      return;\n    }\n\n    this.dragging = true;\n  }\n\n  onKeyDown(e) {\n    const target = e.target;\n\n    if (target.nodeName === 'INPUT') {\n      return;\n    }\n\n    this.dragging = true;\n    this.hide();\n  }\n\n  onMouseUp(e) {\n    const target = e.target;\n\n    if (this.el.nativeElement.contains(target) || target.nodeName === 'INPUT') {\n      e.preventDefault();\n      return;\n    }\n\n    this.dragging = false;\n    this.useUpdate();\n  }\n\n  onKeyUp(e) {\n    const target = e.target;\n\n    if (target.nodeName === 'INPUT') {\n      return;\n    }\n\n    this.dragging = false;\n    this.useUpdate();\n  }\n\n  useUpdate() {\n    if (!this.view) {\n      return;\n    }\n\n    this.update(this.view);\n  }\n\n  getIcon(name) {\n    const icon = Icon.getPath(name);\n    return this.sanitizeHTML.transform(icon);\n  }\n\n  hide() {\n    this.showMenu = false;\n  }\n\n  show() {\n    this.showMenu = true;\n  }\n\n  calculateBubblePosition(view) {\n    const {\n      state: {\n        selection\n      }\n    } = view;\n    const {\n      from\n    } = selection; // the floating bubble itself\n\n    const bubbleEl = this.el.nativeElement;\n    const bubble = bubbleEl.getBoundingClientRect(); // The box in which the tooltip is positioned, to use as base\n\n    const box = bubbleEl.parentElement.getBoundingClientRect();\n    const start = view.coordsAtPos(from);\n    let left = start.left - box.left;\n    const overflowsRight = box.right < start.left + bubble.width || bubble.right > box.right;\n\n    if (overflowsRight) {\n      left = box.width - bubble.width;\n    }\n\n    if (left < 0) {\n      left = 0;\n    }\n\n    const bubbleHeight = bubble.height + parseInt(getComputedStyle(bubbleEl).marginBottom, 10);\n    const top = start.top - box.top - bubbleHeight;\n    return {\n      left,\n      top\n    };\n  }\n\n  update(view) {\n    const {\n      state\n    } = view;\n    const {\n      selection\n    } = state;\n    const {\n      empty\n    } = selection;\n\n    if (selection instanceof NodeSelection) {\n      if (selection.node.type.name === 'image') {\n        this.hide();\n        return;\n      }\n    }\n\n    const hasFocus = this.view.hasFocus();\n\n    if (!hasFocus || empty || this.dragging) {\n      this.hide();\n      return;\n    }\n\n    const {\n      top,\n      left\n    } = this.calculateBubblePosition(this.view);\n    this.posLeft = left;\n    this.posTop = top;\n    this.show();\n  }\n\n  ngOnInit() {\n    if (!this.editor) {\n      throw new Error('NgxEditor: Required editor instance');\n    }\n\n    this.updateSubscription = this.editor.update.subscribe(view => {\n      this.update(view);\n    });\n    this.resizeSubscription = fromEvent(window, 'resize').pipe(throttleTime(500, asyncScheduler, {\n      leading: true,\n      trailing: true\n    })).subscribe(() => {\n      this.useUpdate();\n    });\n  }\n\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n    this.resizeSubscription.unsubscribe();\n  }\n\n}\n\nFloatingMenuComponent.ɵfac = function FloatingMenuComponent_Factory(t) {\n  return new (t || FloatingMenuComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(SanitizeHtmlPipe));\n};\n\nFloatingMenuComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: FloatingMenuComponent,\n  selectors: [[\"ngx-editor-floating-menu\"]],\n  hostVars: 2,\n  hostBindings: function FloatingMenuComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function FloatingMenuComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onMouseDown($event);\n      }, false, i0.ɵɵresolveDocument)(\"keydown\", function FloatingMenuComponent_keydown_HostBindingHandler($event) {\n        return ctx.onKeyDown($event);\n      }, false, i0.ɵɵresolveDocument)(\"mouseup\", function FloatingMenuComponent_mouseup_HostBindingHandler($event) {\n        return ctx.onMouseUp($event);\n      }, false, i0.ɵɵresolveDocument)(\"keyup\", function FloatingMenuComponent_keyup_HostBindingHandler($event) {\n        return ctx.onKeyUp($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵstyleMap(ctx.display);\n    }\n  },\n  inputs: {\n    editor: \"editor\"\n  },\n  ngContentSelectors: _c3,\n  decls: 4,\n  vars: 1,\n  consts: [[\"ref\", \"\"], [4, \"ngIf\"], [3, \"editor\"]],\n  template: function FloatingMenuComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"div\", null, 0);\n      i0.ɵɵprojection(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, FloatingMenuComponent_ng_container_3_Template, 2, 1, \"ng-container\", 1);\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", _r0.children.length === 0);\n    }\n  },\n  directives: [i3.NgIf, BubbleComponent],\n  styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\"]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FloatingMenuComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-editor-floating-menu',\n      template: \"<div #ref>\\n  <ng-content></ng-content>\\n</div>\\n<ng-container *ngIf=\\\"ref.children.length === 0\\\">\\n  <ngx-bubble [editor]=\\\"editor\\\"></ngx-bubble>\\n</ng-container>\\n\",\n      styles: [\"*,*:before,*:after{box-sizing:border-box}:host{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: SanitizeHtmlPipe\n    }];\n  }, {\n    display: [{\n      type: HostBinding,\n      args: ['style']\n    }],\n    editor: [{\n      type: Input\n    }],\n    onMouseDown: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }],\n    onKeyDown: [{\n      type: HostListener,\n      args: ['document:keydown', ['$event']]\n    }],\n    onMouseUp: [{\n      type: HostListener,\n      args: ['document:mouseup', ['$event']]\n    }],\n    onKeyUp: [{\n      type: HostListener,\n      args: ['document:keyup', ['$event']]\n    }]\n  });\n})();\n\nclass MenuModule {}\n\nMenuModule.ɵfac = function MenuModule_Factory(t) {\n  return new (t || MenuModule)();\n};\n\nMenuModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: MenuModule\n});\nMenuModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [SanitizeHtmlPipe],\n  imports: [[CommonModule, ReactiveFormsModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MenuModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, ReactiveFormsModule],\n      declarations: [// pipes\n      SanitizeHtmlPipe, // components\n      MenuComponent, ToggleCommandComponent, LinkComponent, DropdownComponent, ImageComponent, ColorPickerComponent, FloatingMenuComponent, BubbleComponent],\n      providers: [SanitizeHtmlPipe],\n      exports: [MenuComponent, FloatingMenuComponent]\n    }]\n  }], null, null);\n})();\n\nconst NGX_EDITOR_CONFIG_TOKEN = new InjectionToken('NgxEditorConfig');\n\nclass NgxEditorModule {\n  static forRoot(config) {\n    return {\n      ngModule: NgxEditorModule,\n      providers: [{\n        provide: NGX_EDITOR_CONFIG_TOKEN,\n        useValue: config\n      }, {\n        provide: NgxEditorServiceConfig,\n        useFactory: provideMyServiceOptions,\n        deps: [NGX_EDITOR_CONFIG_TOKEN]\n      }]\n    };\n  }\n\n  static forChild(config) {\n    return {\n      ngModule: NgxEditorModule,\n      providers: [{\n        provide: NGX_EDITOR_CONFIG_TOKEN,\n        useValue: config\n      }, {\n        provide: NgxEditorServiceConfig,\n        useFactory: provideMyServiceOptions,\n        deps: [NGX_EDITOR_CONFIG_TOKEN]\n      }, NgxEditorService]\n    };\n  }\n\n}\n\nNgxEditorModule.ɵfac = function NgxEditorModule_Factory(t) {\n  return new (t || NgxEditorModule)();\n};\n\nNgxEditorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NgxEditorModule\n});\nNgxEditorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [],\n  imports: [[CommonModule, MenuModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, MenuModule],\n      providers: [],\n      declarations: [NgxEditorComponent, ImageViewComponent],\n      exports: [NgxEditorComponent, MenuComponent, FloatingMenuComponent]\n    }]\n  }], null, null);\n})();\n\nconst isEmptyInputValue = value => {\n  // we don't check for string here so it also works with arrays\n  return value === null || value.length === 0;\n};\n\nconst hasValidLength = value => {\n  // non-strict comparison is intentional, to check for both `null` and `undefined` values\n  return value != null && typeof value.length === 'number';\n};\n\nconst isDocEmpty = doc => {\n  if (!doc) {\n    return true;\n  }\n\n  const {\n    childCount,\n    firstChild\n  } = doc;\n  return Boolean(childCount === 1 && (firstChild === null || firstChild === void 0 ? void 0 : firstChild.isTextblock) && firstChild.content.size === 0);\n}; // @dynamic\n\n\nclass Validators {\n  static required(userSchema) {\n    return control => {\n      const schema$1 = userSchema || schema;\n      const doc = parseContent(control.value, schema$1);\n      const isEmpty = isDocEmpty(doc);\n\n      if (!isEmpty) {\n        return null;\n      }\n\n      return {\n        required: true\n      };\n    };\n  }\n\n  static maxLength(maxLength, userSchema) {\n    return control => {\n      const schema$1 = userSchema || schema;\n      const doc = parseContent(control.value, schema$1);\n      const value = doc.textContent;\n\n      if (hasValidLength(value) && value.length > maxLength) {\n        return {\n          maxlength: {\n            requiredLength: maxLength,\n            actualLength: value.length\n          }\n        };\n      }\n\n      return null;\n    };\n  }\n\n  static minLength(minLength, userSchema) {\n    return control => {\n      const schema$1 = userSchema || schema;\n      const doc = parseContent(control.value, schema$1);\n      const value = doc.textContent;\n\n      if (isEmptyInputValue(value) || !hasValidLength(value)) {\n        // don't validate empty values to allow optional controls\n        // don't validate values without `length` property\n        return null;\n      }\n\n      if (value.length < minLength) {\n        return {\n          minlength: {\n            requiredLength: minLength,\n            actualLength: value.length\n          }\n        };\n      }\n\n      return null;\n    };\n  }\n\n}\n\nconst execMark = (name, toggle = false) => {\n  return (state, dispatch) => {\n    const command = new Mark(name);\n\n    if (!toggle) {\n      return command.apply()(state, dispatch);\n    }\n\n    return command.toggle()(state, dispatch);\n  };\n};\n\nclass EditorCommands {\n  constructor(view) {\n    this.applyTrx = tr => {\n      this.state = this.state.apply(tr !== null && tr !== void 0 ? tr : this.tr);\n      this.tr = this.state.tr;\n      this.tr.setMeta('APPLIED_TRX', true);\n    };\n\n    this.dispatch = tr => {\n      this.applyTrx(tr);\n    };\n\n    if (!view) {\n      throw Error('NgxEditor: Required view to initialize commands.');\n    }\n\n    this.view = view;\n    this.state = view.state;\n    this.tr = this.view.state.tr;\n  }\n\n  exec() {\n    // No changes applied\n    if (!this.tr.getMeta('APPLIED_TRX')) {\n      return false;\n    }\n\n    const forceEmit = !this.view.state.doc.eq(this.state.doc);\n    this.view.updateState(this.state);\n    const tr = this.tr.setMeta('FORCE_EMIT', forceEmit);\n    this.view.dispatch(tr);\n    return true;\n  }\n\n  focus() {\n    this.view.focus();\n    return this;\n  }\n\n  scrollIntoView() {\n    this.tr.scrollIntoView();\n    this.applyTrx();\n    return this;\n  }\n\n  insertText(text) {\n    this.tr.insertText(text);\n    this.applyTrx();\n    return this;\n  }\n\n  insertNewLine() {\n    const newLineCommands = [newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock];\n    chainCommands(...newLineCommands)(this.state, this.dispatch);\n    return this;\n  }\n\n  applyMark(name) {\n    execMark(name, false)(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleMark(name) {\n    execMark(name, true)(this.state, this.dispatch);\n    return this;\n  }\n\n  bold() {\n    execMark('strong')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleBold() {\n    execMark('strong', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  italics() {\n    execMark('em')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleItalics() {\n    execMark('em', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  underline() {\n    execMark('u')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleUnderline() {\n    execMark('u', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  strike() {\n    execMark('s')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleStrike() {\n    execMark('s', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  code() {\n    execMark('code')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleCode() {\n    execMark('code', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleOrderedList() {\n    const command = new ListItem(false);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleBulletList() {\n    const command = new ListItem(true);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleHeading(level) {\n    const command = new Heading(level);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  insertLink(text, attrs) {\n    const command = new Link$1();\n    command.insert(text, attrs)(this.state, this.dispatch);\n    return this;\n  }\n\n  updateLink(attrs) {\n    const command = new Link$1();\n    command.update(attrs)(this.state, this.dispatch);\n    return this;\n  }\n\n  insertImage(src, attrs = {}) {\n    const command = new Image$1();\n    command.insert(src, attrs)(this.state, this.dispatch);\n    return this;\n  }\n\n  textColor(color) {\n    const command = new TextColor$1('text_color');\n    command.apply({\n      color\n    })(this.state, this.dispatch);\n    return this;\n  }\n\n  backgroundColor(color) {\n    const command = new TextColor$1('text_background_color');\n    command.apply({\n      backgroundColor: color\n    })(this.state, this.dispatch);\n    return this;\n  }\n\n  removeTextColor() {\n    const command = new TextColor$1('text_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n\n  removeBackgroundColor() {\n    const command = new TextColor$1('text_background_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n\n  align(p) {\n    const command = new TextAlign(p);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  insertHTML(html) {\n    const {\n      selection,\n      schema,\n      tr\n    } = this.state;\n    const {\n      from,\n      to\n    } = selection;\n    const element = document.createElement('div');\n    element.innerHTML = html.trim();\n    const slice = DOMParser.fromSchema(schema).parseSlice(element);\n    const transaction = tr.replaceRange(from, to, slice);\n    this.applyTrx(transaction);\n    return this;\n  }\n\n}\n\nconst isMacOs = typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false; // Input rules ref: https://github.com/ProseMirror/prosemirror-example-setup/\n// : (NodeType) → InputRule\n// Given a blockquote node type, returns an input rule that turns `\"> \"`\n// at the start of a textblock into a blockquote.\n\nconst blockQuoteRule = nodeType => {\n  return wrappingInputRule(/^\\s*>\\s$/, nodeType);\n}; // : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a number\n// followed by a dot at the start of a textblock into an ordered list.\n\n\nconst orderedListRule = nodeType => {\n  return wrappingInputRule(/^(\\d+)\\.\\s$/, nodeType, match => ({\n    order: +match[1]\n  }), (match, node) => node.childCount + node.attrs['order'] === +match[1]);\n}; // : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a bullet\n// (dash, plush, or asterisk) at the start of a textblock into a\n// bullet list.\n\n\nconst bulletListRule = nodeType => {\n  return wrappingInputRule(/^\\s*([-+*])\\s$/, nodeType);\n}; // : (NodeType) → InputRule\n// Given a code block node type, returns an input rule that turns a\n// textblock starting with three backticks into a code block.\n\n\nconst codeBlockRule = nodeType => {\n  return textblockTypeInputRule(/^```$/, nodeType);\n}; // : (NodeType, number) → InputRule\n// Given a node type and a maximum level, creates an input rule that\n// turns up to that number of `#` characters followed by a space at\n// the start of a textblock into a heading whose level corresponds to\n// the number of `#` signs.\n\n\nconst headingRule = (nodeType, maxLevel) => {\n  return textblockTypeInputRule(new RegExp('^(#{1,' + maxLevel + '})\\\\s$'), nodeType, match => ({\n    level: match[1].length\n  }));\n}; // : (MarkType) → InputRule\n// Wraps matching text with bold mark\n\n\nconst boldRule = markType => {\n  return markInputRule(/(?:^|\\s)((?:\\*\\*|__)((?:[^*_]+))(?:\\*\\*|__))$/, markType);\n}; // : (MarkType) → InputRule\n// Wraps matching text with em mark\n\n\nconst emRule = markType => {\n  return markInputRule(/(?:^|\\s)((?:\\*|_)((?:[^*_]+))(?:\\*|_))$/, markType);\n}; // : (Schema) → Plugin\n// A set of input rules for creating the basic block quotes, lists,\n// code blocks, and heading.\n\n\nconst buildInputRules = schema => {\n  const rules = smartQuotes.concat(ellipsis, emDash);\n  rules.push(boldRule(schema.marks['strong']));\n  rules.push(emRule(schema.marks['em']));\n  rules.push(blockQuoteRule(schema.nodes['blockquote']));\n  rules.push(orderedListRule(schema.nodes['ordered_list']));\n  rules.push(bulletListRule(schema.nodes['bullet_list']));\n  rules.push(codeBlockRule(schema.nodes['code_block']));\n  rules.push(headingRule(schema.nodes['heading'], 6));\n  return inputRules({\n    rules\n  });\n};\n\nconst getKeyboardShortcuts = (schema, options) => {\n  const historyKeyMap = {};\n  historyKeyMap['Mod-z'] = undo;\n\n  if (isMacOs) {\n    historyKeyMap['Shift-Mod-z'] = redo;\n  } else {\n    historyKeyMap['Mod-y'] = redo;\n  }\n\n  const plugins = [keymap({\n    'Mod-b': toggleMark(schema.marks['strong']),\n    'Mod-i': toggleMark(schema.marks['em']),\n    'Mod-u': toggleMark(schema.marks['u']),\n    'Mod-`': toggleMark(schema.marks['code'])\n  }), keymap({\n    Enter: splitListItem(schema.nodes['list_item']),\n    'Shift-Enter': chainCommands(exitCode, (state, dispatch) => {\n      const tr = state.tr;\n      const br = schema.nodes['hard_break'];\n      dispatch(tr.replaceSelectionWith(br.create()).scrollIntoView());\n      return true;\n    }),\n    'Mod-[': liftListItem(schema.nodes['list_item']),\n    'Mod-]': sinkListItem(schema.nodes['list_item']),\n    Tab: sinkListItem(schema.nodes['list_item'])\n  }), keymap(baseKeymap)];\n\n  if (options.history) {\n    plugins.push(keymap(historyKeyMap));\n  }\n\n  return plugins;\n};\n\nconst getDefaultPlugins = (schema, options) => {\n  const plugins = [];\n\n  if (options.keyboardShortcuts) {\n    plugins.push(...getKeyboardShortcuts(schema, {\n      history: options.history\n    }));\n  }\n\n  if (options.history) {\n    plugins.push(history());\n  }\n\n  if (options.inputRules) {\n    plugins.push(buildInputRules(schema));\n  }\n\n  return plugins;\n};\n\nconst defaultFeatures = {\n  linkOnPaste: true,\n  resizeImage: true\n};\nconst DEFAULT_OPTIONS = {\n  content: null,\n  history: true,\n  keyboardShortcuts: true,\n  inputRules: true,\n  schema: schema,\n  plugins: [],\n  nodeViews: {},\n  attributes: {},\n  features: defaultFeatures\n};\n\nclass Editor {\n  constructor(options = DEFAULT_OPTIONS) {\n    this.valueChangesSubject = new Subject();\n    this.updateSubject = new Subject();\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.createEditor();\n  }\n\n  get valueChanges() {\n    return this.valueChangesSubject.asObservable();\n  }\n\n  get update() {\n    return this.updateSubject.asObservable();\n  }\n\n  get schema() {\n    return this.options.schema || schema;\n  }\n\n  get commands() {\n    return new EditorCommands(this.view);\n  }\n\n  get features() {\n    return Object.assign(Object.assign({}, defaultFeatures), this.options.features);\n  }\n\n  handleTransactions(tr) {\n    const state = this.view.state.apply(tr);\n    this.view.updateState(state);\n    this.updateSubject.next(this.view);\n\n    if (!tr.docChanged && !tr.getMeta('FORCE_EMIT')) {\n      return;\n    }\n\n    const json = state.doc.toJSON();\n    this.valueChangesSubject.next(json);\n  }\n\n  createEditor() {\n    var _a, _b;\n\n    const {\n      options\n    } = this;\n    const {\n      content = null,\n      nodeViews\n    } = options;\n    const {\n      history = true,\n      keyboardShortcuts = true,\n      inputRules = true\n    } = options;\n    const schema = this.schema;\n    const doc = parseContent(content, schema);\n    const plugins = (_a = options.plugins) !== null && _a !== void 0 ? _a : [];\n    const attributes = (_b = options.attributes) !== null && _b !== void 0 ? _b : {};\n    const defaultPlugins = getDefaultPlugins(schema, {\n      history,\n      keyboardShortcuts,\n      inputRules\n    });\n    this.view = new EditorView(null, {\n      state: EditorState.create({\n        doc,\n        schema,\n        plugins: [...defaultPlugins, ...plugins]\n      }),\n      nodeViews,\n      dispatchTransaction: this.handleTransactions.bind(this),\n      attributes\n    });\n  }\n\n  setContent(content) {\n    if (isNil(content)) {\n      return;\n    }\n\n    const {\n      state\n    } = this.view;\n    const {\n      tr,\n      doc\n    } = state;\n    const newDoc = parseContent(content, this.schema);\n    tr.replaceWith(0, state.doc.content.size, newDoc); // don't emit if both content is same\n\n    if (doc.eq(tr.doc)) {\n      return;\n    }\n\n    if (!tr.docChanged) {\n      return;\n    }\n\n    this.view.dispatch(tr);\n  }\n\n  registerPlugin(plugin) {\n    const {\n      state\n    } = this.view;\n    const plugins = [...state.plugins, plugin];\n    const newState = state.reconfigure({\n      plugins\n    });\n    this.view.updateState(newState);\n  }\n\n  destroy() {\n    this.view.destroy();\n  }\n\n}\n/*\n * Public API Surface of ngx-editor\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { DEFAULT_TOOLBAR, Editor, FloatingMenuComponent, MenuComponent, NgxEditorComponent, NgxEditorModule, TOOLBAR_MINIMAL, Validators, emptyDoc, parseContent, toDoc, toHTML };","map":{"version":3,"sources":["/home/harawat/Downloads/Projects/freelancer/resources/frontend/angular/node_modules/ngx-editor/fesm2015/ngx-editor.mjs"],"names":["i0","EventEmitter","Component","Input","Output","ViewChild","ComponentFactoryResolver","ApplicationRef","forwardRef","ViewEncapsulation","Injectable","Optional","Pipe","HostBinding","HostListener","NgModule","InjectionToken","i4","NG_VALUE_ACCESSOR","FormGroup","FormControl","Validators","Validators$1","ReactiveFormsModule","Plugin","PluginKey","NodeSelection","EditorState","DecorationSet","Decoration","EditorView","i3","CommonModule","Fragment","Slice","DOMSerializer","DOMParser","schema","marks","nodes","Subject","fromEvent","asyncScheduler","toggleMark","lift","wrapIn","setBlockType","newlineInCode","createParagraphNear","liftEmptyBlock","splitBlock","chainCommands","exitCode","baseKeymap","applyMark","removeLink","removeMark","isMarkActive","isNodeActive","getSelectionNodes","getSelectionMarks","markInputRule","liftListItem","wrapInList","splitListItem","sinkListItem","i1","throttleTime","isNil","keymap","undo","redo","history","wrappingInputRule","textblockTypeInputRule","smartQuotes","ellipsis","emDash","inputRules","editablePlugin","editable","key","state","init","apply","tr","previousVal","_a","getMeta","props","getState","attributes","isEnabled","class","PLACEHOLDER_CLASSNAME","placeholderPlugin","text","placeholder","decorations","doc","textContent","childCount","empty","decorate","node","pos","type","isBlock","length","placeholderNode","nodeSize","attrs","push","descendants","create","attributesPlugin","focusPlugin","cb","handleDOMEvents","focus","blurPlugin","blur","ImageViewComponent","constructor","alt","title","outerWidth","selected","imageResize","startResizing","e","direction","preventDefault","resizeImage","evt","startX","pageX","startWidth","imgEl","nativeElement","clientWidth","isLeftResize","width","window","getComputedStyle","view","dom","editorWidth","parseInt","onMouseMove","currentX","diffInPx","computedWidth","onMouseUp","document","removeEventListener","emit","addEventListener","ɵfac","ɵcmp","NgClass","NgIf","args","selector","template","styles","src","static","ImageRezieView","getPos","injector","updating","handleResize","dispatch","transaction","setNodeMarkup","undefined","imageComponentRef","instance","resolvedPos","resolve","newSelection","setSelection","createElement","componentFactoryResolver","get","applicationRef","factory","resolveComponentFactory","attachView","hostView","setNodeAttributes","resizeSubscription","subscribe","computeChanges","prevAttrs","newAttrs","JSON","stringify","update","changed","ignoreMutation","selectNode","deselectNode","destroy","unsubscribe","detachView","imageResizePlugin","nodeViews","image","HTTP_LINK_REGEX","linkify","fragment","linkified","forEach","child","isText","match","exec","start","index","end","link","cut","urlText","slice","mark","href","addToSet","copy","content","fromArray","linkifyPlugin","transformPasted","openStart","openEnd","emptyDoc","toHTML","json","inputSchema","schema$1","contentNode","nodeFromJSON","html","fromSchema","serializeFragment","div","appendChild","innerHTML","toDoc","el","parse","toJSON","parseContent","value","docJson","NgxEditorComponent","_renderer","_injector","_elementRef","focusOut","focusIn","subscriptions","onChange","onTouched","writeValue","outputFormat","editor","setContent","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","setMeta","setProperty","handleChange","jsonDoc","setPlaceholder","registerPlugins","registerPlugin","features","linkOnPaste","ngOnInit","Error","ngxEditor","contentChangeSubscription","valueChanges","ngOnChanges","changes","isFirstChange","currentValue","ngOnDestroy","subscription","Renderer2","Injector","ElementRef","provide","useExisting","multi","providers","encapsulation","None","MenuService","customMenuRefChange","setCustomMenuRef","c","next","ɵprov","providedIn","bold","italic","code","underline","strike","orderedList","bulletList","quote","unlink","alignLeft","alignCenter","alignRight","alignJustify","textColor","colorFill","DEFAULT_ICON_HEIGHT","DEFAULT_ICON_WIDTH","icons","ordered_list","bullet_list","blockquote","align_left","align_center","align_right","align_justify","text_color","color_fill","Icon","name","fill","path","getPath","Mark","toggle","isActive","canExecute","Blockqote","ListItem","isBulletList","getType","list_item","Heading","level","heading","selection","nodePos","$from","before","nodeAt","paragraph","Object","assign","nodesInSelection","supportedNodes","filter","includes","acitveNode","find","Boolean","TextAlign","align","from","to","applicable","nodesBetween","nodeType","docChanged","active","defaultOptions","strict","Link$1","insert","_b","linkAttrs","target","replaceSelectionWith","scrollIntoView","options","remove","testAttrs","Image$1","imageAttrs","createAndFill","anchor","$anchor","nodeBefore","TextColor$1","isAtom","isLeaf","getActiveColors","colors","map","color","backgroundColor","STRONG","EM","CODE","UNDERLINE","STRIKE","BLOCKQUOTE","UL","OL","H1","H2","H3","H4","H5","H6","ALIGN_LEFT","ALIGN_CENTER","ALIGN_RIGHT","ALIGN_JUSTIFY","LINK","IMAGE","TEXT_COLOR","TEXT_BACKGROUND_COLOR","ToggleCommands","h1","h2","h3","h4","h5","h6","Link","Image","TextColor","TextBackgroundColor","defaults","background_color","insertLink","insertImage","url","openInNewTab","altText","Locals","newLocals","locals","NgxEditorServiceConfig","NgxEditorService","config","decorators","provideMyServiceOptions","SanitizeHtmlPipe","sanitizer","transform","bypassSecurityTrustHtml","DomSanitizer","ɵpipe","ToggleCommandComponent","ngxeService","menuService","disabled","command","toolbarItem","button","editorView","getTitle","updateSubscription","LinkComponent","showPopup","form","required","pattern","setText","selectedText","textBetween","patchValue","disable","valid","icon","onDocumentClick","contains","hideForm","getLabel","reset","enable","onMouseDown","getRawValue","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","CheckboxControlValueAccessor","ImageComponent","fillForm","setValue","DropdownComponent","isDropdownOpen","activeItems","disabledItems","items","item","activeItem","isSelected","isDropdownDisabled","getName","toggleDropdown","onClick","NgForOf","group","ColorPickerComponent","activeColors","getContrastYIQ","hexcolor","replace","r","substr","g","b","yiq","hidePopup","togglePopup","onColorSelect","hasFocus","NgStyle","presets","DEFAULT_TOOLBAR","TOOLBAR_MINIMAL","DEFAULT_COLOR_PRESETS","MenuComponent","toolbar","colorPresets","customMenuRef","dropdownPlacement","toggleCommands","iconContainerClass","dropdownContainerClass","seperatorClass","col","row","Math","floor","isDropDown","getDropdownItems","NgTemplateOutlet","KeyValuePipe","BubbleComponent","sanitizeHTML","execulableItems","getIcon","commandName","stopPropagation","FloatingMenuComponent","posLeft","posTop","showMenu","dragging","display","visibility","opacity","top","left","nodeName","onKeyDown","hide","useUpdate","onKeyUp","show","calculateBubblePosition","bubbleEl","bubble","getBoundingClientRect","box","parentElement","coordsAtPos","overflowsRight","right","bubbleHeight","height","marginBottom","pipe","leading","trailing","MenuModule","ɵmod","ɵinj","imports","declarations","exports","NGX_EDITOR_CONFIG_TOKEN","NgxEditorModule","forRoot","ngModule","useValue","useFactory","deps","forChild","isEmptyInputValue","hasValidLength","isDocEmpty","firstChild","isTextblock","size","userSchema","control","isEmpty","maxLength","maxlength","requiredLength","actualLength","minLength","minlength","execMark","EditorCommands","applyTrx","forceEmit","eq","updateState","insertText","insertNewLine","newLineCommands","toggleBold","italics","toggleItalics","toggleUnderline","toggleStrike","toggleCode","toggleOrderedList","toggleBulletList","toggleHeading","updateLink","removeTextColor","removeBackgroundColor","p","insertHTML","element","trim","parseSlice","replaceRange","isMacOs","navigator","test","platform","blockQuoteRule","orderedListRule","order","bulletListRule","codeBlockRule","headingRule","maxLevel","RegExp","boldRule","markType","emRule","buildInputRules","rules","concat","getKeyboardShortcuts","historyKeyMap","plugins","Enter","br","Tab","getDefaultPlugins","keyboardShortcuts","defaultFeatures","DEFAULT_OPTIONS","Editor","valueChangesSubject","updateSubject","createEditor","asObservable","commands","handleTransactions","defaultPlugins","dispatchTransaction","bind","newDoc","replaceWith","plugin","newState","reconfigure"],"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,eAApB;AACA,SAASC,YAAT,EAAuBC,SAAvB,EAAkCC,KAAlC,EAAyCC,MAAzC,EAAiDC,SAAjD,EAA4DC,wBAA5D,EAAsFC,cAAtF,EAAsGC,UAAtG,EAAkHC,iBAAlH,EAAqIC,UAArI,EAAiJC,QAAjJ,EAA2JC,IAA3J,EAAiKC,WAAjK,EAA8KC,YAA9K,EAA4LC,QAA5L,EAAsMC,cAAtM,QAA4N,eAA5N;AACA,OAAO,KAAKC,EAAZ,MAAoB,gBAApB;AACA,SAASC,iBAAT,EAA4BC,SAA5B,EAAuCC,WAAvC,EAAoDC,UAAU,IAAIC,YAAlE,EAAgFC,mBAAhF,QAA2G,gBAA3G;AACA,SAASC,MAAT,EAAiBC,SAAjB,EAA4BC,aAA5B,EAA2CC,WAA3C,QAA8D,mBAA9D;AACA,SAASC,aAAT,EAAwBC,UAAxB,EAAoCC,UAApC,QAAsD,kBAAtD;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,QAAT,EAAmBC,KAAnB,EAA0BC,aAA1B,EAAyCC,SAAzC,QAA0D,mBAA1D;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,KAAT,EAAgBC,KAAhB,EAAuBF,MAAvB,QAAqC,mBAArC;AACA,SAASG,OAAT,EAAkBC,SAAlB,EAA6BC,cAA7B,QAAmD,MAAnD;AACA,SAASC,UAAT,EAAqBC,IAArB,EAA2BC,MAA3B,EAAmCC,YAAnC,EAAiDC,aAAjD,EAAgEC,mBAAhE,EAAqFC,cAArF,EAAqGC,UAArG,EAAiHC,aAAjH,EAAgIC,QAAhI,EAA0IC,UAA1I,QAA4J,sBAA5J;AACA,SAASC,SAAT,EAAoBC,UAApB,EAAgCC,UAAhC,QAAkD,qBAAlD;AACA,SAASC,YAAT,EAAuBC,YAAvB,EAAqCC,iBAArC,EAAwDC,iBAAxD,EAA2EC,aAA3E,QAAgG,oBAAhG;AACA,SAASC,YAAT,EAAuBC,UAAvB,EAAmCC,aAAnC,EAAkDC,YAAlD,QAAsE,yBAAtE;AACA,OAAO,KAAKC,EAAZ,MAAoB,2BAApB;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,SAASC,IAAT,EAAeC,IAAf,EAAqBC,OAArB,QAAoC,qBAApC;AACA,SAASC,iBAAT,EAA4BC,sBAA5B,EAAoDC,WAApD,EAAiEC,QAAjE,EAA2EC,MAA3E,EAAmFC,UAAnF,QAAqG,wBAArG;;;;;gBAqJqG9E,E;;AAAAA,IAAAA,EACgd,6B;AADhdA,IAAAA,EACihB,6B;AADjhBA,IAAAA,EAC8jB;AAD9jBA,MAAAA,EAC8jB;AAAA,qBAD9jBA,EAC8jB;AAAA,0CAAoC,MAApC;AAAA,M;AAD9jBA,IAAAA,EAC4mB,e;AAD5mBA,IAAAA,EACynB,6B;AADznBA,IAAAA,EACqqB;AADrqBA,MAAAA,EACqqB;AAAA,qBADrqBA,EACqqB;AAAA,0CAAoC,OAApC;AAAA,M;AADrqBA,IAAAA,EACotB,e;AADptBA,IAAAA,EACiuB,6B;AADjuBA,IAAAA,EAC6wB;AAD7wBA,MAAAA,EAC6wB;AAAA,qBAD7wBA,EAC6wB;AAAA,0CAAoC,MAApC;AAAA,M;AAD7wBA,IAAAA,EAC2zB,e;AAD3zBA,IAAAA,EACw0B,6B;AADx0BA,IAAAA,EACo3B;AADp3BA,MAAAA,EACo3B;AAAA,qBADp3BA,EACo3B;AAAA,0CAAoC,OAApC;AAAA,M;AADp3BA,IAAAA,EACm6B,e;AADn6BA,IAAAA,EAC86B,e;;;;;;;;;;;;;;;AAD96BA,IAAAA,EAikCg1B,6B;AAjkCh1BA,IAAAA,EAikCi8B,U;AAjkCj8BA,IAAAA,EAikCsgC,e;;;;mBAjkCtgCA,E;AAAAA,IAAAA,EAikCi8B,a;AAjkCj8BA,IAAAA,EAikCi8B,+H;;;;;;AAjkCj8BA,IAAAA,EAikC8yC,6B;AAjkC9yCA,IAAAA,EAikC+5C,U;AAjkC/5CA,IAAAA,EAikC89C,e;;;;mBAjkC99CA,E;AAAAA,IAAAA,EAikC+5C,a;AAjkC/5CA,IAAAA,EAikC+5C,yH;;;;;;gBAjkC/5CA,E;;AAAAA,IAAAA,EAikC6Z,4B;AAjkC7ZA,IAAAA,EAikCqd,6B;AAjkCrdA,IAAAA,EAikCihB;AAjkCjhBA,MAAAA,EAikCihB;AAAA,qBAjkCjhBA,EAikCihB;AAAA;AAAA,M;AAjkCjhBA,IAAAA,EAikC2jB,4B;AAjkC3jBA,IAAAA,EAikC8mB,4B;AAjkC9mBA,IAAAA,EAikC6pB,8B;AAjkC7pBA,IAAAA,EAikCssB,U;AAjkCtsBA,IAAAA,EAikCytB,e;AAjkCztBA,IAAAA,EAikC2uB,yB;AAjkC3uBA,IAAAA,EAikCg1B,kE;AAjkCh1BA,IAAAA,EAikCohC,e;AAjkCphCA,IAAAA,EAikCgiC,e;AAjkChiCA,IAAAA,EAikC8iC,4B;AAjkC9iCA,IAAAA,EAikCimC,4B;AAjkCjmCA,IAAAA,EAikCgpC,+B;AAjkChpCA,IAAAA,EAikCyrC,W;AAjkCzrCA,IAAAA,EAikC6sC,e;AAjkC7sCA,IAAAA,EAikC+tC,0B;AAjkC/tCA,IAAAA,EAikC8yC,oE;AAjkC9yCA,IAAAA,EAikC4+C,e;AAjkC5+CA,IAAAA,EAikCw/C,e;AAjkCx/CA,IAAAA,EAikCsgD,6B;AAjkCtgDA,IAAAA,EAikCyjD,6B;AAjkCzjDA,IAAAA,EAikCwmD,4B;AAjkCxmDA,IAAAA,EAikC2nD,2B;AAjkC3nDA,IAAAA,EAikCmsD,W;AAjkCnsDA,IAAAA,EAikCyuD,e;AAjkCzuDA,IAAAA,EAikCyvD,e;AAjkCzvDA,IAAAA,EAikCqwD,e;AAjkCrwDA,IAAAA,EAikCmxD,iC;AAjkCnxDA,IAAAA,EAikCs0D,W;AAjkCt0DA,IAAAA,EAikC41D,e;AAjkC51DA,IAAAA,EAikC22D,e;AAjkC32DA,IAAAA,EAikCo3D,e;;;;mBAjkCp3DA,E;AAAAA,IAAAA,EAikC4f,a;AAjkC5fA,IAAAA,EAikC4f,qC;AAjkC5fA,IAAAA,EAikCssB,a;AAjkCtsBA,IAAAA,EAikCssB,0C;AAjkCtsBA,IAAAA,EAikCs1B,a;AAjkCt1BA,IAAAA,EAikCs1B,+D;AAjkCt1BA,IAAAA,EAikCyrC,a;AAjkCzrCA,IAAAA,EAikCyrC,2C;AAjkCzrCA,IAAAA,EAikCozC,a;AAjkCpzCA,IAAAA,EAikCozC,+D;AAjkCpzCA,IAAAA,EAikCmsD,a;AAjkCnsDA,IAAAA,EAikCmsD,8D;AAjkCnsDA,IAAAA,EAikC2yD,a;AAjkC3yDA,IAAAA,EAikC2yD,2C;AAjkC3yDA,IAAAA,EAikCs0D,a;AAjkCt0DA,IAAAA,EAikCs0D,6C;;;;;;AAjkCt0DA,IAAAA,EAyqCszB,6B;AAzqCtzBA,IAAAA,EAyqCq6B,U;AAzqCr6BA,IAAAA,EAyqCy+B,e;;;;mBAzqCz+BA,E;AAAAA,IAAAA,EAyqCq6B,a;AAzqCr6BA,IAAAA,EAyqCq6B,6H;;;;;;gBAzqCr6BA,E;;AAAAA,IAAAA,EAyqCoY,4B;AAzqCpYA,IAAAA,EAyqC4b,6B;AAzqC5bA,IAAAA,EAyqCwf;AAzqCxfA,MAAAA,EAyqCwf;AAAA,qBAzqCxfA,EAyqCwf;AAAA;AAAA,M;AAzqCxfA,IAAAA,EAyqCkiB,4B;AAzqCliBA,IAAAA,EAyqCqlB,4B;AAzqCrlBA,IAAAA,EAyqCooB,8B;AAzqCpoBA,IAAAA,EAyqC6qB,U;AAzqC7qBA,IAAAA,EAyqCgsB,e;AAzqChsBA,IAAAA,EAyqCktB,yB;AAzqCltBA,IAAAA,EAyqCszB,mE;AAzqCtzBA,IAAAA,EAyqCu/B,e;AAzqCv/BA,IAAAA,EAyqCmgC,e;AAzqCngCA,IAAAA,EAyqCihC,4B;AAzqCjhCA,IAAAA,EAyqCokC,4B;AAzqCpkCA,IAAAA,EAyqCmnC,+B;AAzqCnnCA,IAAAA,EAyqC4pC,W;AAzqC5pCA,IAAAA,EAyqCmrC,e;AAzqCnrCA,IAAAA,EAyqCqsC,0B;AAzqCrsCA,IAAAA,EAyqCixC,e;AAzqCjxCA,IAAAA,EAyqC6xC,e;AAzqC7xCA,IAAAA,EAyqC2yC,6B;AAzqC3yCA,IAAAA,EAyqC81C,6B;AAzqC91CA,IAAAA,EAyqC64C,+B;AAzqC74CA,IAAAA,EAyqCs7C,W;AAzqCt7CA,IAAAA,EAyqC28C,e;AAzqC38CA,IAAAA,EAyqC69C,2B;AAzqC79CA,IAAAA,EAyqC2iD,e;AAzqC3iDA,IAAAA,EAyqCujD,e;AAzqCvjDA,IAAAA,EAyqCqkD,iC;AAzqCrkDA,IAAAA,EAyqCuoD,W;AAzqCvoDA,IAAAA,EAyqC6pD,e;AAzqC7pDA,IAAAA,EAyqC4qD,e;AAzqC5qDA,IAAAA,EAyqCqrD,e;;;;mBAzqCrrDA,E;AAAAA,IAAAA,EAyqCme,a;AAzqCneA,IAAAA,EAyqCme,qC;AAzqCneA,IAAAA,EAyqC6qB,a;AAzqC7qBA,IAAAA,EAyqC6qB,0C;AAzqC7qBA,IAAAA,EAyqC4zB,a;AAzqC5zBA,IAAAA,EAyqC4zB,6D;AAzqC5zBA,IAAAA,EAyqC4pC,a;AAzqC5pCA,IAAAA,EAyqC4pC,8C;AAzqC5pCA,IAAAA,EAyqCs7C,a;AAzqCt7CA,IAAAA,EAyqCs7C,4C;AAzqCt7CA,IAAAA,EAyqC6lD,a;AAzqC7lDA,IAAAA,EAyqC6lD,iE;AAzqC7lDA,IAAAA,EAyqCuoD,a;AAzqCvoDA,IAAAA,EAyqCuoD,6C;;;;;;;;;;;;;gBAzqCvoDA,E;;AAAAA,IAAAA,EA2vCghB,4B;AA3vChhBA,IAAAA,EA2vCslB;AAAA,0BA3vCtlBA,EA2vCslB;AAAA;AAAA,qBA3vCtlBA,EA2vCslB;AAAA;AAAA,M;AA3vCtlBA,IAAAA,EA2vC8vB,U;AA3vC9vBA,IAAAA,EA2vCmxB,e;;;;;mBA3vCnxBA,E;AAAAA,IAAAA,EA2vCioB,uBA3vCjoBA,EA2vCioB,gG;AA3vCjoBA,IAAAA,EA2vC8vB,a;AA3vC9vBA,IAAAA,EA2vC8vB,sD;;;;;;AA3vC9vBA,IAAAA,EA2vCkc,4B;AA3vClcA,IAAAA,EA2vCghB,sE;AA3vChhBA,IAAAA,EA2vC2xB,e;;;;mBA3vC3xBA,E;AAAAA,IAAAA,EA2vC2kB,a;AA3vC3kBA,IAAAA,EA2vC2kB,oC;;;;;;;;;;;;;;;;;;;gBA3vC3kBA,E;;AAAAA,IAAAA,EA82C6lB,+B;AA92C7lBA,IAAAA,EA82CuwB;AAAA,0BA92CvwBA,EA82CuwB;AAAA;AAAA,qBA92CvwBA,EA82CuwB;AAAA;AAAA,M;AA92CvwBA,IAAAA,EA82Co4B,e;;;;;mBA92Cp4BA,E;AAAAA,IAAAA,EA82C0qB,uBA92C1qBA,EA82C0qB,mGA92C1qBA,EA82C0qB,iE;;;;;;AA92C1qBA,IAAAA,EA82CygB,4B;AA92CzgBA,IAAAA,EA82C6lB,qF;AA92C7lBA,IAAAA,EA82Ci5B,e;;;;;AA92Cj5BA,IAAAA,EA82CmpB,a;AA92CnpBA,IAAAA,EA82CmpB,qC;;;;;;gBA92CnpBA,E;;AAAAA,IAAAA,EA82Cid,4B;AA92CjdA,IAAAA,EA82CygB,yE;AA92CzgBA,IAAAA,EA82C65B,+B;AA92C75BA,IAAAA,EA82C28B;AA92C38BA,MAAAA,EA82C28B;AAAA,qBA92C38BA,EA82C28B;AAAA;AAAA,M;AA92C38BA,IAAAA,EA82CygC,U;AA92CzgCA,IAAAA,EA82CmiC,e;AA92CniCA,IAAAA,EA82C8iC,e;;;;mBA92C9iCA,E;AAAAA,IAAAA,EA82CsiB,a;AA92CtiBA,IAAAA,EA82CsiB,sC;AA92CtiBA,IAAAA,EA82C0+B,a;AA92C1+BA,IAAAA,EA82C0+B,yC;AA92C1+BA,IAAAA,EA82CygC,a;AA92CzgCA,IAAAA,EA82CygC,wD;;;;;;AA92CzgCA,IAAAA,EAm9C6lB,sC;;;;oBAn9C7lBA,E;mBAAAA,E;AAAAA,IAAAA,EAm9CwoB,sC;AAn9CxoBA,IAAAA,EAm9CinB,mC;;;;;;AAn9CjnBA,IAAAA,EAm9C2wB,yB;;;;mBAn9C3wBA,E;AAAAA,IAAAA,EAm9CqxB,sC;;;;;;AAn9CrxBA,IAAAA,EAm9Cy3B,0B;;;;mBAn9Cz3BA,E;AAAAA,IAAAA,EAm9Co4B,sC;;;;;;AAn9Cp4BA,IAAAA,EAm9CwiC,gC;;;;;oBAn9CxiCA,E;AAAAA,IAAAA,EAm9CunC,2C;AAn9CvnCA,IAAAA,EAm9CqqC,2E;;;;;;AAn9CrqCA,IAAAA,EAm9Cq/B,2B;AAn9Cr/BA,IAAAA,EAm9CwiC,2H;AAn9CxiCA,IAAAA,E;AAAAA,IAAAA,EAm9CkwC,wB;;;;oBAn9ClwCA,E;oBAAAA,E;AAAAA,IAAAA,EAm9CglC,a;AAn9ChlCA,IAAAA,EAm9CglC,uBAn9ChlCA,EAm9CglC,sD;;;;;;AAn9ChlCA,IAAAA,EAm9C6zC,qC;;;;oBAn9C7zCA,E;AAAAA,IAAAA,EAm9C+0C,uC;AAn9C/0CA,IAAAA,EAm9C26C,uC;;;;;;AAn9C36CA,IAAAA,EAm9C4gD,qC;;;;oBAn9C5gDA,E;AAAAA,IAAAA,EAm9C8hD,uC;AAn9C9hDA,IAAAA,EAm9CsoD,uC;;;;;;AAn9CtoDA,IAAAA,EAm9C2tD,oB;;;;oBAn9C3tDA,E;AAAAA,IAAAA,EAm9CguD,mC;;;;;;AAn9ChuDA,IAAAA,EAm9Cgf,2B;AAn9ChfA,IAAAA,EAm9C6lB,wH;AAn9C7lBA,IAAAA,EAm9C2wB,oG;AAn9C3wBA,IAAAA,EAm9Cy3B,sG;AAn9Cz3BA,IAAAA,EAm9Cq/B,4G;AAn9Cr/BA,IAAAA,EAm9C6zC,oH;AAn9C7zCA,IAAAA,EAm9C4gD,oH;AAn9C5gDA,IAAAA,EAm9C2tD,0F;AAn9C3tDA,IAAAA,EAm9C8yD,wB;;;;;;+BAn9C9yDA,E;mBAAAA,E;AAAAA,IAAAA,EAm9CwqB,a;AAn9CxqBA,IAAAA,EAm9CwqB,4D;AAn9CxqBA,IAAAA,EAm9CqzB,a;AAn9CrzBA,IAAAA,EAm9CqzB,uC;AAn9CrzBA,IAAAA,EAm9Co6B,a;AAn9Cp6BA,IAAAA,EAm9Co6B,wC;AAn9Cp6BA,IAAAA,EAm9CogC,a;AAn9CpgCA,IAAAA,EAm9CogC,+C;AAn9CpgCA,IAAAA,EAm9C+2C,a;AAn9C/2CA,IAAAA,EAm9C+2C,6C;AAn9C/2CA,IAAAA,EAm9C8jD,a;AAn9C9jDA,IAAAA,EAm9C8jD,mD;AAn9C9jDA,IAAAA,EAm9C4vD,a;AAn9C5vDA,IAAAA,EAm9C4vD,uD;;;;;;AAn9C5vDA,IAAAA,EAm9C0Z,2B;AAn9C1ZA,IAAAA,EAm9Cgf,6F;AAn9ChfA,IAAAA,EAm9Ci0D,wB;;;;;AAn9Cj0DA,IAAAA,EAm9CghB,a;AAn9ChhBA,IAAAA,EAm9CghB,sC;;;;;;AAn9ChhBA,IAAAA,EAm9C82D,2B;AAn9C92DA,IAAAA,EAm9C05D,0B;AAn9C15DA,IAAAA,EAm9Cg+D,wB;;;;mBAn9Ch+DA,E;AAAAA,IAAAA,EAm9Cw6D,a;AAn9Cx6DA,IAAAA,EAm9Cw6D,qD;;;;;;;;;;;;;;;;;;;;iBAn9Cx6DA,E;;AAAAA,IAAAA,EAqiD6P,4B;AAriD7PA,IAAAA,EAqiD+a;AAriD/aA,MAAAA,EAqiD+a;AAAA,sBAriD/aA,EAqiD+a;AAAA,qBAriD/aA,EAqiD+a;AAAA;AAAA,M;AAriD/aA,IAAAA,EAqiD+iB,iB;AAriD/iBA,IAAAA,EAqiD+iB,uB;AAriD/iBA,IAAAA,EAqiDqsB,e;;;;oBAriDrsBA,E;mBAAAA,E;AAAAA,IAAAA,EAqiDgS,uBAriDhSA,EAqiDgS,6I;AAriDhSA,IAAAA,EAqiDypB,a;AAriDzpBA,IAAAA,EAqiDypB,kDAriDzpBA,EAqiDypB,gB;;;;;;AAriDzpBA,IAAAA,EAqiDmtB,uB;;;;;;AAriDntBA,IAAAA,EAqiD+K,2B;AAriD/KA,IAAAA,EAqiD6P,4F;AAriD7PA,IAAAA,EAqiDmtB,4F;AAriDntBA,IAAAA,EAqiD4yB,wB;;;;;;+BAriD5yBA,E;mBAAAA,E;AAAAA,IAAAA,EAqiDie,a;AAriDjeA,IAAAA,EAqiDie,4D;AAriDjeA,IAAAA,EAqiD4vB,a;AAriD5vBA,IAAAA,EAqiD4vB,uD;;;;;;AAriD5vBA,IAAAA,EAqiD2F,2B;AAriD3FA,IAAAA,EAqiD+K,+F;AAriD/KA,IAAAA,EAqiD6zB,wB;;;;;AAriD7zBA,IAAAA,EAqiD+M,a;AAriD/MA,IAAAA,EAqiD+M,sC;;;;;;AAriD/MA,IAAAA,EAmrD4Y,2B;AAnrD5YA,IAAAA,EAmrDkc,8B;AAnrDlcA,IAAAA,EAmrDif,wB;;;;mBAnrDjfA,E;AAAAA,IAAAA,EAmrD8c,a;AAnrD9cA,IAAAA,EAmrD8c,oC;;;;AAt0DnjB,MAAM+E,cAAc,GAAG,CAACC,QAAQ,GAAG,IAAZ,KAAqB;AACxC,SAAO,IAAIxD,MAAJ,CAAW;AACdyD,IAAAA,GAAG,EAAE,IAAIxD,SAAJ,CAAc,UAAd,CADS;AAEdyD,IAAAA,KAAK,EAAE;AACHC,MAAAA,IAAI,GAAG;AACH,eAAOH,QAAP;AACH,OAHE;;AAIHI,MAAAA,KAAK,CAACC,EAAD,EAAKC,WAAL,EAAkB;AACnB,YAAIC,EAAJ;;AACA,eAAO,CAACA,EAAE,GAAGF,EAAE,CAACG,OAAH,CAAW,iBAAX,CAAN,MAAyC,IAAzC,IAAiDD,EAAE,KAAK,KAAK,CAA7D,GAAiEA,EAAjE,GAAsED,WAA7E;AACH;;AAPE,KAFO;AAWdG,IAAAA,KAAK,EAAE;AACHT,MAAAA,QAAQ,CAACE,KAAD,EAAQ;AACZ,eAAO,KAAKQ,QAAL,CAAcR,KAAd,CAAP;AACH,OAHE;;AAIHS,MAAAA,UAAU,CAACT,KAAD,EAAQ;AACd,cAAMU,SAAS,GAAG,KAAKF,QAAL,CAAcR,KAAd,CAAlB;;AACA,YAAIU,SAAJ,EAAe;AACX,iBAAO,IAAP;AACH;;AACD,eAAO;AACHC,UAAAA,KAAK,EAAE;AADJ,SAAP;AAGH;;AAZE;AAXO,GAAX,CAAP;AA0BH,CA3BD;;AA6BA,MAAMC,qBAAqB,GAAG,wBAA9B;;AACA,MAAMC,iBAAiB,GAAIC,IAAD,IAAU;AAChC,SAAO,IAAIxE,MAAJ,CAAW;AACdyD,IAAAA,GAAG,EAAE,IAAIxD,SAAJ,CAAc,aAAd,CADS;AAEdyD,IAAAA,KAAK,EAAE;AACHC,MAAAA,IAAI,GAAG;AACH,eAAOa,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmCA,IAAnC,GAA0C,EAAjD;AACH,OAHE;;AAIHZ,MAAAA,KAAK,CAACC,EAAD,EAAKC,WAAL,EAAkB;AACnB,YAAIC,EAAJ;;AACA,cAAMU,WAAW,GAAG,CAACV,EAAE,GAAGF,EAAE,CAACG,OAAH,CAAW,oBAAX,CAAN,MAA4C,IAA5C,IAAoDD,EAAE,KAAK,KAAK,CAAhE,GAAoEA,EAApE,GAAyED,WAA7F;AACA,eAAOW,WAAP;AACH;;AARE,KAFO;AAYdR,IAAAA,KAAK,EAAE;AACHS,MAAAA,WAAW,CAAChB,KAAD,EAAQ;AACf,cAAM;AAAEiB,UAAAA;AAAF,YAAUjB,KAAhB;AACA,cAAM;AAAEkB,UAAAA,WAAF;AAAeC,UAAAA;AAAf,YAA8BF,GAApC;AACA,cAAMF,WAAW,GAAG,KAAKP,QAAL,CAAcR,KAAd,CAApB;;AACA,YAAI,CAACe,WAAD,IAAgBI,UAAU,GAAG,CAAjC,EAAoC;AAChC,iBAAOzE,aAAa,CAAC0E,KAArB;AACH;;AACD,cAAMJ,WAAW,GAAG,EAApB;;AACA,cAAMK,QAAQ,GAAG,CAACC,IAAD,EAAOC,GAAP,KAAe;AAC5B,cAAIlB,EAAJ;;AACA,cAAIiB,IAAI,CAACE,IAAL,CAAUC,OAAV,IAAqBH,IAAI,CAACH,UAAL,KAAoB,CAAzC,IAA8CD,WAAW,CAACQ,MAAZ,KAAuB,CAAzE,EAA4E;AACxE,kBAAMC,eAAe,GAAGhF,UAAU,CAAC2E,IAAX,CAAgBC,GAAhB,EAAsBA,GAAG,GAAGD,IAAI,CAACM,QAAjC,EAA4C;AAChEjB,cAAAA,KAAK,EAAEC,qBADyD;AAEhE,kCAAoBG,WAF4C;AAGhE,4BAAc,CAACV,EAAE,GAAGiB,IAAI,CAACO,KAAL,CAAW,OAAX,CAAN,MAA+B,IAA/B,IAAuCxB,EAAE,KAAK,KAAK,CAAnD,GAAuDA,EAAvD,GAA4D;AAHV,aAA5C,CAAxB;AAKAW,YAAAA,WAAW,CAACc,IAAZ,CAAiBH,eAAjB;AACH;;AACD,iBAAO,KAAP;AACH,SAXD;;AAYAV,QAAAA,GAAG,CAACc,WAAJ,CAAgBV,QAAhB;AACA,eAAO3E,aAAa,CAACsF,MAAd,CAAqBf,GAArB,EAA0BD,WAA1B,CAAP;AACH;;AAvBE;AAZO,GAAX,CAAP;AAsCH,CAvCD;;AAyCA,MAAMiB,gBAAgB,GAAG,CAACxB,UAAU,GAAG,EAAd,KAAqB;AAC1C,SAAO,IAAInE,MAAJ,CAAW;AACdyD,IAAAA,GAAG,EAAE,IAAIxD,SAAJ,CAAc,YAAd,CADS;AAEdgE,IAAAA,KAAK,EAAE;AACHE,MAAAA;AADG;AAFO,GAAX,CAAP;AAMH,CAPD;;AASA,MAAMyB,WAAW,GAAIC,EAAD,IAAQ;AACxB,SAAO,IAAI7F,MAAJ,CAAW;AACdyD,IAAAA,GAAG,EAAE,IAAIxD,SAAJ,CAAc,OAAd,CADS;AAEdgE,IAAAA,KAAK,EAAE;AACH6B,MAAAA,eAAe,EAAE;AACbC,QAAAA,KAAK,EAAE,MAAM;AACTF,UAAAA,EAAE;AACF,iBAAO,KAAP;AACH;AAJY;AADd;AAFO,GAAX,CAAP;AAWH,CAZD;;AAcA,MAAMG,UAAU,GAAIH,EAAD,IAAQ;AACvB,SAAO,IAAI7F,MAAJ,CAAW;AACdyD,IAAAA,GAAG,EAAE,IAAIxD,SAAJ,CAAc,MAAd,CADS;AAEdgE,IAAAA,KAAK,EAAE;AACH6B,MAAAA,eAAe,EAAE;AACbG,QAAAA,IAAI,EAAE,MAAM;AACRJ,UAAAA,EAAE;AACF,iBAAO,KAAP;AACH;AAJY;AADd;AAFO,GAAX,CAAP;AAWH,CAZD;;AAcA,MAAMK,kBAAN,CAAyB;AACrBC,EAAAA,WAAW,GAAG;AACV,SAAKC,GAAL,GAAW,EAAX;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,UAAL,GAAkB,EAAlB;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKC,WAAL,GAAmB,IAAI/H,YAAJ,EAAnB;AACH;;AACDgI,EAAAA,aAAa,CAACC,CAAD,EAAIC,SAAJ,EAAe;AACxBD,IAAAA,CAAC,CAACE,cAAF;AACA,SAAKC,WAAL,CAAiBH,CAAjB,EAAoBC,SAApB;AACH;;AACDE,EAAAA,WAAW,CAACC,GAAD,EAAMH,SAAN,EAAiB;AACxB,UAAMI,MAAM,GAAGD,GAAG,CAACE,KAAnB;AACA,UAAMC,UAAU,GAAG,KAAKC,KAAL,CAAWC,aAAX,CAAyBC,WAA5C;AACA,UAAMC,YAAY,GAAGV,SAAS,KAAK,MAAnC;AACA,UAAM;AAAEW,MAAAA;AAAF,QAAYC,MAAM,CAACC,gBAAP,CAAwB,KAAKC,IAAL,CAAUC,GAAlC,CAAlB;AACA,UAAMC,WAAW,GAAGC,QAAQ,CAACN,KAAD,EAAQ,EAAR,CAA5B;;AACA,UAAMO,WAAW,GAAInB,CAAD,IAAO;AACvB,YAAMoB,QAAQ,GAAGpB,CAAC,CAACM,KAAnB;AACA,YAAMe,QAAQ,GAAGD,QAAQ,GAAGf,MAA5B;AACA,YAAMiB,aAAa,GAAGX,YAAY,GAAGJ,UAAU,GAAGc,QAAhB,GAA2Bd,UAAU,GAAGc,QAA1E,CAHuB,CAIvB;AACA;;AACA,UAAIC,aAAa,GAAGL,WAAhB,IAA+BK,aAAa,GAAG,EAAnD,EAAuD;AACnD;AACH;;AACD,WAAK1B,UAAL,GAAmB,GAAE0B,aAAc,IAAnC;AACH,KAVD;;AAWA,UAAMC,SAAS,GAAIvB,CAAD,IAAO;AACrBA,MAAAA,CAAC,CAACE,cAAF;AACAsB,MAAAA,QAAQ,CAACC,mBAAT,CAA6B,WAA7B,EAA0CN,WAA1C;AACAK,MAAAA,QAAQ,CAACC,mBAAT,CAA6B,SAA7B,EAAwCF,SAAxC;AACA,WAAKzB,WAAL,CAAiB4B,IAAjB;AACH,KALD;;AAMAF,IAAAA,QAAQ,CAACG,gBAAT,CAA0B,WAA1B,EAAuCR,WAAvC;AACAK,IAAAA,QAAQ,CAACG,gBAAT,CAA0B,SAA1B,EAAqCJ,SAArC;AACH;;AArCoB;;AAuCzB/B,kBAAkB,CAACoC,IAAnB;AAAA,mBAA+GpC,kBAA/G;AAAA;;AACAA,kBAAkB,CAACqC,IAAnB,kBADqG/J,EACrG;AAAA,QAAmG0H,kBAAnG;AAAA;AAAA;AAAA;AADqG1H,MAAAA,EACrG;AAAA;;AAAA;AAAA;;AADqGA,MAAAA,EACrG,qBADqGA,EACrG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADqGA,MAAAA,EACgV,6BAArb;AADqGA,MAAAA,EACgd,mEAArjB;AADqGA,MAAAA,EACy7B,0BAA9hC;AADqGA,MAAAA,EACu/B,eAA5lC;AAAA;;AAAA;AADqGA,MAAAA,EAC+a,qCAAphB;AADqGA,MAAAA,EACwX,uBADxXA,EACwX,uCAA7d;AADqGA,MAAAA,EACyf,aAA9lB;AADqGA,MAAAA,EACyf,iCAA9lB;AADqGA,MAAAA,EAC87B,aAAniC;AADqGA,MAAAA,EAC87B,4BAD97BA,EAC87B,mDAAniC;AAAA;AAAA;AAAA,eAAs0E+B,EAAE,CAACiI,OAAz0E,EAAi5EjI,EAAE,CAACkI,IAAp5E;AAAA;AAAA;;AACA;AAAA,qDAFqGjK,EAErG,mBAA2F0H,kBAA3F,EAA2H,CAAC;AAChHhB,IAAAA,IAAI,EAAExG,SAD0G;AAEhHgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,gBAAZ;AAA8BC,MAAAA,QAAQ,EAAE,krBAAxC;AAA4tBC,MAAAA,MAAM,EAAE,CAAC,6rCAAD;AAApuB,KAAD;AAF0G,GAAD,CAA3H,QAG4B;AAAEC,IAAAA,GAAG,EAAE,CAAC;AACpB5D,MAAAA,IAAI,EAAEvG;AADc,KAAD,CAAP;AAEZyH,IAAAA,GAAG,EAAE,CAAC;AACNlB,MAAAA,IAAI,EAAEvG;AADA,KAAD,CAFO;AAIZ0H,IAAAA,KAAK,EAAE,CAAC;AACRnB,MAAAA,IAAI,EAAEvG;AADE,KAAD,CAJK;AAMZ2H,IAAAA,UAAU,EAAE,CAAC;AACbpB,MAAAA,IAAI,EAAEvG;AADO,KAAD,CANA;AAQZ4H,IAAAA,QAAQ,EAAE,CAAC;AACXrB,MAAAA,IAAI,EAAEvG;AADK,KAAD,CARE;AAUZ8I,IAAAA,IAAI,EAAE,CAAC;AACPvC,MAAAA,IAAI,EAAEvG;AADC,KAAD,CAVM;AAYZ6H,IAAAA,WAAW,EAAE,CAAC;AACdtB,MAAAA,IAAI,EAAEtG;AADQ,KAAD,CAZD;AAcZsI,IAAAA,KAAK,EAAE,CAAC;AACRhC,MAAAA,IAAI,EAAErG,SADE;AAER6J,MAAAA,IAAI,EAAE,CAAC,OAAD,EAAU;AAAEK,QAAAA,MAAM,EAAE;AAAV,OAAV;AAFE,KAAD;AAdK,GAH5B;AAAA;;AAsBA,MAAMC,cAAN,CAAqB;AACjB7C,EAAAA,WAAW,CAACnB,IAAD,EAAOyC,IAAP,EAAawB,MAAb,EAAqBC,QAArB,EAA+B;AACtC,SAAKC,QAAL,GAAgB,KAAhB;;AACA,SAAKC,YAAL,GAAoB,MAAM;AACtB,UAAI,KAAKD,QAAT,EAAmB;AACf;AACH;;AACD,YAAM;AAAEzF,QAAAA,KAAF;AAAS2F,QAAAA;AAAT,UAAsB,KAAK5B,IAAjC;AACA,YAAM;AAAE5D,QAAAA;AAAF,UAASH,KAAf;AACA,YAAM4F,WAAW,GAAGzF,EAAE,CAAC0F,aAAH,CAAiB,KAAKN,MAAL,EAAjB,EAAgCO,SAAhC,EAA2C;AAC3DV,QAAAA,GAAG,EAAE,KAAKW,iBAAL,CAAuBC,QAAvB,CAAgCZ,GADsB;AAE3DxB,QAAAA,KAAK,EAAE,KAAKmC,iBAAL,CAAuBC,QAAvB,CAAgCpD;AAFoB,OAA3C,CAApB;AAIA,YAAMqD,WAAW,GAAGL,WAAW,CAAC3E,GAAZ,CAAgBiF,OAAhB,CAAwB,KAAKX,MAAL,EAAxB,CAApB;AACA,YAAMY,YAAY,GAAG,IAAI3J,aAAJ,CAAkByJ,WAAlB,CAArB;AACAL,MAAAA,WAAW,CAACQ,YAAZ,CAAyBD,YAAzB;AACAR,MAAAA,QAAQ,CAACC,WAAD,CAAR;AACH,KAdD;;AAeA,UAAM5B,GAAG,GAAGQ,QAAQ,CAAC6B,aAAT,CAAuB,YAAvB,CAAZ;AACA,UAAMC,wBAAwB,GAAGd,QAAQ,CAACe,GAAT,CAAanL,wBAAb,CAAjC;AACA,SAAKoL,cAAL,GAAsBhB,QAAQ,CAACe,GAAT,CAAalL,cAAb,CAAtB,CAnBsC,CAoBtC;;AACA,UAAMoL,OAAO,GAAGH,wBAAwB,CAACI,uBAAzB,CAAiDlE,kBAAjD,CAAhB;AACA,SAAKuD,iBAAL,GAAyBU,OAAO,CAACzE,MAAR,CAAewD,QAAf,EAAyB,EAAzB,EAA6BxB,GAA7B,CAAzB,CAtBsC,CAuBtC;;AACA,SAAKwC,cAAL,CAAoBG,UAApB,CAA+B,KAAKZ,iBAAL,CAAuBa,QAAtD;AACA,SAAKC,iBAAL,CAAuBvF,IAAI,CAACO,KAA5B;AACA,SAAKkE,iBAAL,CAAuBC,QAAvB,CAAgCjC,IAAhC,GAAuCA,IAAvC;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKzC,IAAL,GAAYA,IAAZ;AACA,SAAKiE,MAAL,GAAcA,MAAd;AACA,SAAKuB,kBAAL,GAA0B,KAAKf,iBAAL,CAAuBC,QAAvB,CAAgClD,WAAhC,CAA4CiE,SAA5C,CAAsD,MAAM;AAClF,WAAKrB,YAAL;AACH,KAFyB,CAA1B;AAGH;;AACDsB,EAAAA,cAAc,CAACC,SAAD,EAAYC,QAAZ,EAAsB;AAChC,WAAOC,IAAI,CAACC,SAAL,CAAeH,SAAf,MAA8BE,IAAI,CAACC,SAAL,CAAeF,QAAf,CAArC;AACH;;AACDL,EAAAA,iBAAiB,CAAChF,KAAD,EAAQ;AACrB,SAAKkE,iBAAL,CAAuBC,QAAvB,CAAgCZ,GAAhC,GAAsCvD,KAAK,CAAC,KAAD,CAA3C;AACA,SAAKkE,iBAAL,CAAuBC,QAAvB,CAAgCtD,GAAhC,GAAsCb,KAAK,CAAC,KAAD,CAA3C;AACA,SAAKkE,iBAAL,CAAuBC,QAAvB,CAAgCrD,KAAhC,GAAwCd,KAAK,CAAC,OAAD,CAA7C;AACA,SAAKkE,iBAAL,CAAuBC,QAAvB,CAAgCpD,UAAhC,GAA6Cf,KAAK,CAAC,OAAD,CAAlD;AACH;;AACDwF,EAAAA,MAAM,CAAC/F,IAAD,EAAO;AACT,QAAIA,IAAI,CAACE,IAAL,KAAc,KAAKF,IAAL,CAAUE,IAA5B,EAAkC;AAC9B,aAAO,KAAP;AACH;;AACD,SAAKF,IAAL,GAAYA,IAAZ;AACA,UAAMgG,OAAO,GAAG,KAAKN,cAAL,CAAoB,KAAK1F,IAAL,CAAUO,KAA9B,EAAqCP,IAAI,CAACO,KAA1C,CAAhB;;AACA,QAAIyF,OAAJ,EAAa;AACT,WAAK7B,QAAL,GAAgB,IAAhB;AACA,WAAKoB,iBAAL,CAAuBvF,IAAI,CAACO,KAA5B;AACA,WAAK4D,QAAL,GAAgB,KAAhB;AACH;;AACD,WAAO,IAAP;AACH;;AACD8B,EAAAA,cAAc,GAAG;AACb,WAAO,IAAP;AACH;;AACDC,EAAAA,UAAU,GAAG;AACT,SAAKzB,iBAAL,CAAuBC,QAAvB,CAAgCnD,QAAhC,GAA2C,IAA3C;AACH;;AACD4E,EAAAA,YAAY,GAAG;AACX,SAAK1B,iBAAL,CAAuBC,QAAvB,CAAgCnD,QAAhC,GAA2C,KAA3C;AACH;;AACD6E,EAAAA,OAAO,GAAG;AACN,SAAKZ,kBAAL,CAAwBa,WAAxB;AACA,SAAKnB,cAAL,CAAoBoB,UAApB,CAA+B,KAAK7B,iBAAL,CAAuBa,QAAtD;AACH;;AAtEgB;;AAwErB,MAAMiB,iBAAiB,GAAIrC,QAAD,IAAc;AACpC,SAAO,IAAIlJ,MAAJ,CAAW;AACdyD,IAAAA,GAAG,EAAE,IAAIxD,SAAJ,CAAc,cAAd,CADS;AAEdgE,IAAAA,KAAK,EAAE;AACHuH,MAAAA,SAAS,EAAE;AACPC,QAAAA,KAAK,EAAE,CAACzG,IAAD,EAAOyC,IAAP,EAAawB,MAAb,KAAwB;AAC3B,iBAAO,IAAID,cAAJ,CAAmBhE,IAAnB,EAAyByC,IAAzB,EAA+BwB,MAA/B,EAAuCC,QAAvC,CAAP;AACH;AAHM;AADR;AAFO,GAAX,CAAP;AAUH,CAXD;;AAaA,MAAMwC,eAAe,GAAG,sDAAxB;;AACA,MAAMC,OAAO,GAAIC,QAAD,IAAc;AAC1B,QAAMC,SAAS,GAAG,EAAlB;AACAD,EAAAA,QAAQ,CAACE,OAAT,CAAkBC,KAAD,IAAW;AACxB,QAAIA,KAAK,CAACC,MAAV,EAAkB;AACd,YAAMxH,IAAI,GAAGuH,KAAK,CAACvH,IAAnB;AACA,UAAIS,GAAG,GAAG,CAAV;AACA,YAAMgH,KAAK,GAAGP,eAAe,CAACQ,IAAhB,CAAqB1H,IAArB,CAAd;;AACA,UAAIyH,KAAJ,EAAW;AACP,cAAME,KAAK,GAAGF,KAAK,CAACG,KAApB;AACA,cAAMC,GAAG,GAAGF,KAAK,GAAGF,KAAK,CAAC,CAAD,CAAL,CAAS7G,MAA7B;AACA,cAAMkH,IAAI,GAAGP,KAAK,CAAC7G,IAAN,CAAWrE,MAAX,CAAkBC,KAAlB,CAAwBwL,IAArC;;AACA,YAAIH,KAAK,GAAG,CAAZ,EAAe;AACXN,UAAAA,SAAS,CAACrG,IAAV,CAAeuG,KAAK,CAACQ,GAAN,CAAUtH,GAAV,EAAekH,KAAf,CAAf;AACH;;AACD,cAAMK,OAAO,GAAGhI,IAAI,CAACiI,KAAL,CAAWN,KAAX,EAAkBE,GAAlB,CAAhB;AACAR,QAAAA,SAAS,CAACrG,IAAV,CAAeuG,KAAK,CAACQ,GAAN,CAAUJ,KAAV,EAAiBE,GAAjB,EAAsBK,IAAtB,CAA2BJ,IAAI,CAAC5G,MAAL,CAAY;AAAEiH,UAAAA,IAAI,EAAEH;AAAR,SAAZ,EAA+BI,QAA/B,CAAwCb,KAAK,CAACjL,KAA9C,CAA3B,CAAf;AACAmE,QAAAA,GAAG,GAAGoH,GAAN;AACH;;AACD,UAAIpH,GAAG,GAAGT,IAAI,CAACY,MAAf,EAAuB;AACnByG,QAAAA,SAAS,CAACrG,IAAV,CAAeuG,KAAK,CAACQ,GAAN,CAAUtH,GAAV,CAAf;AACH;AACJ,KAlBD,MAmBK;AACD4G,MAAAA,SAAS,CAACrG,IAAV,CAAeuG,KAAK,CAACc,IAAN,CAAWlB,OAAO,CAACI,KAAK,CAACe,OAAP,CAAlB,CAAf;AACH;AACJ,GAvBD;AAwBA,SAAOrM,QAAQ,CAACsM,SAAT,CAAmBlB,SAAnB,CAAP;AACH,CA3BD;;AA4BA,MAAMmB,aAAa,GAAG,MAAM;AACxB,SAAO,IAAIhN,MAAJ,CAAW;AACdyD,IAAAA,GAAG,EAAE,IAAIxD,SAAJ,CAAc,SAAd,CADS;AAEdgE,IAAAA,KAAK,EAAE;AACHgJ,MAAAA,eAAe,EAAGR,KAAD,IAAW;AACxB,eAAO,IAAI/L,KAAJ,CAAUiL,OAAO,CAACc,KAAK,CAACK,OAAP,CAAjB,EAAkCL,KAAK,CAACS,SAAxC,EAAmDT,KAAK,CAACU,OAAzD,CAAP;AACH;AAHE;AAFO,GAAX,CAAP;AAQH,CATD;;AAWA,MAAMC,QAAQ,GAAG;AACblI,EAAAA,IAAI,EAAE,KADO;AAEb4H,EAAAA,OAAO,EAAE,CACL;AACI5H,IAAAA,IAAI,EAAE;AADV,GADK;AAFI,CAAjB,C,CAQA;;AACA,MAAMmI,MAAM,GAAG,CAACC,IAAD,EAAOC,WAAP,KAAuB;AAClC,QAAMC,QAAQ,GAAGD,WAAW,KAAK,IAAhB,IAAwBA,WAAW,KAAK,KAAK,CAA7C,GAAiDA,WAAjD,GAA+D1M,MAAhF;AACA,QAAM4M,WAAW,GAAGD,QAAQ,CAACE,YAAT,CAAsBJ,IAAtB,CAApB;AACA,QAAMK,IAAI,GAAGhN,aAAa,CAACiN,UAAd,CAAyBJ,QAAzB,EAAmCK,iBAAnC,CAAqDJ,WAAW,CAACX,OAAjE,CAAb;AACA,QAAMgB,GAAG,GAAG5F,QAAQ,CAAC6B,aAAT,CAAuB,KAAvB,CAAZ;AACA+D,EAAAA,GAAG,CAACC,WAAJ,CAAgBJ,IAAhB;AACA,SAAOG,GAAG,CAACE,SAAX;AACH,CAPD;;AAQA,MAAMC,KAAK,GAAG,CAACN,IAAD,EAAOJ,WAAP,KAAuB;AACjC,QAAMC,QAAQ,GAAGD,WAAW,KAAK,IAAhB,IAAwBA,WAAW,KAAK,KAAK,CAA7C,GAAiDA,WAAjD,GAA+D1M,MAAhF;AACA,QAAMqN,EAAE,GAAGhG,QAAQ,CAAC6B,aAAT,CAAuB,KAAvB,CAAX;AACAmE,EAAAA,EAAE,CAACF,SAAH,GAAeL,IAAf;AACA,SAAO/M,SAAS,CAACgN,UAAV,CAAqBJ,QAArB,EAA+BW,KAA/B,CAAqCD,EAArC,EAAyCE,MAAzC,EAAP;AACH,CALD;;AAMA,MAAMC,YAAY,GAAG,CAACC,KAAD,EAAQzN,MAAR,KAAmB;AACpC,MAAI,CAACyN,KAAL,EAAY;AACR,WAAOzN,MAAM,CAAC6M,YAAP,CAAoBN,QAApB,CAAP;AACH;;AACD,MAAI,OAAOkB,KAAP,KAAiB,QAArB,EAA+B;AAC3B,WAAOzN,MAAM,CAAC6M,YAAP,CAAoBY,KAApB,CAAP;AACH;;AACD,QAAMC,OAAO,GAAGN,KAAK,CAACK,KAAD,EAAQzN,MAAR,CAArB;AACA,SAAOA,MAAM,CAAC6M,YAAP,CAAoBa,OAApB,CAAP;AACH,CATD;;AAWA,MAAMC,kBAAN,CAAyB;AACrBrI,EAAAA,WAAW,CAACsI,SAAD,EAAYC,SAAZ,EAAuBC,WAAvB,EAAoC;AAC3C,SAAKF,SAAL,GAAiBA,SAAjB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKlK,WAAL,GAAmB,cAAnB;AACA,SAAKmK,QAAL,GAAgB,IAAInQ,YAAJ,EAAhB;AACA,SAAKoQ,OAAL,GAAe,IAAIpQ,YAAJ,EAAf;AACA,SAAKqQ,aAAL,GAAqB,EAArB;;AACA,SAAKC,QAAL,GAAgB,MAAM,CAAG,CAAzB;;AACA,SAAKC,SAAL,GAAiB,MAAM,CAAG,CAA1B;AACH;;AACDC,EAAAA,UAAU,CAACX,KAAD,EAAQ;AACd,QAAI,CAAC,KAAKY,YAAN,IAAsB,OAAOZ,KAAP,KAAiB,QAA3C,EAAqD;AACjD,WAAKY,YAAL,GAAoB,MAApB;AACH;;AACD,SAAKC,MAAL,CAAYC,UAAZ,CAAuBd,KAAvB;AACH;;AACDe,EAAAA,gBAAgB,CAACC,EAAD,EAAK;AACjB,SAAKP,QAAL,GAAgBO,EAAhB;AACH;;AACDC,EAAAA,iBAAiB,CAACD,EAAD,EAAK;AAClB,SAAKN,SAAL,GAAiBM,EAAjB;AACH;;AACDE,EAAAA,gBAAgB,CAACC,UAAD,EAAa;AACzB,SAAKC,OAAL,CAAa,iBAAb,EAAgC,CAACD,UAAjC;;AACA,SAAKhB,SAAL,CAAekB,WAAf,CAA2B,KAAKhB,WAAL,CAAiBxH,aAA5C,EAA2D,UAA3D,EAAuEsI,UAAvE;AACH;;AACDG,EAAAA,YAAY,CAACC,OAAD,EAAU;AAClB,QAAI,KAAKX,YAAL,KAAsB,MAA1B,EAAkC;AAC9B,YAAMvB,IAAI,GAAGN,MAAM,CAACwC,OAAD,EAAU,KAAKV,MAAL,CAAYtO,MAAtB,CAAnB;AACA,WAAKkO,QAAL,CAAcpB,IAAd;AACA;AACH;;AACD,SAAKoB,QAAL,CAAcc,OAAd;AACH;;AACDH,EAAAA,OAAO,CAACjM,GAAD,EAAM6K,KAAN,EAAa;AAChB,UAAM;AAAEjF,MAAAA,QAAF;AAAY3F,MAAAA,KAAK,EAAE;AAAEG,QAAAA;AAAF;AAAnB,QAA8B,KAAKsL,MAAL,CAAY1H,IAAhD;AACA4B,IAAAA,QAAQ,CAACxF,EAAE,CAAC6L,OAAH,CAAWjM,GAAX,EAAgB6K,KAAhB,CAAD,CAAR;AACH;;AACDwB,EAAAA,cAAc,CAACrL,WAAD,EAAc;AACxB,SAAKiL,OAAL,CAAa,oBAAb,EAAmCjL,WAAnC;AACH;;AACDsL,EAAAA,eAAe,GAAG;AACd,SAAKZ,MAAL,CAAYa,cAAZ,CAA2BzM,cAAc,EAAzC;AACA,SAAK4L,MAAL,CAAYa,cAAZ,CAA2BzL,iBAAiB,CAAC,KAAKE,WAAN,CAA5C;AACA,SAAK0K,MAAL,CAAYa,cAAZ,CAA2BrK,gBAAgB,CAAC;AACxCtB,MAAAA,KAAK,EAAE;AADiC,KAAD,CAA3C;AAGA,SAAK8K,MAAL,CAAYa,cAAZ,CAA2BpK,WAAW,CAAC,MAAM;AACzC,WAAKiJ,OAAL,CAAazG,IAAb;AACH,KAFqC,CAAtC;AAGA,SAAK+G,MAAL,CAAYa,cAAZ,CAA2BpK,WAAW,CAAC,MAAM;AACzC,WAAKiJ,OAAL,CAAazG,IAAb;AACH,KAFqC,CAAtC;AAGA,SAAK+G,MAAL,CAAYa,cAAZ,CAA2BhK,UAAU,CAAC,MAAM;AACxC,WAAK4I,QAAL,CAAcxG,IAAd;AACA,WAAK4G,SAAL;AACH,KAHoC,CAArC;;AAIA,QAAI,KAAKG,MAAL,CAAYc,QAAZ,CAAqBpJ,WAAzB,EAAsC;AAClC,WAAKsI,MAAL,CAAYa,cAAZ,CAA2BzE,iBAAiB,CAAC,KAAKmD,SAAN,CAA5C;AACH;;AACD,QAAI,KAAKS,MAAL,CAAYc,QAAZ,CAAqBC,WAAzB,EAAsC;AAClC,WAAKf,MAAL,CAAYa,cAAZ,CAA2BhD,aAAa,EAAxC;AACH;AACJ;;AACDmD,EAAAA,QAAQ,GAAG;AACP,QAAI,CAAC,KAAKhB,MAAV,EAAkB;AACd,YAAM,IAAIiB,KAAJ,CAAU,qCAAV,CAAN;AACH;;AACD,SAAKL,eAAL;;AACA,SAAKtB,SAAL,CAAeV,WAAf,CAA2B,KAAKsC,SAAL,CAAelJ,aAA1C,EAAyD,KAAKgI,MAAL,CAAY1H,IAAZ,CAAiBC,GAA1E;;AACA,UAAM4I,yBAAyB,GAAG,KAAKnB,MAAL,CAAYoB,YAAZ,CAAyB9F,SAAzB,CAAmCoF,OAAO,IAAI;AAC5E,WAAKD,YAAL,CAAkBC,OAAlB;AACH,KAFiC,CAAlC;AAGA,SAAKf,aAAL,CAAmBtJ,IAAnB,CAAwB8K,yBAAxB;AACH;;AACDE,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,QAAI,CAACA,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAAC,aAAD,CAA1D,KAA8E,CAACA,OAAO,CAAC,aAAD,CAAP,CAAuBC,aAAvB,EAAnF,EAA2H;AACvH,WAAKZ,cAAL,CAAoBW,OAAO,CAAC,aAAD,CAAP,CAAuBE,YAA3C;AACH;AACJ;;AACDC,EAAAA,WAAW,GAAG;AACV,SAAK9B,aAAL,CAAmBhD,OAAnB,CAA2B+E,YAAY,IAAI;AACvCA,MAAAA,YAAY,CAACxF,WAAb;AACH,KAFD;AAGH;;AAtFoB;;AAwFzBmD,kBAAkB,CAAClG,IAAnB;AAAA,mBAA+GkG,kBAA/G,EA/QqGhQ,EA+QrG,mBAAmJA,EAAE,CAACsS,SAAtJ,GA/QqGtS,EA+QrG,mBAA4KA,EAAE,CAACuS,QAA/K,GA/QqGvS,EA+QrG,mBAAoMA,EAAE,CAACwS,UAAvM;AAAA;;AACAxC,kBAAkB,CAACjG,IAAnB,kBAhRqG/J,EAgRrG;AAAA,QAAmGgQ,kBAAnG;AAAA;AAAA;AAAA;AAhRqGhQ,MAAAA,EAgRrG;AAAA;;AAAA;AAAA;;AAhRqGA,MAAAA,EAgRrG,qBAhRqGA,EAgRrG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAhRqGA,EAgRrG,oBAAyS,CAAC;AAC9RyS,IAAAA,OAAO,EAAEvR,iBADqR;AAE9RwR,IAAAA,WAAW,EAAElS,UAAU,CAAC,MAAMwP,kBAAP,CAFuQ;AAG9R2C,IAAAA,KAAK,EAAE;AAHuR,GAAD,CAAzS,GAhRqG3S,EAgRrG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAhRqGA,MAAAA,EAgRrG;AAhRqGA,MAAAA,EAoR2E,+BAJhL;AAhRqGA,MAAAA,EAoRmH,gBAJxN;AAhRqGA,MAAAA,EAoR8I,eAJnP;AAAA;AAAA;AAAA;AAAA;AAAA;;AAKA;AAAA,qDArRqGA,EAqRrG,mBAA2FgQ,kBAA3F,EAA2H,CAAC;AAChHtJ,IAAAA,IAAI,EAAExG,SAD0G;AAEhHgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,YAAZ;AAA0ByI,MAAAA,SAAS,EAAE,CAAC;AAC7BH,QAAAA,OAAO,EAAEvR,iBADoB;AAE7BwR,QAAAA,WAAW,EAAElS,UAAU,CAAC,MAAMwP,kBAAP,CAFM;AAG7B2C,QAAAA,KAAK,EAAE;AAHsB,OAAD,CAArC;AAISE,MAAAA,aAAa,EAAEpS,iBAAiB,CAACqS,IAJ1C;AAIgD1I,MAAAA,QAAQ,EAAE,6EAJ1D;AAIyIC,MAAAA,MAAM,EAAE,CAAC,yqIAAD;AAJjJ,KAAD;AAF0G,GAAD,CAA3H,EAO4B,YAAY;AAAE,WAAO,CAAC;AAAE3D,MAAAA,IAAI,EAAE1G,EAAE,CAACsS;AAAX,KAAD,EAAyB;AAAE5L,MAAAA,IAAI,EAAE1G,EAAE,CAACuS;AAAX,KAAzB,EAAgD;AAAE7L,MAAAA,IAAI,EAAE1G,EAAE,CAACwS;AAAX,KAAhD,CAAP;AAAkF,GAP5H,EAO8I;AAAEX,IAAAA,SAAS,EAAE,CAAC;AAC5InL,MAAAA,IAAI,EAAErG,SADsI;AAE5I6J,MAAAA,IAAI,EAAE,CAAC,WAAD,EAAc;AAAEK,QAAAA,MAAM,EAAE;AAAV,OAAd;AAFsI,KAAD,CAAb;AAG9HoG,IAAAA,MAAM,EAAE,CAAC;AACTjK,MAAAA,IAAI,EAAEvG;AADG,KAAD,CAHsH;AAK9HuQ,IAAAA,YAAY,EAAE,CAAC;AACfhK,MAAAA,IAAI,EAAEvG;AADS,KAAD,CALgH;AAO9H8F,IAAAA,WAAW,EAAE,CAAC;AACdS,MAAAA,IAAI,EAAEvG;AADQ,KAAD,CAPiH;AAS9HiQ,IAAAA,QAAQ,EAAE,CAAC;AACX1J,MAAAA,IAAI,EAAEtG;AADK,KAAD,CAToH;AAW9HiQ,IAAAA,OAAO,EAAE,CAAC;AACV3J,MAAAA,IAAI,EAAEtG;AADI,KAAD;AAXqH,GAP9I;AAAA;;AAsBA,MAAM2S,WAAN,CAAkB;AACdpL,EAAAA,WAAW,GAAG;AACV,SAAKqL,mBAAL,GAA2B,IAAIxQ,OAAJ,EAA3B;AACH;;AACDyQ,EAAAA,gBAAgB,CAACC,CAAD,EAAI;AAChB,SAAKF,mBAAL,CAAyBG,IAAzB,CAA8BD,CAA9B;AACH;;AANa;;AAQlBH,WAAW,CAACjJ,IAAZ;AAAA,mBAAwGiJ,WAAxG;AAAA;;AACAA,WAAW,CAACK,KAAZ,kBApTqGpT,EAoTrG;AAAA,SAA4G+S,WAA5G;AAAA,WAA4GA,WAA5G;AAAA,cAAqI;AAArI;;AACA;AAAA,qDArTqG/S,EAqTrG,mBAA2F+S,WAA3F,EAAoH,CAAC;AACzGrM,IAAAA,IAAI,EAAEhG,UADmG;AAEzGwJ,IAAAA,IAAI,EAAE,CAAC;AACCmJ,MAAAA,UAAU,EAAE;AADb,KAAD;AAFmG,GAAD,CAApH;AAAA;;AAOA,IAAIC,IAAI,GAAI;AACZ;AACA,CAFA;AAIA,IAAIC,MAAM,GAAI;AACd;AACA,CAFA;AAIA,IAAIC,IAAI,GAAI;AACZ;AACA,CAFA;AAIA,IAAIC,SAAS,GAAI;AACjB;AACA,CAFA;AAIA,IAAIC,MAAM,GAAI;AACd;AACA,CAFA;AAIA,IAAIC,WAAW,GAAI;AACnB;AACA,CAFA;AAIA,IAAIC,UAAU,GAAI;AAClB;AACA,CAFA;AAIA,IAAIC,KAAK,GAAI;AACb;AACA,CAFA;AAIA,IAAI/F,IAAI,GAAI;AACZ;AACA,CAFA;AAIA,IAAIgG,MAAM,GAAI;AACd;AACA,CAFA;AAIA,IAAI7G,KAAK,GAAI;AACb;AACA,CAFA;AAIA,IAAI8G,SAAS,GAAI;AACjB;AACA,CAFA;AAIA,IAAIC,WAAW,GAAI;AACnB;AACA,CAFA;AAIA,IAAIC,UAAU,GAAI;AAClB;AACA,CAFA;AAIA,IAAIC,YAAY,GAAI;AACpB;AACA,CAFA;AAIA,IAAIC,SAAS,GAAI;AACjB;AACA,CAFA;AAIA,IAAIC,SAAS,GAAI;AACjB;AACA,CAFA,C,CAIA;;AACA,MAAMC,mBAAmB,GAAG,EAA5B;AACA,MAAMC,kBAAkB,GAAG,EAA3B;AACA,MAAMC,KAAK,GAAG;AACVjB,EAAAA,IADU;AAEVC,EAAAA,MAFU;AAGVC,EAAAA,IAHU;AAIVC,EAAAA,SAJU;AAKVC,EAAAA,MALU;AAMVc,EAAAA,YAAY,EAAEb,WANJ;AAOVc,EAAAA,WAAW,EAAEb,UAPH;AAQVc,EAAAA,UAAU,EAAEb,KARF;AASV/F,EAAAA,IATU;AAUVgG,EAAAA,MAVU;AAWV7G,EAAAA,KAXU;AAYV0H,EAAAA,UAAU,EAAEZ,SAZF;AAaVa,EAAAA,YAAY,EAAEZ,WAbJ;AAcVa,EAAAA,WAAW,EAAEZ,UAdH;AAeVa,EAAAA,aAAa,EAAEZ,YAfL;AAgBVa,EAAAA,UAAU,EAAEZ,SAhBF;AAiBVa,EAAAA,UAAU,EAAEZ;AAjBF,CAAd;;AAmBA,MAAMa,IAAN,CAAW;AACG,SAAHxJ,GAAG,CAACyJ,IAAD,EAAOC,IAAI,GAAG,MAAd,EAAsB;AAC5B,UAAMC,IAAI,GAAGb,KAAK,CAACW,IAAD,CAAL,IAAe,eAA5B;AACA,WAAQ;AAChB;AACA;AACA;AACA,eAAeC,IAAK;AACpB,iBAAiBd,mBAAoB;AACrC,gBAAgBC,kBAAmB;AACnC;AACA,UAAUc,IAAK;AACf;AACA,KAVQ;AAWH;;AACa,SAAPC,OAAO,CAACH,IAAD,EAAO;AACjB,UAAME,IAAI,GAAGb,KAAK,CAACW,IAAD,CAAL,IAAe,eAA5B;AACA,WAAOE,IAAP;AACH;;AAlBM;;AAqBX,MAAME,IAAN,CAAW;AACP3N,EAAAA,WAAW,CAACuN,IAAD,EAAO;AACd,SAAKA,IAAL,GAAYA,IAAZ;AACH;;AACD9P,EAAAA,KAAK,GAAG;AACJ,WAAO,CAACF,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAExI,QAAAA;AAAF,UAAa6C,KAAnB;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACC,KAAP,CAAa,KAAK4S,IAAlB,CAAb;;AACA,UAAI,CAACxO,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,aAAOpD,SAAS,CAACoD,IAAD,CAAT,CAAgBxB,KAAhB,EAAuB2F,QAAvB,CAAP;AACH,KAPD;AAQH;;AACD0K,EAAAA,MAAM,GAAG;AACL,WAAO,CAACrQ,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAExI,QAAAA;AAAF,UAAa6C,KAAnB;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACC,KAAP,CAAa,KAAK4S,IAAlB,CAAb;;AACA,UAAI,CAACxO,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,aAAO/D,UAAU,CAAC+D,IAAD,CAAV,CAAiBxB,KAAjB,EAAwB2F,QAAxB,CAAP;AACH,KAPD;AAQH;;AACD2K,EAAAA,QAAQ,CAACtQ,KAAD,EAAQ;AACZ,UAAM;AAAE7C,MAAAA;AAAF,QAAa6C,KAAnB;AACA,UAAMwB,IAAI,GAAGrE,MAAM,CAACC,KAAP,CAAa,KAAK4S,IAAlB,CAAb;;AACA,QAAI,CAACxO,IAAL,EAAW;AACP,aAAO,KAAP;AACH;;AACD,WAAOjD,YAAY,CAACyB,KAAD,EAAQwB,IAAR,CAAnB;AACH;;AACD+O,EAAAA,UAAU,CAACvQ,KAAD,EAAQ;AACd,WAAO,KAAKqQ,MAAL,GAAcrQ,KAAd,CAAP;AACH;;AAlCM;;AAqCX,MAAMwQ,SAAN,CAAgB;AACZH,EAAAA,MAAM,GAAG;AACL,WAAO,CAACrQ,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAExI,QAAAA;AAAF,UAAa6C,KAAnB;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACE,KAAP,CAAamS,UAA1B;;AACA,UAAI,CAAChO,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,UAAI,KAAK8O,QAAL,CAActQ,KAAd,CAAJ,EAA0B;AACtB,eAAOtC,IAAI,CAACsC,KAAD,EAAQ2F,QAAR,CAAX;AACH;;AACD,aAAOhI,MAAM,CAAC6D,IAAD,CAAN,CAAaxB,KAAb,EAAoB2F,QAApB,CAAP;AACH,KAVD;AAWH;;AACD2K,EAAAA,QAAQ,CAACtQ,KAAD,EAAQ;AACZ,UAAM;AAAE7C,MAAAA;AAAF,QAAa6C,KAAnB;AACA,UAAMwB,IAAI,GAAGrE,MAAM,CAACE,KAAP,CAAamS,UAA1B;;AACA,QAAI,CAAChO,IAAL,EAAW;AACP,aAAO,KAAP;AACH;;AACD,WAAOhD,YAAY,CAACwB,KAAD,EAAQwB,IAAR,CAAnB;AACH;;AACD+O,EAAAA,UAAU,CAACvQ,KAAD,EAAQ;AACd,WAAO,KAAKqQ,MAAL,GAAcrQ,KAAd,CAAP;AACH;;AAxBW;;AA2BhB,MAAMyQ,QAAN,CAAe;AACXhO,EAAAA,WAAW,CAACiO,YAAY,GAAG,KAAhB,EAAuB;AAC9B,SAAKA,YAAL,GAAoB,KAApB;AACA,SAAKA,YAAL,GAAoBA,YAApB;AACH;;AACDC,EAAAA,OAAO,CAACxT,MAAD,EAAS;AACZ,WAAO,KAAKuT,YAAL,GAAoBvT,MAAM,CAACE,KAAP,CAAa,aAAb,CAApB,GAAkDF,MAAM,CAACE,KAAP,CAAa,cAAb,CAAzD;AACH;;AACDgT,EAAAA,MAAM,GAAG;AACL,WAAO,CAACrQ,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAExI,QAAAA;AAAF,UAAa6C,KAAnB;AACA,YAAMwB,IAAI,GAAG,KAAKmP,OAAL,CAAaxT,MAAb,CAAb;;AACA,UAAI,CAACqE,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,UAAI,KAAK8O,QAAL,CAActQ,KAAd,CAAJ,EAA0B;AACtB,eAAOpB,YAAY,CAACzB,MAAM,CAACE,KAAP,CAAauT,SAAd,CAAZ,CAAqC5Q,KAArC,EAA4C2F,QAA5C,CAAP;AACH;;AACD,aAAO9G,UAAU,CAAC2C,IAAD,CAAV,CAAiBxB,KAAjB,EAAwB2F,QAAxB,CAAP;AACH,KAVD;AAWH;;AACD2K,EAAAA,QAAQ,CAACtQ,KAAD,EAAQ;AACZ,UAAM;AAAE7C,MAAAA;AAAF,QAAa6C,KAAnB;AACA,UAAMwB,IAAI,GAAG,KAAKmP,OAAL,CAAaxT,MAAb,CAAb;;AACA,QAAI,CAACqE,IAAL,EAAW;AACP,aAAO,KAAP;AACH;;AACD,WAAOhD,YAAY,CAACwB,KAAD,EAAQwB,IAAR,CAAnB;AACH;;AACD+O,EAAAA,UAAU,CAACvQ,KAAD,EAAQ;AACd,WAAO,KAAKqQ,MAAL,GAAcrQ,KAAd,CAAP;AACH;;AA/BU;;AAkCf,MAAM6Q,OAAN,CAAc;AACVpO,EAAAA,WAAW,CAACqO,KAAD,EAAQ;AACf,SAAKA,KAAL,GAAaA,KAAb;AACH;;AACD5Q,EAAAA,KAAK,GAAG;AACJ,WAAO,CAACF,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAExI,QAAAA;AAAF,UAAa6C,KAAnB;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACE,KAAP,CAAa0T,OAA1B;;AACA,UAAI,CAACvP,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,aAAO5D,YAAY,CAAC4D,IAAD,CAAZ,CAAmBxB,KAAnB,EAA0B2F,QAA1B,CAAP;AACH,KAPD;AAQH;;AACD0K,EAAAA,MAAM,GAAG;AACL,WAAO,CAACrQ,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,UAAItF,EAAJ;;AACA,YAAM;AAAElD,QAAAA,MAAF;AAAU6T,QAAAA,SAAV;AAAqB/P,QAAAA;AAArB,UAA6BjB,KAAnC;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACE,KAAP,CAAa0T,OAA1B;;AACA,UAAI,CAACvP,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,YAAMyP,OAAO,GAAGD,SAAS,CAACE,KAAV,CAAgBC,MAAhB,CAAuB,CAAvB,CAAhB;AACA,YAAM7P,IAAI,GAAGL,GAAG,CAACmQ,MAAJ,CAAWH,OAAX,CAAb;AACA,YAAMpP,KAAK,GAAG,CAACxB,EAAE,GAAGiB,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACO,KAAvD,MAAkE,IAAlE,IAA0ExB,EAAE,KAAK,KAAK,CAAtF,GAA0FA,EAA1F,GAA+F,EAA7G;;AACA,UAAI,KAAKiQ,QAAL,CAActQ,KAAd,CAAJ,EAA0B;AACtB,eAAOpC,YAAY,CAACT,MAAM,CAACE,KAAP,CAAagU,SAAd,EAAyBxP,KAAzB,CAAZ,CAA4C7B,KAA5C,EAAmD2F,QAAnD,CAAP;AACH;;AACD,aAAO/H,YAAY,CAAC4D,IAAD,EAAO8P,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB1P,KAAlB,CAAd,EAAwC;AAAEiP,QAAAA,KAAK,EAAE,KAAKA;AAAd,OAAxC,CAAP,CAAZ,CAAmF9Q,KAAnF,EAA0F2F,QAA1F,CAAP;AACH,KAdD;AAeH;;AACD2K,EAAAA,QAAQ,CAACtQ,KAAD,EAAQ;AACZ,UAAM;AAAE7C,MAAAA;AAAF,QAAa6C,KAAnB;AACA,UAAMwR,gBAAgB,GAAG/S,iBAAiB,CAACuB,KAAD,CAA1C;AACA,UAAMwB,IAAI,GAAGrE,MAAM,CAACE,KAAP,CAAa0T,OAA1B;;AACA,QAAI,CAACvP,IAAL,EAAW;AACP,aAAO,KAAP;AACH;;AACD,UAAMiQ,cAAc,GAAG,CACnBjQ,IADmB,EAEnBrE,MAAM,CAACE,KAAP,CAAayD,IAFM,EAGnB3D,MAAM,CAACE,KAAP,CAAamS,UAHM,CAAvB,CAPY,CAYZ;AACA;;AACA,UAAMnS,KAAK,GAAGmU,gBAAgB,CAACE,MAAjB,CAAwBpQ,IAAI,IAAI;AAC1C,aAAOmQ,cAAc,CAACE,QAAf,CAAwBrQ,IAAI,CAACE,IAA7B,CAAP;AACH,KAFa,CAAd;AAGA,UAAMoQ,UAAU,GAAGvU,KAAK,CAACwU,IAAN,CAAYvQ,IAAD,IAAU;AACpC,aAAOA,IAAI,CAACO,KAAL,CAAW,OAAX,MAAwB,KAAKiP,KAApC;AACH,KAFkB,CAAnB;AAGA,WAAOgB,OAAO,CAACF,UAAD,CAAd;AACH;;AACDrB,EAAAA,UAAU,CAACvQ,KAAD,EAAQ;AACd,WAAO,KAAKqQ,MAAL,GAAcrQ,KAAd,CAAP;AACH;;AAvDS;;AA0Dd,MAAM+R,SAAN,CAAgB;AACZtP,EAAAA,WAAW,CAACuP,KAAD,EAAQ;AACf,SAAKA,KAAL,GAAaA,KAAb;AACH;;AACD3B,EAAAA,MAAM,GAAG;AACL,WAAO,CAACrQ,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAE1E,QAAAA,GAAF;AAAO+P,QAAAA,SAAP;AAAkB7Q,QAAAA,EAAlB;AAAsBhD,QAAAA;AAAtB,UAAiC6C,KAAvC;AACA,YAAM;AAAEiS,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAelB,SAArB;AACA,UAAImB,UAAU,GAAG,KAAjB;AACAlR,MAAAA,GAAG,CAACmR,YAAJ,CAAiBH,IAAjB,EAAuBC,EAAvB,EAA2B,CAAC5Q,IAAD,EAAOC,GAAP,KAAe;AACtC,cAAM8Q,QAAQ,GAAG/Q,IAAI,CAACE,IAAtB;;AACA,YAAI,CAACrE,MAAM,CAACE,KAAP,CAAagU,SAAd,EAAyBlU,MAAM,CAACE,KAAP,CAAa0T,OAAtC,EAA+CY,QAA/C,CAAwDU,QAAxD,CAAJ,EAAuE;AACnEF,UAAAA,UAAU,GAAG,IAAb;AACAhS,UAAAA,EAAE,CAAC0F,aAAH,CAAiBtE,GAAjB,EAAsB8Q,QAAtB,EAAgCf,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBjQ,IAAI,CAACO,KAAvB,CAAd,EAA6C;AAAEmQ,YAAAA,KAAK,EAAE,KAAKA;AAAd,WAA7C,CAAhC;AACH;;AACD,eAAO,IAAP;AACH,OAPD;;AAQA,UAAI,CAACG,UAAL,EAAiB;AACb,eAAO,KAAP;AACH;;AACD,UAAIhS,EAAE,CAACmS,UAAP,EAAmB;AACf3M,QAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACxF,EAAD,CAA5D;AACH;;AACD,aAAO,IAAP;AACH,KAnBD;AAoBH;;AACDmQ,EAAAA,QAAQ,CAACtQ,KAAD,EAAQ;AACZ,UAAM3C,KAAK,GAAGoB,iBAAiB,CAACuB,KAAD,CAA/B;AACA,UAAMuS,MAAM,GAAGlV,KAAK,CAACwU,IAAN,CAAYvQ,IAAD,IAAU;AAChC,aAAOA,IAAI,CAACO,KAAL,CAAW,OAAX,MAAwB,KAAKmQ,KAApC;AACH,KAFc,CAAf;AAGA,WAAOF,OAAO,CAACS,MAAD,CAAd;AACH;;AACDhC,EAAAA,UAAU,CAACvQ,KAAD,EAAQ;AACd,WAAO,KAAKqQ,MAAL,GAAcrQ,KAAd,CAAP;AACH;;AAnCW;;AAsChB,MAAMwS,cAAc,GAAG;AACnBC,EAAAA,MAAM,EAAE;AADW,CAAvB;;AAGA,MAAMC,MAAN,CAAa;AACTrL,EAAAA,MAAM,CAACxF,KAAD,EAAQ;AACV,WAAO,CAAC7B,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAExI,QAAAA,MAAF;AAAU6T,QAAAA;AAAV,UAAwBhR,KAA9B;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACC,KAAP,CAAawL,IAA1B;;AACA,UAAI,CAACpH,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,UAAIwP,SAAS,CAAC5P,KAAd,EAAqB;AACjB,eAAO,KAAP;AACH;;AACD,aAAO3D,UAAU,CAAC+D,IAAD,EAAOK,KAAP,CAAV,CAAwB7B,KAAxB,EAA+B2F,QAA/B,CAAP;AACH,KAVD;AAWH;;AACDgN,EAAAA,MAAM,CAAC7R,IAAD,EAAOe,KAAP,EAAc;AAChB,WAAO,CAAC7B,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,UAAItF,EAAJ,EAAQuS,EAAR;;AACA,YAAM;AAAEzV,QAAAA,MAAF;AAAUgD,QAAAA;AAAV,UAAiBH,KAAvB;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACC,KAAP,CAAawL,IAA1B;;AACA,UAAI,CAACpH,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,YAAMqR,SAAS,GAAG;AACd5J,QAAAA,IAAI,EAAEpH,KAAK,CAACoH,IADE;AAEdtG,QAAAA,KAAK,EAAE,CAACtC,EAAE,GAAGwB,KAAK,CAACc,KAAZ,MAAuB,IAAvB,IAA+BtC,EAAE,KAAK,KAAK,CAA3C,GAA+CA,EAA/C,GAAoDS,IAF7C;AAGdgS,QAAAA,MAAM,EAAE,CAACF,EAAE,GAAG/Q,KAAK,CAACiR,MAAZ,MAAwB,IAAxB,IAAgCF,EAAE,KAAK,KAAK,CAA5C,GAAgDA,EAAhD,GAAqD;AAH/C,OAAlB;AAKA,YAAMtR,IAAI,GAAGnE,MAAM,CAAC2D,IAAP,CAAYA,IAAZ,EAAkB,CAAC3D,MAAM,CAACC,KAAP,CAAawL,IAAb,CAAkB5G,MAAlB,CAAyB6Q,SAAzB,CAAD,CAAlB,CAAb;AACA1S,MAAAA,EAAE,CAAC4S,oBAAH,CAAwBzR,IAAxB,EAA8B,KAA9B,EACK0R,cADL;;AAEA,UAAI7S,EAAE,CAACmS,UAAP,EAAmB;AACf3M,QAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACxF,EAAD,CAA5D;AACA,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH,KApBD;AAqBH;;AACDmQ,EAAAA,QAAQ,CAACtQ,KAAD,EAAQiT,OAAO,GAAGT,cAAlB,EAAkC;AACtC,QAAIS,OAAO,CAACR,MAAZ,EAAoB;AAChB,aAAO,IAAP;AACH;;AACD,UAAM;AAAEtV,MAAAA;AAAF,QAAa6C,KAAnB;AACA,UAAMwB,IAAI,GAAGrE,MAAM,CAACC,KAAP,CAAawL,IAA1B;;AACA,QAAI,CAACpH,IAAL,EAAW;AACP,aAAO,KAAP;AACH;;AACD,WAAOjD,YAAY,CAACyB,KAAD,EAAQwB,IAAR,CAAnB;AACH;;AACD0R,EAAAA,MAAM,CAAClT,KAAD,EAAQ2F,QAAR,EAAkB;AACpB,WAAOtH,UAAU,GAAG2B,KAAH,EAAU2F,QAAV,CAAjB;AACH;;AACD4K,EAAAA,UAAU,CAACvQ,KAAD,EAAQ;AACd,UAAMmT,SAAS,GAAG;AACdlK,MAAAA,IAAI,EAAE;AADQ,KAAlB;AAGA,WAAO,KAAK0J,MAAL,CAAY,MAAZ,EAAoBQ,SAApB,EAA+BnT,KAA/B,KAAyC,KAAKqH,MAAL,CAAY8L,SAAZ,EAAuBnT,KAAvB,CAAhD;AACH;;AAxDQ;;AA2Db,MAAMoT,OAAN,CAAc;AACVT,EAAAA,MAAM,CAACvN,GAAD,EAAMvD,KAAN,EAAa;AACf,WAAO,CAAC7B,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAExI,QAAAA,MAAF;AAAUgD,QAAAA,EAAV;AAAc6Q,QAAAA;AAAd,UAA4BhR,KAAlC;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACE,KAAP,CAAa0K,KAA1B;;AACA,UAAI,CAACvG,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,YAAM6R,UAAU,GAAG/B,MAAM,CAACC,MAAP,CAAc;AAAE3N,QAAAA,KAAK,EAAE,IAAT;AAAewB,QAAAA;AAAf,OAAd,EAAoCvD,KAApC,CAAnB;;AACA,UAAI,CAACwR,UAAU,CAACzP,KAAZ,IAAqBoN,SAAS,YAAYxU,aAA1C,IAA2DwU,SAAS,CAAC1P,IAAV,CAAeE,IAAf,KAAwBA,IAAvF,EAA6F;AACzF6R,QAAAA,UAAU,CAACzP,KAAX,GAAmBoN,SAAS,CAAC1P,IAAV,CAAeO,KAAf,CAAqB,OAArB,CAAnB;AACH;;AACD1B,MAAAA,EAAE,CAAC4S,oBAAH,CAAwBvR,IAAI,CAAC8R,aAAL,CAAmBD,UAAnB,CAAxB;AACA,YAAMpN,WAAW,GAAG9F,EAAE,CAACc,GAAH,CAAOiF,OAAP,CAAe/F,EAAE,CAAC6Q,SAAH,CAAauC,MAAb,GAAsBpT,EAAE,CAAC6Q,SAAH,CAAawC,OAAb,CAAqBC,UAArB,CAAgC7R,QAArE,CAApB;AACAzB,MAAAA,EAAE,CACGiG,YADL,CACkB,IAAI5J,aAAJ,CAAkByJ,WAAlB,CADlB,EAEK+M,cAFL;;AAGA,UAAI7S,EAAE,CAACmS,UAAP,EAAmB;AACf3M,QAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACxF,EAAD,CAA5D;AACA,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH,KApBD;AAqBH;;AACDmQ,EAAAA,QAAQ,CAACtQ,KAAD,EAAQ;AACZ,UAAM;AAAEgR,MAAAA;AAAF,QAAgBhR,KAAtB;;AACA,QAAIgR,SAAS,YAAYxU,aAAzB,EAAwC;AACpC,aAAOwU,SAAS,CAAC1P,IAAV,CAAeE,IAAf,CAAoBwO,IAApB,KAA6B,OAApC;AACH;;AACD,WAAO,KAAP;AACH;;AA9BS;;AAiCd,MAAM0D,WAAN,CAAkB;AACdjR,EAAAA,WAAW,CAACuN,IAAD,EAAO;AACd,SAAKA,IAAL,GAAYA,IAAZ;AACH;;AACD9P,EAAAA,KAAK,CAAC2B,KAAD,EAAQ;AACT,WAAO,CAAC7B,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAExI,QAAAA,MAAF;AAAU6T,QAAAA,SAAV;AAAqB/P,QAAAA;AAArB,UAA6BjB,KAAnC;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACC,KAAP,CAAa,KAAK4S,IAAlB,CAAb;;AACA,UAAI,CAACxO,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,YAAM;AAAEyQ,QAAAA,IAAF;AAAQC,QAAAA,EAAR;AAAY9Q,QAAAA;AAAZ,UAAsB4P,SAA5B;;AACA,UAAI,CAAC5P,KAAD,IAAW6Q,IAAI,GAAG,CAAP,KAAaC,EAA5B,EAAiC;AAC7B,cAAM5Q,IAAI,GAAGL,GAAG,CAACmQ,MAAJ,CAAWa,IAAX,CAAb;;AACA,YAAI,CAAC3Q,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACqS,MAAlD,KAA6D,CAACrS,IAAI,CAACgH,MAAnE,IAA6EhH,IAAI,CAACsS,MAAtF,EAA8F;AAC1F;AACA,iBAAO,KAAP;AACH;AACJ;;AACD,aAAOxV,SAAS,CAACoD,IAAD,EAAOK,KAAP,CAAT,CAAuB7B,KAAvB,EAA8B2F,QAA9B,CAAP;AACH,KAfD;AAgBH;;AACD2K,EAAAA,QAAQ,CAACtQ,KAAD,EAAQ;AACZ,UAAM;AAAE7C,MAAAA;AAAF,QAAa6C,KAAnB;AACA,UAAMwB,IAAI,GAAGrE,MAAM,CAACC,KAAP,CAAa,KAAK4S,IAAlB,CAAb;;AACA,QAAI,CAACxO,IAAL,EAAW;AACP,aAAO,KAAP;AACH;;AACD,WAAOjD,YAAY,CAACyB,KAAD,EAAQwB,IAAR,CAAnB;AACH;;AACDqS,EAAAA,eAAe,CAAC7T,KAAD,EAAQ;AACnB,QAAI,CAAC,KAAKsQ,QAAL,CAActQ,KAAd,CAAL,EAA2B;AACvB,aAAO,EAAP;AACH;;AACD,UAAM;AAAE7C,MAAAA;AAAF,QAAa6C,KAAnB;AACA,UAAM5C,KAAK,GAAGsB,iBAAiB,CAACsB,KAAD,CAA/B;AACA,UAAM8T,MAAM,GAAG1W,KAAK,CACfsU,MADU,CACH1I,IAAI,IAAIA,IAAI,CAACxH,IAAL,KAAcrE,MAAM,CAACC,KAAP,CAAa,KAAK4S,IAAlB,CADnB,EAEV+D,GAFU,CAEN/K,IAAI,IAAIA,IAAI,CAACnH,KAAL,CAAW,OAAX,CAFF,EAGV6P,MAHU,CAGHI,OAHG,CAAf;AAIA,WAAOgC,MAAP;AACH;;AACDZ,EAAAA,MAAM,GAAG;AACL,WAAO,CAAClT,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,YAAM;AAAExI,QAAAA;AAAF,UAAa6C,KAAnB;AACA,YAAMwB,IAAI,GAAGrE,MAAM,CAACC,KAAP,CAAa,KAAK4S,IAAlB,CAAb;;AACA,UAAI,CAACxO,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,aAAOlD,UAAU,CAACkD,IAAD,CAAV,CAAiBxB,KAAjB,EAAwB2F,QAAxB,CAAP;AACH,KAPD;AAQH;;AACD4K,EAAAA,UAAU,CAACvQ,KAAD,EAAQ;AACd,UAAM6B,KAAK,GAAG,KAAKmO,IAAL,KAAc,YAAd,GAA6B;AAAEgE,MAAAA,KAAK,EAAE;AAAT,KAA7B,GAA6C;AAAEC,MAAAA,eAAe,EAAE;AAAnB,KAA3D;AACA,WAAO,KAAK/T,KAAL,CAAW2B,KAAX,EAAkB7B,KAAlB,CAAP;AACH;;AAvDa;;AA0DlB,MAAMkU,MAAM,GAAG,IAAI9D,IAAJ,CAAS,QAAT,CAAf;AACA,MAAM+D,EAAE,GAAG,IAAI/D,IAAJ,CAAS,IAAT,CAAX;AACA,MAAMgE,IAAI,GAAG,IAAIhE,IAAJ,CAAS,MAAT,CAAb;AACA,MAAMiE,SAAS,GAAG,IAAIjE,IAAJ,CAAS,GAAT,CAAlB;AACA,MAAMkE,MAAM,GAAG,IAAIlE,IAAJ,CAAS,GAAT,CAAf;AACA,MAAMmE,UAAU,GAAG,IAAI/D,SAAJ,EAAnB;AACA,MAAMgE,EAAE,GAAG,IAAI/D,QAAJ,CAAa,IAAb,CAAX;AACA,MAAMgE,EAAE,GAAG,IAAIhE,QAAJ,CAAa,KAAb,CAAX;AACA,MAAMiE,EAAE,GAAG,IAAI7D,OAAJ,CAAY,CAAZ,CAAX;AACA,MAAM8D,EAAE,GAAG,IAAI9D,OAAJ,CAAY,CAAZ,CAAX;AACA,MAAM+D,EAAE,GAAG,IAAI/D,OAAJ,CAAY,CAAZ,CAAX;AACA,MAAMgE,EAAE,GAAG,IAAIhE,OAAJ,CAAY,CAAZ,CAAX;AACA,MAAMiE,EAAE,GAAG,IAAIjE,OAAJ,CAAY,CAAZ,CAAX;AACA,MAAMkE,EAAE,GAAG,IAAIlE,OAAJ,CAAY,CAAZ,CAAX;AACA,MAAMmE,UAAU,GAAG,IAAIjD,SAAJ,CAAc,MAAd,CAAnB;AACA,MAAMkD,YAAY,GAAG,IAAIlD,SAAJ,CAAc,QAAd,CAArB;AACA,MAAMmD,WAAW,GAAG,IAAInD,SAAJ,CAAc,OAAd,CAApB;AACA,MAAMoD,aAAa,GAAG,IAAIpD,SAAJ,CAAc,SAAd,CAAtB;AACA,MAAMqD,IAAI,GAAG,IAAI1C,MAAJ,EAAb;AACA,MAAM2C,KAAK,GAAG,IAAIjC,OAAJ,EAAd;AACA,MAAMkC,UAAU,GAAG,IAAI5B,WAAJ,CAAgB,YAAhB,CAAnB;AACA,MAAM6B,qBAAqB,GAAG,IAAI7B,WAAJ,CAAgB,uBAAhB,CAA9B;AAEA,MAAM8B,cAAc,GAAG;AACnBpH,EAAAA,IAAI,EAAE8F,MADa;AAEnB7F,EAAAA,MAAM,EAAE8F,EAFW;AAGnB7F,EAAAA,IAAI,EAAE8F,IAHa;AAInB7F,EAAAA,SAAS,EAAE8F,SAJQ;AAKnB7F,EAAAA,MAAM,EAAE8F,MALW;AAMnB9E,EAAAA,UAAU,EAAE+E,UANO;AAOnBhF,EAAAA,WAAW,EAAEiF,EAPM;AAQnBlF,EAAAA,YAAY,EAAEmF,EARK;AASnBgB,EAAAA,EAAE,EAAEf,EATe;AAUnBgB,EAAAA,EAAE,EAAEf,EAVe;AAWnBgB,EAAAA,EAAE,EAAEf,EAXe;AAYnBgB,EAAAA,EAAE,EAAEf,EAZe;AAanBgB,EAAAA,EAAE,EAAEf,EAbe;AAcnBgB,EAAAA,EAAE,EAAEf,EAde;AAenBtF,EAAAA,UAAU,EAAEuF,UAfO;AAgBnBtF,EAAAA,YAAY,EAAEuF,YAhBK;AAiBnBtF,EAAAA,WAAW,EAAEuF,WAjBM;AAkBnBtF,EAAAA,aAAa,EAAEuF;AAlBI,CAAvB;AAoBA,MAAMY,IAAI,GAAGX,IAAb;AACA,MAAMY,KAAK,GAAGX,KAAd;AACA,MAAMY,SAAS,GAAGX,UAAlB;AACA,MAAMY,mBAAmB,GAAGX,qBAA5B;AAEA,MAAMY,QAAQ,GAAG;AACb;AACA/H,EAAAA,IAAI,EAAE,MAFO;AAGbC,EAAAA,MAAM,EAAE,QAHK;AAIbC,EAAAA,IAAI,EAAE,MAJO;AAKbC,EAAAA,SAAS,EAAE,WALE;AAMbC,EAAAA,MAAM,EAAE,QANK;AAObgB,EAAAA,UAAU,EAAE,YAPC;AAQbD,EAAAA,WAAW,EAAE,aARA;AASbD,EAAAA,YAAY,EAAE,cATD;AAUbyB,EAAAA,OAAO,EAAE,SAVI;AAWb0E,EAAAA,EAAE,EAAE,UAXS;AAYbC,EAAAA,EAAE,EAAE,UAZS;AAabC,EAAAA,EAAE,EAAE,UAbS;AAcbC,EAAAA,EAAE,EAAE,UAdS;AAebC,EAAAA,EAAE,EAAE,UAfS;AAgBbC,EAAAA,EAAE,EAAE,UAhBS;AAiBbrG,EAAAA,UAAU,EAAE,YAjBC;AAkBbC,EAAAA,YAAY,EAAE,cAlBD;AAmBbC,EAAAA,WAAW,EAAE,aAnBA;AAoBbC,EAAAA,aAAa,EAAE,SApBF;AAqBbC,EAAAA,UAAU,EAAE,YArBC;AAsBbuG,EAAAA,gBAAgB,EAAE,kBAtBL;AAuBbC,EAAAA,UAAU,EAAE,aAvBC;AAwBbhY,EAAAA,UAAU,EAAE,aAxBC;AAyBbiY,EAAAA,WAAW,EAAE,cAzBA;AA0Bb;AACAC,EAAAA,GAAG,EAAE,KA3BQ;AA4BbzV,EAAAA,IAAI,EAAE,MA5BO;AA6Bb0V,EAAAA,YAAY,EAAE,iBA7BD;AA8Bb7D,EAAAA,MAAM,EAAE,QA9BK;AA+Bb8D,EAAAA,OAAO,EAAE,UA/BI;AAgCb9T,EAAAA,KAAK,EAAE,OAhCM;AAiCbuQ,EAAAA,MAAM,EAAE;AAjCK,CAAjB;;AAmCA,MAAMwD,MAAN,CAAa;AACTjU,EAAAA,WAAW,CAACkU,SAAS,GAAG,EAAb,EAAiB;AACxB,SAAKC,MAAL,GAAcT,QAAd;;AACA,SAAK5P,GAAL,GAAYxG,GAAD,IAAS;AAChB,UAAIM,EAAJ;;AACA,aAAO,CAACA,EAAE,GAAG,KAAKuW,MAAL,CAAY7W,GAAZ,CAAN,MAA4B,IAA5B,IAAoCM,EAAE,KAAK,KAAK,CAAhD,GAAoDA,EAApD,GAAyD,EAAhE;AACH,KAHD;;AAIA,SAAKuW,MAAL,GAActF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB4E,QAAlB,EAA4BQ,SAA5B,CAAd;AACH;;AARQ;;AAWb,MAAME,sBAAN,CAA6B;AACzBpU,EAAAA,WAAW,GAAG;AACV,SAAKmU,MAAL,GAAc,EAAd;AACH;;AAHwB;;AAK7BC,sBAAsB,CAACjS,IAAvB;AAAA,mBAAmHiS,sBAAnH;AAAA;;AACAA,sBAAsB,CAAC3I,KAAvB,kBA12BqGpT,EA02BrG;AAAA,SAAuH+b,sBAAvH;AAAA,WAAuHA,sBAAvH;AAAA,cAA2J;AAA3J;;AACA;AAAA,qDA32BqG/b,EA22BrG,mBAA2F+b,sBAA3F,EAA+H,CAAC;AACpHrV,IAAAA,IAAI,EAAEhG,UAD8G;AAEpHwJ,IAAAA,IAAI,EAAE,CAAC;AACCmJ,MAAAA,UAAU,EAAE;AADb,KAAD;AAF8G,GAAD,CAA/H;AAAA;;AAMA,MAAM2I,gBAAN,CAAuB;AACnBrU,EAAAA,WAAW,CAACsU,MAAD,EAAS;AAChB,SAAKA,MAAL,GAAcA,MAAd;AACH;;AACS,MAANH,MAAM,GAAG;AACT,WAAO,IAAIF,MAAJ,CAAW,KAAKK,MAAL,CAAYH,MAAvB,CAAP;AACH;;AANkB;;AAQvBE,gBAAgB,CAAClS,IAAjB;AAAA,mBAA6GkS,gBAA7G,EAz3BqGhc,EAy3BrG,UAA+I+b,sBAA/I;AAAA;;AACAC,gBAAgB,CAAC5I,KAAjB,kBA13BqGpT,EA03BrG;AAAA,SAAiHgc,gBAAjH;AAAA,WAAiHA,gBAAjH;AAAA,cAA+I;AAA/I;;AACA;AAAA,qDA33BqGhc,EA23BrG,mBAA2Fgc,gBAA3F,EAAyH,CAAC;AAC9GtV,IAAAA,IAAI,EAAEhG,UADwG;AAE9GwJ,IAAAA,IAAI,EAAE,CAAC;AACCmJ,MAAAA,UAAU,EAAE;AADb,KAAD;AAFwG,GAAD,CAAzH,EAK4B,YAAY;AAChC,WAAO,CAAC;AAAE3M,MAAAA,IAAI,EAAEqV,sBAAR;AAAgCG,MAAAA,UAAU,EAAE,CAAC;AACrCxV,QAAAA,IAAI,EAAE/F;AAD+B,OAAD;AAA5C,KAAD,CAAP;AAGH,GATL;AAAA;;AAUA,MAAMwb,uBAAuB,GAAIF,MAAD,IAAY;AACxC,MAAI1W,EAAJ;;AACA,SAAO;AACHuW,IAAAA,MAAM,EAAE,CAACvW,EAAE,GAAG0W,MAAM,CAACH,MAAb,MAAyB,IAAzB,IAAiCvW,EAAE,KAAK,KAAK,CAA7C,GAAiDA,EAAjD,GAAsD;AAD3D,GAAP;AAGH,CALD;;AAOA,MAAM6W,gBAAN,CAAuB;AACnBzU,EAAAA,WAAW,CAAC0U,SAAD,EAAY;AACnB,SAAKA,SAAL,GAAiBA,SAAjB;AACH;;AACDC,EAAAA,SAAS,CAACxM,KAAD,EAAQ;AACb,WAAO,KAAKuM,SAAL,CAAeE,uBAAf,CAAuCzM,KAAvC,CAAP;AACH;;AANkB;;AAQvBsM,gBAAgB,CAACtS,IAAjB;AAAA,mBAA6GsS,gBAA7G,EAp5BqGpc,EAo5BrG,mBAA+IkE,EAAE,CAACsY,YAAlJ;AAAA;;AACAJ,gBAAgB,CAACK,KAAjB,kBAr5BqGzc,EAq5BrG;AAAA;AAAA,QAA2Goc,gBAA3G;AAAA;AAAA;;AACA;AAAA,qDAt5BqGpc,EAs5BrG,mBAA2Foc,gBAA3F,EAAyH,CAAC;AAC9G1V,IAAAA,IAAI,EAAE9F,IADwG;AAE9GsJ,IAAAA,IAAI,EAAE,CAAC;AACCgL,MAAAA,IAAI,EAAE;AADP,KAAD;AAFwG,GAAD,CAAzH,EAK4B,YAAY;AAAE,WAAO,CAAC;AAAExO,MAAAA,IAAI,EAAExC,EAAE,CAACsY;AAAX,KAAD,CAAP;AAAqC,GAL/E;AAAA;;AAOA,MAAME,sBAAN,CAA6B;AACzB/U,EAAAA,WAAW,CAACgV,WAAD,EAAcC,WAAd,EAA2B;AAClC,SAAKD,WAAL,GAAmBA,WAAnB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKpH,QAAL,GAAgB,KAAhB;AACA,SAAKqH,QAAL,GAAgB,KAAhB;;AACA,SAAKtQ,MAAL,GAAetD,IAAD,IAAU;AACpB,YAAM;AAAE/D,QAAAA;AAAF,UAAY+D,IAAlB;AACA,YAAM6T,OAAO,GAAGpC,cAAc,CAAC,KAAKxF,IAAN,CAA9B;AACA,WAAKM,QAAL,GAAgBsH,OAAO,CAACtH,QAAR,CAAiBtQ,KAAjB,CAAhB;AACA,WAAK2X,QAAL,GAAgB,CAACC,OAAO,CAACrH,UAAR,CAAmBvQ,KAAnB,CAAjB;AACH,KALD;AAMH;;AACO,MAAJgQ,IAAI,GAAG;AACP,WAAO,KAAK6H,WAAZ;AACH;;AACDxH,EAAAA,MAAM,CAACrN,CAAD,EAAI;AACNA,IAAAA,CAAC,CAACE,cAAF;;AACA,QAAIF,CAAC,CAAC8U,MAAF,KAAa,CAAjB,EAAoB;AAChB;AACH;;AACD,UAAM;AAAE9X,MAAAA,KAAF;AAAS2F,MAAAA;AAAT,QAAsB,KAAKoS,UAAjC;AACA,UAAMH,OAAO,GAAGpC,cAAc,CAAC,KAAKxF,IAAN,CAA9B;AACA4H,IAAAA,OAAO,CAACvH,MAAR,GAAiBrQ,KAAjB,EAAwB2F,QAAxB;AACH;;AACDqS,EAAAA,QAAQ,CAAChI,IAAD,EAAO;AACX,WAAO,KAAKyH,WAAL,CAAiBb,MAAjB,CAAwBrQ,GAAxB,CAA4ByJ,IAA5B,CAAP;AACH;;AACDvD,EAAAA,QAAQ,GAAG;AACP,SAAKxC,IAAL,GAAY8F,IAAI,CAACxJ,GAAL,CAAS,KAAKyJ,IAAd,CAAZ;AACA,SAAK+H,UAAL,GAAkB,KAAKL,WAAL,CAAiBjM,MAAjB,CAAwB1H,IAA1C;AACA,SAAKkU,kBAAL,GAA0B,KAAKP,WAAL,CAAiBjM,MAAjB,CAAwBpE,MAAxB,CAA+BN,SAA/B,CAA0ChD,IAAD,IAAU;AACzE,WAAKsD,MAAL,CAAYtD,IAAZ;AACH,KAFyB,CAA1B;AAGH;;AACDmJ,EAAAA,WAAW,GAAG;AACV,SAAK+K,kBAAL,CAAwBtQ,WAAxB;AACH;;AArCwB;;AAuC7B6P,sBAAsB,CAAC5S,IAAvB;AAAA,mBAAmH4S,sBAAnH,EAp8BqG1c,EAo8BrG,mBAA2Jgc,gBAA3J,GAp8BqGhc,EAo8BrG,mBAAwL+S,WAAxL;AAAA;;AACA2J,sBAAsB,CAAC3S,IAAvB,kBAr8BqG/J,EAq8BrG;AAAA,QAAuG0c,sBAAvG;AAAA;AAAA;AAAA;AAAA;AAr8BqG1c,MAAAA,EAq8BrG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAr8BqGA,MAAAA,EAq8ByP,4BAA9V;AAr8BqGA,MAAAA,EAq8B+U;AAAA,eAAc,kBAAd;AAAA,QAApb;AAr8BqGA,MAAAA,EAq8BrG;AAr8BqGA,MAAAA,EAq8B8Y,eAAnf;AAAA;;AAAA;AAr8BqGA,MAAAA,EAq8B2S,yBAr8B3SA,EAq8B2S,8BAr8B3SA,EAq8B2S,iDAAhZ;AAAA;AAAA;AAAA,UAAqiBoc,gBAAriB;AAAA;AAAA;;AACA;AAAA,qDAt8BqGpc,EAs8BrG,mBAA2F0c,sBAA3F,EAA+H,CAAC;AACpHhW,IAAAA,IAAI,EAAExG,SAD8G;AAEpHgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,oBAAZ;AAAkCC,MAAAA,QAAQ,EAAE,+JAA5C;AAA6MC,MAAAA,MAAM,EAAE,CAAC,EAAD;AAArN,KAAD;AAF8G,GAAD,CAA/H,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAE3D,MAAAA,IAAI,EAAEsV;AAAR,KAAD,EAA6B;AAAEtV,MAAAA,IAAI,EAAEqM;AAAR,KAA7B,CAAP;AAA6D,GAHvG,EAGyH;AAAEgK,IAAAA,WAAW,EAAE,CAAC;AACzHrW,MAAAA,IAAI,EAAEvG;AADmH,KAAD,CAAf;AAEzGqV,IAAAA,QAAQ,EAAE,CAAC;AACX9O,MAAAA,IAAI,EAAE7F,WADK;AAEXqJ,MAAAA,IAAI,EAAE,CAAC,mCAAD;AAFK,KAAD,CAF+F;AAKzG2S,IAAAA,QAAQ,EAAE,CAAC;AACXnW,MAAAA,IAAI,EAAE7F,WADK;AAEXqJ,MAAAA,IAAI,EAAE,CAAC,2BAAD;AAFK,KAAD;AAL+F,GAHzH;AAAA;;AAaA,MAAMkT,aAAN,CAAoB;AAChBzV,EAAAA,WAAW,CAAC+H,EAAD,EAAKiN,WAAL,EAAkBC,WAAlB,EAA+B;AACtC,SAAKlN,EAAL,GAAUA,EAAV;AACA,SAAKiN,WAAL,GAAmBA,WAAnB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKS,SAAL,GAAiB,KAAjB;AACA,SAAK7H,QAAL,GAAgB,KAAhB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAK6H,IAAL,GAAY,IAAInc,SAAJ,CAAc;AACtBgN,MAAAA,IAAI,EAAE,IAAI/M,WAAJ,CAAgB,EAAhB,EAAoB,CACtBE,YAAY,CAACic,QADS,EAEtBjc,YAAY,CAACkc,OAAb,CAAqB,gFAArB,CAFsB,CAApB,CADgB;AAKtBxX,MAAAA,IAAI,EAAE,IAAI5E,WAAJ,CAAgB,EAAhB,EAAoB,CAACE,YAAY,CAACic,QAAd,CAApB,CALgB;AAMtB7B,MAAAA,YAAY,EAAE,IAAIta,WAAJ,CAAgB,IAAhB;AANQ,KAAd,CAAZ;;AAQA,SAAKqc,OAAL,GAAe,MAAM;AACjB,YAAM;AAAEvY,QAAAA,KAAK,EAAE;AAAEgR,UAAAA,SAAF;AAAa/P,UAAAA;AAAb;AAAT,UAAgC,KAAK8W,UAA3C;AACA,YAAM;AAAE3W,QAAAA,KAAF;AAAS6Q,QAAAA,IAAT;AAAeC,QAAAA;AAAf,UAAsBlB,SAA5B;AACA,YAAMwH,YAAY,GAAG,CAACpX,KAAD,GAASH,GAAG,CAACwX,WAAJ,CAAgBxG,IAAhB,EAAsBC,EAAtB,CAAT,GAAqC,EAA1D;;AACA,UAAIsG,YAAJ,EAAkB;AACd,aAAK1X,IAAL,CAAU4X,UAAV,CAAqBF,YAArB;AACA,aAAK1X,IAAL,CAAU6X,OAAV;AACH;AACJ,KARD;;AASA,SAAKtR,MAAL,GAAetD,IAAD,IAAU;AACpB,YAAM;AAAE/D,QAAAA;AAAF,UAAY+D,IAAlB;AACA,WAAKuM,QAAL,GAAgByF,IAAI,CAACzF,QAAL,CAActQ,KAAd,EAAqB;AAAEyS,QAAAA,MAAM,EAAE;AAAV,OAArB,CAAhB;AACA,WAAKlC,UAAL,GAAkBwF,IAAI,CAACxF,UAAL,CAAgBvQ,KAAhB,CAAlB;AACH,KAJD;AAKH;;AACQ,MAAL4Y,KAAK,GAAG;AACR,WAAO,KAAKtI,QAAL,IAAiB,KAAK6H,SAA7B;AACH;;AACW,MAARR,QAAQ,GAAG;AACX,WAAO,CAAC,KAAKpH,UAAb;AACH;;AACO,MAAJsI,IAAI,GAAG;AACP,WAAO9I,IAAI,CAACxJ,GAAL,CAAS,KAAK+J,QAAL,GAAgB,QAAhB,GAA2B,MAApC,CAAP;AACH;;AACQ,MAAL3N,KAAK,GAAG;AACR,WAAO,KAAK8U,WAAL,CAAiBb,MAAjB,CAAwBrQ,GAAxB,CAA4B,KAAK+J,QAAL,GAAgB,YAAhB,GAA+B,YAA3D,CAAP;AACH;;AACO,MAAJrH,IAAI,GAAG;AACP,WAAO,KAAKmP,IAAL,CAAU7R,GAAV,CAAc,MAAd,CAAP;AACH;;AACO,MAAJzF,IAAI,GAAG;AACP,WAAO,KAAKsX,IAAL,CAAU7R,GAAV,CAAc,MAAd,CAAP;AACH;;AACDuS,EAAAA,eAAe,CAAC9V,CAAD,EAAI;AACf,QAAI,CAAC,KAAKwH,EAAL,CAAQ/G,aAAR,CAAsBsV,QAAtB,CAA+B/V,CAAC,CAAC8P,MAAjC,CAAD,IAA6C,KAAKqF,SAAtD,EAAiE;AAC7D,WAAKa,QAAL;AACH;AACJ;;AACDC,EAAAA,QAAQ,CAAClZ,GAAD,EAAM;AACV,WAAO,KAAK0X,WAAL,CAAiBb,MAAjB,CAAwBrQ,GAAxB,CAA4BxG,GAA5B,CAAP;AACH;;AACDiZ,EAAAA,QAAQ,GAAG;AACP,SAAKb,SAAL,GAAiB,KAAjB;AACA,SAAKC,IAAL,CAAUc,KAAV,CAAgB;AACZjQ,MAAAA,IAAI,EAAE,EADM;AAEZnI,MAAAA,IAAI,EAAE,EAFM;AAGZ0V,MAAAA,YAAY,EAAE;AAHF,KAAhB;AAKA,SAAK1V,IAAL,CAAUqY,MAAV;AACH;;AACDC,EAAAA,WAAW,CAACpW,CAAD,EAAI;AACX,QAAIA,CAAC,CAAC8U,MAAF,KAAa,CAAjB,EAAoB;AAChB;AACH;;AACD,UAAM;AAAE9X,MAAAA,KAAF;AAAS2F,MAAAA;AAAT,QAAsB,KAAKoS,UAAjC;;AACA,QAAI,KAAKzH,QAAT,EAAmB;AACfyF,MAAAA,IAAI,CAAC7C,MAAL,CAAYlT,KAAZ,EAAmB2F,QAAnB;AACA;AACH;;AACD,SAAKwS,SAAL,GAAiB,CAAC,KAAKA,SAAvB;;AACA,QAAI,KAAKA,SAAT,EAAoB;AAChB,WAAKI,OAAL;AACH;AACJ;;AACDlC,EAAAA,UAAU,CAACrT,CAAD,EAAI;AACVA,IAAAA,CAAC,CAACE,cAAF;AACA,UAAM;AAAEpC,MAAAA,IAAF;AAAQmI,MAAAA,IAAR;AAAcuN,MAAAA;AAAd,QAA+B,KAAK4B,IAAL,CAAUiB,WAAV,EAArC;AACA,UAAM;AAAE1T,MAAAA,QAAF;AAAY3F,MAAAA;AAAZ,QAAsB,KAAK+X,UAAjC;AACA,UAAM;AAAE/G,MAAAA;AAAF,QAAgBhR,KAAtB;AACA,UAAM6B,KAAK,GAAG;AACVc,MAAAA,KAAK,EAAEsG,IADG;AAEVA,MAAAA,IAFU;AAGV6J,MAAAA,MAAM,EAAE0D,YAAY,GAAG,QAAH,GAAc;AAHxB,KAAd;;AAKA,QAAIxF,SAAS,CAAC5P,KAAd,EAAqB;AACjB2U,MAAAA,IAAI,CAACpD,MAAL,CAAY7R,IAAZ,EAAkBe,KAAlB,EAAyB7B,KAAzB,EAAgC2F,QAAhC;AACA,WAAKoS,UAAL,CAAgB1V,KAAhB;AACH,KAHD,MAIK;AACD0T,MAAAA,IAAI,CAAC1O,MAAL,CAAYxF,KAAZ,EAAmB7B,KAAnB,EAA0B2F,QAA1B;AACH;;AACD,SAAKqT,QAAL;AACH;;AACDvM,EAAAA,QAAQ,GAAG;AACP,SAAKsL,UAAL,GAAkB,KAAKL,WAAL,CAAiBjM,MAAjB,CAAwB1H,IAA1C;AACA,SAAKkU,kBAAL,GAA0B,KAAKP,WAAL,CAAiBjM,MAAjB,CAAwBpE,MAAxB,CAA+BN,SAA/B,CAA0ChD,IAAD,IAAU;AACzE,WAAKsD,MAAL,CAAYtD,IAAZ;AACH,KAFyB,CAA1B;AAGH;;AACDmJ,EAAAA,WAAW,GAAG;AACV,SAAK+K,kBAAL,CAAwBtQ,WAAxB;AACH;;AA3Ge;;AA6GpBuQ,aAAa,CAACtT,IAAd;AAAA,mBAA0GsT,aAA1G,EAhkCqGpd,EAgkCrG,mBAAyIA,EAAE,CAACwS,UAA5I,GAhkCqGxS,EAgkCrG,mBAAmKgc,gBAAnK,GAhkCqGhc,EAgkCrG,mBAAgM+S,WAAhM;AAAA;;AACAqK,aAAa,CAACrT,IAAd,kBAjkCqG/J,EAikCrG;AAAA,QAA8Fod,aAA9F;AAAA;AAAA;AAAA;AAAA;AAjkCqGpd,MAAAA,EAikCrG;AAAA,eAA8F,2BAA9F;AAAA,gBAjkCqGA,EAikCrG;AAAA;;AAAA;AAjkCqGA,MAAAA,EAikCrG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAjkCqGA,MAAAA,EAikCkP,4BAAvV;AAjkCqGA,MAAAA,EAikCwU;AAAA,eAAc,uBAAd;AAAA,QAA7a;AAjkCqGA,MAAAA,EAikCrG;AAjkCqGA,MAAAA,EAikCmY,eAAxe;AAjkCqGA,MAAAA,EAikC6Z,6DAAlgB;AAAA;;AAAA;AAjkCqGA,MAAAA,EAikCoS,yBAjkCpSA,EAikCoS,8BAjkCpSA,EAikCoS,oCAAzY;AAjkCqGA,MAAAA,EAikCma,aAAxgB;AAjkCqGA,MAAAA,EAikCma,kCAAxgB;AAAA;AAAA;AAAA,eAAugE+B,EAAE,CAACkI,IAA1gE,EAAwlEhJ,EAAE,CAACud,aAA3lE,EAA8qEvd,EAAE,CAACwd,oBAAjrE,EAAuzExd,EAAE,CAACyd,kBAA1zE,EAAq7Ezd,EAAE,CAAC0d,oBAAx7E,EAAkrF1d,EAAE,CAAC2d,eAArrF,EAAuwF3d,EAAE,CAAC4d,eAA1wF,EAAo5F5d,EAAE,CAAC6d,4BAAv5F;AAAA,UAAokG1C,gBAApkG;AAAA;AAAA;;AACA;AAAA,qDAlkCqGpc,EAkkCrG,mBAA2Fod,aAA3F,EAAsH,CAAC;AAC3G1W,IAAAA,IAAI,EAAExG,SADqG;AAE3GgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,UAAZ;AAAwBC,MAAAA,QAAQ,EAAE,4oDAAlC;AAAgrDC,MAAAA,MAAM,EAAE,CAAC,EAAD;AAAxrD,KAAD;AAFqG,GAAD,CAAtH,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAE3D,MAAAA,IAAI,EAAE1G,EAAE,CAACwS;AAAX,KAAD,EAA0B;AAAE9L,MAAAA,IAAI,EAAEsV;AAAR,KAA1B,EAAsD;AAAEtV,MAAAA,IAAI,EAAEqM;AAAR,KAAtD,CAAP;AAAsF,GAHhI,EAGkJ;AAAE+K,IAAAA,KAAK,EAAE,CAAC;AAC5IpX,MAAAA,IAAI,EAAE7F,WADsI;AAE5IqJ,MAAAA,IAAI,EAAE,CAAC,mCAAD;AAFsI,KAAD,CAAT;AAGlI2S,IAAAA,QAAQ,EAAE,CAAC;AACXnW,MAAAA,IAAI,EAAE7F,WADK;AAEXqJ,MAAAA,IAAI,EAAE,CAAC,2BAAD;AAFK,KAAD,CAHwH;AAMlI8T,IAAAA,eAAe,EAAE,CAAC;AAClBtX,MAAAA,IAAI,EAAE5F,YADY;AAElBoJ,MAAAA,IAAI,EAAE,CAAC,oBAAD,EAAuB,CAAC,QAAD,CAAvB;AAFY,KAAD;AANiH,GAHlJ;AAAA;;AAcA,MAAM6U,cAAN,CAAqB;AACjBpX,EAAAA,WAAW,CAAC+H,EAAD,EAAKiN,WAAL,EAAkBC,WAAlB,EAA+B;AACtC,SAAKlN,EAAL,GAAUA,EAAV;AACA,SAAKiN,WAAL,GAAmBA,WAAnB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKS,SAAL,GAAiB,KAAjB;AACA,SAAK7H,QAAL,GAAgB,KAAhB;AACA,SAAK8H,IAAL,GAAY,IAAInc,SAAJ,CAAc;AACtBmJ,MAAAA,GAAG,EAAE,IAAIlJ,WAAJ,CAAgB,EAAhB,EAAoB,CACrBE,YAAY,CAACic,QADQ,EAErBjc,YAAY,CAACkc,OAAb,CAAqB,gFAArB,CAFqB,CAApB,CADiB;AAKtB5V,MAAAA,GAAG,EAAE,IAAIxG,WAAJ,CAAgB,EAAhB,CALiB;AAMtByG,MAAAA,KAAK,EAAE,IAAIzG,WAAJ,CAAgB,EAAhB;AANe,KAAd,CAAZ;;AAQA,SAAKmL,MAAL,GAAetD,IAAD,IAAU;AACpB,YAAM;AAAE/D,QAAAA;AAAF,UAAY+D,IAAlB;AACA,WAAKuM,QAAL,GAAgB0F,KAAK,CAAC1F,QAAN,CAAetQ,KAAf,CAAhB;AACH,KAHD;AAIH;;AACQ,MAAL4Y,KAAK,GAAG;AACR,WAAO,KAAKtI,QAAL,IAAiB,KAAK6H,SAA7B;AACH;;AACO,MAAJU,IAAI,GAAG;AACP,WAAO9I,IAAI,CAACxJ,GAAL,CAAS,OAAT,CAAP;AACH;;AACM,MAAHnB,GAAG,GAAG;AACN,WAAO,KAAKgT,IAAL,CAAU7R,GAAV,CAAc,KAAd,CAAP;AACH;;AACDuS,EAAAA,eAAe,CAAC9V,CAAD,EAAI;AACf,QAAI,CAAC,KAAKwH,EAAL,CAAQ/G,aAAR,CAAsBsV,QAAtB,CAA+B/V,CAAC,CAAC8P,MAAjC,CAAD,IAA6C,KAAKqF,SAAtD,EAAiE;AAC7D,WAAKa,QAAL;AACH;AACJ;;AACDC,EAAAA,QAAQ,CAAClZ,GAAD,EAAM;AACV,WAAO,KAAK0X,WAAL,CAAiBb,MAAjB,CAAwBrQ,GAAxB,CAA4BxG,GAA5B,CAAP;AACH;;AACDiZ,EAAAA,QAAQ,GAAG;AACP,SAAKb,SAAL,GAAiB,KAAjB;AACA,SAAKC,IAAL,CAAUc,KAAV,CAAgB;AACZ9T,MAAAA,GAAG,EAAE,EADO;AAEZ1C,MAAAA,GAAG,EAAE,EAFO;AAGZC,MAAAA,KAAK,EAAE;AAHK,KAAhB;AAKH;;AACDyW,EAAAA,WAAW,CAACpW,CAAD,EAAI;AACX,QAAIA,CAAC,CAAC8U,MAAF,KAAa,CAAjB,EAAoB;AAChB;AACH;;AACD,SAAKK,SAAL,GAAiB,CAAC,KAAKA,SAAvB;;AACA,QAAI,KAAKA,SAAT,EAAoB;AAChB,WAAK2B,QAAL;AACH;AACJ;;AACDA,EAAAA,QAAQ,GAAG;AACP,UAAM;AAAE9Z,MAAAA;AAAF,QAAY,KAAK+X,UAAvB;AACA,UAAM;AAAE/G,MAAAA;AAAF,QAAgBhR,KAAtB;;AACA,QAAIgR,SAAS,YAAYxU,aAArB,IAAsC,KAAK8T,QAA/C,EAAyD;AACrD,YAAM;AAAElL,QAAAA,GAAF;AAAO1C,QAAAA,GAAG,GAAG,EAAb;AAAiBC,QAAAA,KAAK,GAAG;AAAzB,UAAgCqO,SAAS,CAAC1P,IAAV,CAAeO,KAArD;AACA,WAAKuW,IAAL,CAAU2B,QAAV,CAAmB;AACf3U,QAAAA,GADe;AAEf1C,QAAAA,GAFe;AAGfC,QAAAA;AAHe,OAAnB;AAKH;AACJ;;AACD0T,EAAAA,UAAU,CAACrT,CAAD,EAAI;AACVA,IAAAA,CAAC,CAACE,cAAF;AACA,UAAM;AAAEkC,MAAAA,GAAF;AAAO1C,MAAAA,GAAP;AAAYC,MAAAA;AAAZ,QAAsB,KAAKyV,IAAL,CAAUiB,WAAV,EAA5B;AACA,UAAM;AAAE1T,MAAAA,QAAF;AAAY3F,MAAAA;AAAZ,QAAsB,KAAK+X,UAAjC;AACA,UAAMlW,KAAK,GAAG;AACVa,MAAAA,GADU;AAEVC,MAAAA;AAFU,KAAd;AAIAqT,IAAAA,KAAK,CAACrD,MAAN,CAAavN,GAAb,EAAkBvD,KAAlB,EAAyB7B,KAAzB,EAAgC2F,QAAhC;AACA,SAAKoS,UAAL,CAAgB1V,KAAhB;AACA,SAAK2W,QAAL;AACH;;AACDvM,EAAAA,QAAQ,GAAG;AACP,SAAKsL,UAAL,GAAkB,KAAKL,WAAL,CAAiBjM,MAAjB,CAAwB1H,IAA1C;AACA,SAAKkU,kBAAL,GAA0B,KAAKP,WAAL,CAAiBjM,MAAjB,CAAwBpE,MAAxB,CAA+BN,SAA/B,CAA0ChD,IAAD,IAAU;AACzE,WAAKsD,MAAL,CAAYtD,IAAZ;AACH,KAFyB,CAA1B;AAGH;;AACDmJ,EAAAA,WAAW,GAAG;AACV,SAAK+K,kBAAL,CAAwBtQ,WAAxB;AACH;;AAtFgB;;AAwFrBkS,cAAc,CAACjV,IAAf;AAAA,mBAA2GiV,cAA3G,EAxqCqG/e,EAwqCrG,mBAA2IA,EAAE,CAACwS,UAA9I,GAxqCqGxS,EAwqCrG,mBAAqKgc,gBAArK,GAxqCqGhc,EAwqCrG,mBAAkM+S,WAAlM;AAAA;;AACAgM,cAAc,CAAChV,IAAf,kBAzqCqG/J,EAyqCrG;AAAA,QAA+F+e,cAA/F;AAAA;AAAA;AAAA;AAAA;AAzqCqG/e,MAAAA,EAyqCrG;AAAA,eAA+F,2BAA/F;AAAA,gBAzqCqGA,EAyqCrG;AAAA;;AAAA;AAzqCqGA,MAAAA,EAyqCrG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAzqCqGA,MAAAA,EAyqCuM,4BAA5S;AAzqCqGA,MAAAA,EAyqC6R;AAAA,eAAc,uBAAd;AAAA,QAAlY;AAzqCqGA,MAAAA,EAyqCrG;AAzqCqGA,MAAAA,EAyqC0W,eAA/c;AAzqCqGA,MAAAA,EAyqCoY,8DAAze;AAAA;;AAAA;AAzqCqGA,MAAAA,EAyqCyP,yBAzqCzPA,EAyqCyP,8BAzqCzPA,EAyqCyP,sDAA9V;AAzqCqGA,MAAAA,EAyqC0Y,aAA/e;AAzqCqGA,MAAAA,EAyqC0Y,kCAA/e;AAAA;AAAA;AAAA,eAAw0D+B,EAAE,CAACkI,IAA30D,EAAy5DhJ,EAAE,CAACud,aAA55D,EAA++Dvd,EAAE,CAACwd,oBAAl/D,EAAwnExd,EAAE,CAACyd,kBAA3nE,EAAsvEzd,EAAE,CAAC0d,oBAAzvE,EAAm/E1d,EAAE,CAAC2d,eAAt/E,EAAwkF3d,EAAE,CAAC4d,eAA3kF;AAAA,UAAuuFzC,gBAAvuF;AAAA;AAAA;;AACA;AAAA,qDA1qCqGpc,EA0qCrG,mBAA2F+e,cAA3F,EAAuH,CAAC;AAC5GrY,IAAAA,IAAI,EAAExG,SADsG;AAE5GgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,WAAZ;AAAyBC,MAAAA,QAAQ,EAAE,w/CAAnC;AAA6hDC,MAAAA,MAAM,EAAE,CAAC,EAAD;AAAriD,KAAD;AAFsG,GAAD,CAAvH,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAE3D,MAAAA,IAAI,EAAE1G,EAAE,CAACwS;AAAX,KAAD,EAA0B;AAAE9L,MAAAA,IAAI,EAAEsV;AAAR,KAA1B,EAAsD;AAAEtV,MAAAA,IAAI,EAAEqM;AAAR,KAAtD,CAAP;AAAsF,GAHhI,EAGkJ;AAAE+K,IAAAA,KAAK,EAAE,CAAC;AAC5IpX,MAAAA,IAAI,EAAE7F,WADsI;AAE5IqJ,MAAAA,IAAI,EAAE,CAAC,mCAAD;AAFsI,KAAD,CAAT;AAGlI8T,IAAAA,eAAe,EAAE,CAAC;AAClBtX,MAAAA,IAAI,EAAE5F,YADY;AAElBoJ,MAAAA,IAAI,EAAE,CAAC,oBAAD,EAAuB,CAAC,QAAD,CAAvB;AAFY,KAAD;AAHiH,GAHlJ;AAAA;;AAWA,MAAMgV,iBAAN,CAAwB;AACpBvX,EAAAA,WAAW,CAACgV,WAAD,EAAcC,WAAd,EAA2BlN,EAA3B,EAA+B;AACtC,SAAKiN,WAAL,GAAmBA,WAAnB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKlN,EAAL,GAAUA,EAAV;AACA,SAAKyP,cAAL,GAAsB,KAAtB;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAKC,aAAL,GAAqB,EAArB;;AACA,SAAK9S,MAAL,GAAetD,IAAD,IAAU;AACpB,YAAM;AAAE/D,QAAAA;AAAF,UAAY+D,IAAlB;AACA,WAAKmW,WAAL,GAAmB,EAAnB;AACA,WAAKC,aAAL,GAAqB,EAArB;AACA,WAAKC,KAAL,CAAWhS,OAAX,CAAoBiS,IAAD,IAAU;AACzB,cAAMzC,OAAO,GAAGpC,cAAc,CAAC6E,IAAD,CAA9B;AACA,cAAM/J,QAAQ,GAAGsH,OAAO,CAACtH,QAAR,CAAiBtQ,KAAjB,CAAjB;;AACA,YAAIsQ,QAAJ,EAAc;AACV,eAAK4J,WAAL,CAAiBpY,IAAjB,CAAsBuY,IAAtB;AACH;;AACD,YAAI,CAACzC,OAAO,CAACrH,UAAR,CAAmBvQ,KAAnB,CAAL,EAAgC;AAC5B,eAAKma,aAAL,CAAmBrY,IAAnB,CAAwBuY,IAAxB;AACH;AACJ,OATD;;AAUA,UAAI,KAAKH,WAAL,CAAiBxY,MAAjB,KAA4B,CAAhC,EAAmC;AAC/B,aAAK4Y,UAAL,GAAkB,KAAKJ,WAAL,CAAiB,CAAjB,CAAlB;AACH,OAFD,MAGK;AACD,aAAKI,UAAL,GAAkB,IAAlB;AACH;AACJ,KApBD;AAqBH;;AACa,MAAVC,UAAU,GAAG;AACb,WAAOzI,OAAO,CAAC,KAAKwI,UAAL,IAAmB,KAAKL,cAAzB,CAAd;AACH;;AACqB,MAAlBO,kBAAkB,GAAG;AACrB,WAAO,KAAKL,aAAL,CAAmBzY,MAAnB,KAA8B,KAAK0Y,KAAL,CAAW1Y,MAAhD;AACH;;AACDoX,EAAAA,eAAe,CAAChG,MAAD,EAAS;AACpB,QAAI,CAAC,KAAKtI,EAAL,CAAQ/G,aAAR,CAAsBsV,QAAtB,CAA+BjG,MAA/B,CAAD,IAA2C,KAAKmH,cAApD,EAAoE;AAChE,WAAKA,cAAL,GAAsB,KAAtB;AACH;AACJ;;AACDQ,EAAAA,OAAO,CAAC1a,GAAD,EAAM;AACT,WAAO,KAAK0X,WAAL,CAAiBb,MAAjB,CAAwBrQ,GAAxB,CAA4BxG,GAA5B,CAAP;AACH;;AACD2a,EAAAA,cAAc,CAAC1X,CAAD,EAAI;AACdA,IAAAA,CAAC,CAACE,cAAF;AACA,SAAK+W,cAAL,GAAsB,CAAC,KAAKA,cAA5B;AACH;;AACDU,EAAAA,OAAO,CAAC3X,CAAD,EAAIqX,IAAJ,EAAU;AACbrX,IAAAA,CAAC,CAACE,cAAF,GADa,CAEb;;AACA,QAAIF,CAAC,CAAC8U,MAAF,KAAa,CAAjB,EAAoB;AAChB;AACH;;AACD,UAAMF,OAAO,GAAGpC,cAAc,CAAC6E,IAAD,CAA9B;AACA,UAAM;AAAEra,MAAAA,KAAF;AAAS2F,MAAAA;AAAT,QAAsB,KAAKoS,UAAjC;AACAH,IAAAA,OAAO,CAACvH,MAAR,GAAiBrQ,KAAjB,EAAwB2F,QAAxB;AACA,SAAKsU,cAAL,GAAsB,KAAtB;AACH;;AACDxN,EAAAA,QAAQ,GAAG;AACP,SAAKsL,UAAL,GAAkB,KAAKL,WAAL,CAAiBjM,MAAjB,CAAwB1H,IAA1C;AACA,SAAKkU,kBAAL,GAA0B,KAAKP,WAAL,CAAiBjM,MAAjB,CAAwBpE,MAAxB,CAA+BN,SAA/B,CAA0ChD,IAAD,IAAU;AACzE,WAAKsD,MAAL,CAAYtD,IAAZ;AACH,KAFyB,CAA1B;AAGH;;AACDmJ,EAAAA,WAAW,GAAG;AACV,SAAK+K,kBAAL,CAAwBtQ,WAAxB;AACH;;AAnEmB;;AAqExBqS,iBAAiB,CAACpV,IAAlB;AAAA,mBAA8GoV,iBAA9G,EA1vCqGlf,EA0vCrG,mBAAiJgc,gBAAjJ,GA1vCqGhc,EA0vCrG,mBAA8K+S,WAA9K,GA1vCqG/S,EA0vCrG,mBAAsMA,EAAE,CAACwS,UAAzM;AAAA;;AACA0M,iBAAiB,CAACnV,IAAlB,kBA3vCqG/J,EA2vCrG;AAAA,QAAkGkf,iBAAlG;AAAA;AAAA;AAAA;AAAA;AA3vCqGlf,MAAAA,EA2vCrG;AAAA,eAAkG,kCAAlG;AAAA,gBA3vCqGA,EA2vCrG;AAAA;;AAAA;AA3vCqGA,MAAAA,EA2vCrG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA3vCqGA,MAAAA,EA2vCkU,4BAAva;AA3vCqGA,MAAAA,EA2vC2W;AAAA,eAAc,0BAAd;AAAA,QAAhd;AA3vCqGA,MAAAA,EA2vCsZ,UAA3f;AA3vCqGA,MAAAA,EA2vCwb,eAA7hB;AA3vCqGA,MAAAA,EA2vCkc,gEAAviB;AAAA;;AAAA;AA3vCqGA,MAAAA,EA2vCsZ,aAA3f;AA3vCqGA,MAAAA,EA2vCsZ,wEAA3f;AA3vCqGA,MAAAA,EA2vCof,aAAzlB;AA3vCqGA,MAAAA,EA2vCof,uCAAzlB;AAAA;AAAA;AAAA,eAA86B+B,EAAE,CAACkI,IAAj7B,EAA+/BlI,EAAE,CAAC+d,OAAlgC,EAAymC/d,EAAE,CAACiI,OAA5mC;AAAA;AAAA;;AACA;AAAA,qDA5vCqGhK,EA4vCrG,mBAA2Fkf,iBAA3F,EAA0H,CAAC;AAC/GxY,IAAAA,IAAI,EAAExG,SADyG;AAE/GgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,cAAZ;AAA4BC,MAAAA,QAAQ,EAAE,meAAtC;AAA2gBC,MAAAA,MAAM,EAAE,CAAC,EAAD;AAAnhB,KAAD;AAFyG,GAAD,CAA1H,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAE3D,MAAAA,IAAI,EAAEsV;AAAR,KAAD,EAA6B;AAAEtV,MAAAA,IAAI,EAAEqM;AAAR,KAA7B,EAAoD;AAAErM,MAAAA,IAAI,EAAE1G,EAAE,CAACwS;AAAX,KAApD,CAAP;AAAsF,GAHhI,EAGkJ;AAAEuN,IAAAA,KAAK,EAAE,CAAC;AAC5IrZ,MAAAA,IAAI,EAAEvG;AADsI,KAAD,CAAT;AAElImf,IAAAA,KAAK,EAAE,CAAC;AACR5Y,MAAAA,IAAI,EAAEvG;AADE,KAAD,CAF2H;AAIlIsf,IAAAA,UAAU,EAAE,CAAC;AACb/Y,MAAAA,IAAI,EAAE7F,WADO;AAEbqJ,MAAAA,IAAI,EAAE,CAAC,qCAAD;AAFO,KAAD,CAJsH;AAOlIwV,IAAAA,kBAAkB,EAAE,CAAC;AACrBhZ,MAAAA,IAAI,EAAE7F,WADe;AAErBqJ,MAAAA,IAAI,EAAE,CAAC,2BAAD;AAFe,KAAD,CAP8G;AAUlI8T,IAAAA,eAAe,EAAE,CAAC;AAClBtX,MAAAA,IAAI,EAAE5F,YADY;AAElBoJ,MAAAA,IAAI,EAAE,CAAC,oBAAD,EAAuB,CAAC,eAAD,CAAvB;AAFY,KAAD;AAViH,GAHlJ;AAAA;;AAkBA,MAAM8V,oBAAN,CAA2B;AACvBrY,EAAAA,WAAW,CAAC+H,EAAD,EAAKkN,WAAL,EAAkBD,WAAlB,EAA+B;AACtC,SAAKjN,EAAL,GAAUA,EAAV;AACA,SAAKkN,WAAL,GAAmBA,WAAnB;AACA,SAAKD,WAAL,GAAmBA,WAAnB;AACA,SAAKU,SAAL,GAAiB,KAAjB;AACA,SAAK7H,QAAL,GAAgB,KAAhB;AACA,SAAKyK,YAAL,GAAoB,EAApB;AACA,SAAKxK,UAAL,GAAkB,IAAlB;;AACA,SAAKlJ,MAAL,GAAetD,IAAD,IAAU;AACpB,YAAM;AAAE/D,QAAAA;AAAF,UAAY+D,IAAlB;AACA,WAAKwM,UAAL,GAAkB,KAAKqH,OAAL,CAAarH,UAAb,CAAwBvQ,KAAxB,CAAlB;AACA,WAAKsQ,QAAL,GAAgB,KAAKsH,OAAL,CAAatH,QAAb,CAAsBtQ,KAAtB,CAAhB;AACA,WAAK+a,YAAL,GAAoB,EAApB;;AACA,UAAI,KAAKzK,QAAT,EAAmB;AACf,aAAKyK,YAAL,GAAoB,KAAKnD,OAAL,CAAa/D,eAAb,CAA6B7T,KAA7B,CAApB;AACH;AACJ,KARD;AASH;;AACQ,MAAL4Y,KAAK,GAAG;AACR,WAAO,KAAKtI,QAAL,IAAiB,KAAK6H,SAA7B;AACH;;AACW,MAARR,QAAQ,GAAG;AACX,WAAO,CAAC,KAAKpH,UAAb;AACH;;AACQ,MAAL5N,KAAK,GAAG;AACR,WAAO,KAAKsW,QAAL,CAAc,KAAKzX,IAAL,KAAc,YAAd,GAA6B,YAA7B,GAA4C,kBAA1D,CAAP;AACH;;AACO,MAAJqX,IAAI,GAAG;AACP,WAAO9I,IAAI,CAACxJ,GAAL,CAAS,KAAK/E,IAAL,KAAc,YAAd,GAA6B,YAA7B,GAA4C,YAArD,CAAP;AACH;;AACU,MAAPoW,OAAO,GAAG;AACV,WAAO,KAAKpW,IAAL,KAAc,YAAd,GAA6ByU,SAA7B,GAAyCC,mBAAhD;AACH;;AACD8E,EAAAA,cAAc,CAACC,QAAD,EAAW;AACrBA,IAAAA,QAAQ,GAAGA,QAAQ,CAACC,OAAT,CAAiB,GAAjB,EAAsB,EAAtB,CAAX;AACA,UAAMC,CAAC,GAAGjX,QAAQ,CAAC+W,QAAQ,CAACG,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,CAAD,EAAwB,EAAxB,CAAlB;AACA,UAAMC,CAAC,GAAGnX,QAAQ,CAAC+W,QAAQ,CAACG,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,CAAD,EAAwB,EAAxB,CAAlB;AACA,UAAME,CAAC,GAAGpX,QAAQ,CAAC+W,QAAQ,CAACG,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,CAAD,EAAwB,EAAxB,CAAlB;AACA,UAAMG,GAAG,GAAG,CAAEJ,CAAC,GAAG,GAAL,GAAaE,CAAC,GAAG,GAAjB,GAAyBC,CAAC,GAAG,GAA9B,IAAsC,IAAlD;AACA,WAAQC,GAAG,IAAI,GAAR,GAAe,OAAf,GAAyB,OAAhC;AACH;;AACDzC,EAAAA,eAAe,CAAC9V,CAAD,EAAI;AACf,QAAI,CAAC,KAAKwH,EAAL,CAAQ/G,aAAR,CAAsBsV,QAAtB,CAA+B/V,CAAC,CAAC8P,MAAjC,CAAD,IAA6C,KAAKqF,SAAtD,EAAiE;AAC7D,WAAKqD,SAAL;AACH;AACJ;;AACDA,EAAAA,SAAS,GAAG;AACR,SAAKrD,SAAL,GAAiB,KAAjB;AACH;;AACDsD,EAAAA,WAAW,CAACzY,CAAD,EAAI;AACXA,IAAAA,CAAC,CAACE,cAAF;;AACA,QAAIF,CAAC,CAAC8U,MAAF,KAAa,CAAjB,EAAoB;AAChB;AACH;;AACD,SAAKK,SAAL,GAAiB,CAAC,KAAKA,SAAvB;AACH;;AACDjF,EAAAA,MAAM,CAAClQ,CAAD,EAAI;AACNA,IAAAA,CAAC,CAACE,cAAF;AACA,UAAM;AAAElD,MAAAA,KAAF;AAAS2F,MAAAA;AAAT,QAAsB,KAAKoS,UAAjC;AACA,SAAKH,OAAL,CAAa1E,MAAb,GAAsBlT,KAAtB,EAA6B2F,QAA7B;AACA,SAAK6V,SAAL;AACH;;AACDE,EAAAA,aAAa,CAAC1Y,CAAD,EAAIgR,KAAJ,EAAW;AACpBhR,IAAAA,CAAC,CAACE,cAAF;;AACA,QAAIF,CAAC,CAAC8U,MAAF,KAAa,CAAjB,EAAoB;AAChB;AACH;;AACD,UAAM;AAAE9X,MAAAA,KAAF;AAAS2F,MAAAA;AAAT,QAAsB,KAAKoS,UAAjC;;AACA,QAAI,KAAKvW,IAAL,KAAc,YAAlB,EAAgC;AAC5B,YAAMK,KAAK,GAAG;AAAEmS,QAAAA;AAAF,OAAd;AACA,WAAK4D,OAAL,CAAa1X,KAAb,CAAmB2B,KAAnB,EAA0B7B,KAA1B,EAAiC2F,QAAjC;AACH,KAHD,MAIK;AACD,YAAM9D,KAAK,GAAG;AAAEoS,QAAAA,eAAe,EAAED;AAAnB,OAAd;AACA,WAAK4D,OAAL,CAAa1X,KAAb,CAAmB2B,KAAnB,EAA0B7B,KAA1B,EAAiC2F,QAAjC;AACH;;AACD,QAAI,CAAC,KAAKoS,UAAL,CAAgB4D,QAAhB,EAAL,EAAiC;AAC7B,WAAK5D,UAAL,CAAgB1V,KAAhB;AACH;;AACD,SAAKmZ,SAAL;AACH;;AACDvC,EAAAA,QAAQ,CAAClZ,GAAD,EAAM;AACV,WAAO,KAAK0X,WAAL,CAAiBb,MAAjB,CAAwBrQ,GAAxB,CAA4BxG,GAA5B,CAAP;AACH;;AACD0M,EAAAA,QAAQ,GAAG;AACP,SAAKsL,UAAL,GAAkB,KAAKL,WAAL,CAAiBjM,MAAjB,CAAwB1H,IAA1C;AACA,SAAKkU,kBAAL,GAA0B,KAAKP,WAAL,CAAiBjM,MAAjB,CAAwBpE,MAAxB,CAA+BN,SAA/B,CAA0ChD,IAAD,IAAU;AACzE,WAAKsD,MAAL,CAAYtD,IAAZ;AACH,KAFyB,CAA1B;AAGH;;AACDmJ,EAAAA,WAAW,GAAG;AACV,SAAK+K,kBAAL,CAAwBtQ,WAAxB;AACH;;AA7FsB;;AA+F3BmT,oBAAoB,CAAClW,IAArB;AAAA,mBAAiHkW,oBAAjH,EA72CqGhgB,EA62CrG,mBAAuJA,EAAE,CAACwS,UAA1J,GA72CqGxS,EA62CrG,mBAAiL+S,WAAjL,GA72CqG/S,EA62CrG,mBAAyMgc,gBAAzM;AAAA;;AACAgE,oBAAoB,CAACjW,IAArB,kBA92CqG/J,EA82CrG;AAAA,QAAqGggB,oBAArG;AAAA;AAAA;AAAA;AAAA;AA92CqGhgB,MAAAA,EA82CrG;AAAA,eAAqG,2BAArG;AAAA,gBA92CqGA,EA82CrG;AAAA;;AAAA;AA92CqGA,MAAAA,EA82CrG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA92CqGA,MAAAA,EA82CsT,4BAA3Z;AA92CqGA,MAAAA,EA82C4Y;AAAA,eAAc,uBAAd;AAAA,QAAjf;AA92CqGA,MAAAA,EA82CrG;AA92CqGA,MAAAA,EA82Cuc,eAA5iB;AA92CqGA,MAAAA,EA82Cid,mEAAtjB;AAAA;;AAAA;AA92CqGA,MAAAA,EA82CwW,yBA92CxWA,EA82CwW,8BA92CxWA,EA82CwW,oCAA7c;AA92CqGA,MAAAA,EA82Cud,aAA5jB;AA92CqGA,MAAAA,EA82Cud,kCAA5jB;AAAA;AAAA;AAAA,eAA8kD+B,EAAE,CAACkI,IAAjlD,EAA+pDlI,EAAE,CAAC+d,OAAlqD,EAAywD/d,EAAE,CAAC+e,OAA5wD,EAA20D/e,EAAE,CAACiI,OAA90D;AAAA,UAAw6DoS,gBAAx6D;AAAA;AAAA;;AACA;AAAA,qDA/2CqGpc,EA+2CrG,mBAA2FggB,oBAA3F,EAA6H,CAAC;AAClHtZ,IAAAA,IAAI,EAAExG,SAD4G;AAElHgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,kBAAZ;AAAgCC,MAAAA,QAAQ,EAAE,kwBAA1C;AAA8yBC,MAAAA,MAAM,EAAE,CAAC,+YAAD;AAAtzB,KAAD;AAF4G,GAAD,CAA7H,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAE3D,MAAAA,IAAI,EAAE1G,EAAE,CAACwS;AAAX,KAAD,EAA0B;AAAE9L,MAAAA,IAAI,EAAEqM;AAAR,KAA1B,EAAiD;AAAErM,MAAAA,IAAI,EAAEsV;AAAR,KAAjD,CAAP;AAAsF,GAHhI,EAGkJ;AAAE+E,IAAAA,OAAO,EAAE,CAAC;AAC9Ira,MAAAA,IAAI,EAAEvG;AADwI,KAAD,CAAX;AAElIuG,IAAAA,IAAI,EAAE,CAAC;AACPA,MAAAA,IAAI,EAAEvG;AADC,KAAD,CAF4H;AAIlI2d,IAAAA,KAAK,EAAE,CAAC;AACRpX,MAAAA,IAAI,EAAE7F,WADE;AAERqJ,MAAAA,IAAI,EAAE,CAAC,mCAAD;AAFE,KAAD,CAJ2H;AAOlI2S,IAAAA,QAAQ,EAAE,CAAC;AACXnW,MAAAA,IAAI,EAAE7F,WADK;AAEXqJ,MAAAA,IAAI,EAAE,CAAC,2BAAD;AAFK,KAAD,CAPwH;AAUlI8T,IAAAA,eAAe,EAAE,CAAC;AAClBtX,MAAAA,IAAI,EAAE5F,YADY;AAElBoJ,MAAAA,IAAI,EAAE,CAAC,oBAAD,EAAuB,CAAC,QAAD,CAAvB;AAFY,KAAD;AAViH,GAHlJ;AAAA;;AAkBA,MAAM8W,eAAe,GAAG,CACpB,CAAC,MAAD,EAAS,QAAT,CADoB,EAEpB,CAAC,MAAD,EAAS,YAAT,CAFoB,EAGpB,CAAC,WAAD,EAAc,QAAd,CAHoB,EAIpB,CAAC,cAAD,EAAiB,aAAjB,CAJoB,EAKpB,CAAC;AAAE/K,EAAAA,OAAO,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B;AAAX,CAAD,CALoB,EAMpB,CAAC,MAAD,EAAS,OAAT,CANoB,EAOpB,CAAC,YAAD,EAAe,kBAAf,CAPoB,EAQpB,CAAC,YAAD,EAAe,cAAf,EAA+B,aAA/B,EAA8C,eAA9C,CARoB,CAAxB;AAUA,MAAMgL,eAAe,GAAG,CACpB,CAAC,MAAD,EAAS,QAAT,CADoB,EAEpB,CAAC;AAAEhL,EAAAA,OAAO,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B;AAAX,CAAD,CAFoB,EAGpB,CAAC,MAAD,EAAS,OAAT,CAHoB,EAIpB,CAAC,YAAD,EAAe,kBAAf,CAJoB,CAAxB;AAMA,MAAMiL,qBAAqB,GAAG,CAC1B,SAD0B,EAE1B,SAF0B,EAG1B,SAH0B,EAI1B,SAJ0B,EAK1B,SAL0B,EAM1B,SAN0B,EAO1B,SAP0B,EAQ1B,SAR0B,EAS1B,SAT0B,EAU1B,SAV0B,EAW1B,SAX0B,EAY1B,SAZ0B,EAa1B,SAb0B,EAc1B,SAd0B,EAe1B,SAf0B,EAgB1B,SAhB0B,CAA9B;;AAkBA,MAAMC,aAAN,CAAoB;AAChBxZ,EAAAA,WAAW,CAACiV,WAAD,EAAc;AACrB,SAAKA,WAAL,GAAmBA,WAAnB;AACA,SAAKwE,OAAL,GAAeH,eAAf;AACA,SAAKI,YAAL,GAAoBH,qBAApB;AACA,SAAKrE,QAAL,GAAgB,KAAhB;AACA,SAAKyE,aAAL,GAAqB,IAArB;AACA,SAAKC,iBAAL,GAAyB,QAAzB;AACA,SAAKC,cAAL,GAAsB,CAClB,MADkB,EACV,QADU,EAElB,WAFkB,EAEL,QAFK,EAGlB,MAHkB,EAGV,YAHU,EAIlB,cAJkB,EAIF,aAJE,EAKlB,YALkB,EAKJ,cALI,EAKY,aALZ,EAK2B,eAL3B,CAAtB;AAOA,SAAKC,kBAAL,GAA0B,CAAC,qBAAD,EAAwB,2BAAxB,CAA1B;AACA,SAAKC,sBAAL,GAA8B,CAAC,qBAAD,CAA9B;AACA,SAAKC,cAAL,GAAsB,CAAC,sBAAD,CAAtB;AACH;;AACU,MAAPZ,OAAO,GAAG;AACV,UAAMa,GAAG,GAAG,CAAZ;AACA,UAAM5I,MAAM,GAAG,EAAf;AACA,SAAKqI,YAAL,CAAkB/T,OAAlB,CAA0B,CAAC4L,KAAD,EAAQtL,KAAR,KAAkB;AACxC,YAAMiU,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWnU,KAAK,GAAGgU,GAAnB,CAAZ;;AACA,UAAI,CAAC5I,MAAM,CAAC6I,GAAD,CAAX,EAAkB;AACd7I,QAAAA,MAAM,CAAChS,IAAP,CAAY,EAAZ;AACH;;AACDgS,MAAAA,MAAM,CAAC6I,GAAD,CAAN,CAAY7a,IAAZ,CAAiBkS,KAAjB;AACH,KAND;AAOA,WAAOF,MAAP;AACH;;AACDgJ,EAAAA,UAAU,CAACzC,IAAD,EAAO;AACb,QAAIA,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACtJ,OAArD,EAA8D;AAC1D,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH;;AACDgM,EAAAA,gBAAgB,CAAC1C,IAAD,EAAO;AACnB,WAAOA,IAAP;AACH;;AACD5N,EAAAA,QAAQ,GAAG;AACP,QAAI,CAAC,KAAKhB,MAAV,EAAkB;AACd,YAAM,IAAIiB,KAAJ,CAAU,qCAAV,CAAN;AACH;;AACD,SAAKgL,WAAL,CAAiBjM,MAAjB,GAA0B,KAAKA,MAA/B;AACH;;AA7Ce;;AA+CpBwQ,aAAa,CAACrX,IAAd;AAAA,mBAA0GqX,aAA1G,EAl9CqGnhB,EAk9CrG,mBAAyI+S,WAAzI;AAAA;;AACAoO,aAAa,CAACpX,IAAd,kBAn9CqG/J,EAm9CrG;AAAA,QAA8FmhB,aAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAn9CqGnhB,EAm9CrG,oBAAmU,CAAC+S,WAAD,CAAnU;AAAA;AAAA;AAAA;AAAA;AAAA;AAn9CqG/S,MAAAA,EAm9CsQ,4BAA3W;AAn9CqGA,MAAAA,EAm9C0Z,8EAA/f;AAn9CqGA,MAAAA,EAm9C82D,8EAAn9D;AAn9CqGA,MAAAA,EAm9Cm/D,eAAxlE;AAAA;;AAAA;AAn9CqGA,MAAAA,EAm9CwS,uBAn9CxSA,EAm9CwS,wEAA7Y;AAn9CqGA,MAAAA,EAm9Cic,aAAtiB;AAn9CqGA,MAAAA,EAm9Cic,mCAAtiB;AAn9CqGA,MAAAA,EAm9C63D,aAAl+D;AAn9CqGA,MAAAA,EAm9C63D,sCAAl+D;AAAA;AAAA;AAAA,eAA6/E+B,EAAE,CAACiI,OAAhgF,EAAwkFjI,EAAE,CAAC+d,OAA3kF,EAAkrF/d,EAAE,CAACkI,IAArrF,EAAsoEyS,sBAAtoE,EAAiuEU,aAAjuE,EAAgxE2B,cAAhxE,EAAi0EG,iBAAj0E,EAAo5Ec,oBAAp5E,EAAmwFje,EAAE,CAACmgB,gBAAtwF;AAAA,UAAy4FngB,EAAE,CAACogB,YAA54F;AAAA;AAAA;;AACA;AAAA,qDAp9CqGniB,EAo9CrG,mBAA2FmhB,aAA3F,EAAsH,CAAC;AAC3Gza,IAAAA,IAAI,EAAExG,SADqG;AAE3GgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,iBAAZ;AAA+ByI,MAAAA,SAAS,EAAE,CAACG,WAAD,CAA1C;AAAyD3I,MAAAA,QAAQ,EAAE,uvDAAnE;AAA4zDC,MAAAA,MAAM,EAAE,CAAC,EAAD;AAAp0D,KAAD;AAFqG,GAAD,CAAtH,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAE3D,MAAAA,IAAI,EAAEqM;AAAR,KAAD,CAAP;AAAiC,GAH3E,EAG6F;AAAEqO,IAAAA,OAAO,EAAE,CAAC;AACzF1a,MAAAA,IAAI,EAAEvG;AADmF,KAAD,CAAX;AAE7EkhB,IAAAA,YAAY,EAAE,CAAC;AACf3a,MAAAA,IAAI,EAAEvG;AADS,KAAD,CAF+D;AAI7E0c,IAAAA,QAAQ,EAAE,CAAC;AACXnW,MAAAA,IAAI,EAAEvG;AADK,KAAD,CAJmE;AAM7EwQ,IAAAA,MAAM,EAAE,CAAC;AACTjK,MAAAA,IAAI,EAAEvG;AADG,KAAD,CANqE;AAQ7EmhB,IAAAA,aAAa,EAAE,CAAC;AAChB5a,MAAAA,IAAI,EAAEvG;AADU,KAAD,CAR8D;AAU7EohB,IAAAA,iBAAiB,EAAE,CAAC;AACpB7a,MAAAA,IAAI,EAAEvG;AADc,KAAD;AAV0D,GAH7F;AAAA;;AAiBA,MAAMiiB,eAAN,CAAsB;AAClBza,EAAAA,WAAW,CAAC0a,YAAD,EAAe1F,WAAf,EAA4B;AACnC,SAAK0F,YAAL,GAAoBA,YAApB;AACA,SAAK1F,WAAL,GAAmBA,WAAnB;AACA,SAAK2F,eAAL,GAAuB,EAAvB;AACA,SAAKlD,WAAL,GAAmB,EAAnB;AACA,SAAKgC,OAAL,GAAe,CACX,CAAC,MAAD,EAAS,QAAT,EAAmB,WAAnB,EAAgC,QAAhC,CADW,EAEX,CAAC,cAAD,EAAiB,aAAjB,EAAgC,YAAhC,EAA8C,MAA9C,CAFW,EAGX,CAAC,YAAD,EAAe,cAAf,EAA+B,aAA/B,EAA8C,eAA9C,CAHW,CAAf;AAKA,SAAKI,cAAL,GAAsB,CAClB,MADkB,EACV,QADU,EACA,WADA,EACa,QADb,EAElB,cAFkB,EAEF,aAFE,EAEa,YAFb,EAE2B,MAF3B,EAGlB,YAHkB,EAGJ,cAHI,EAGY,aAHZ,EAG2B,eAH3B,CAAtB;AAKH;;AACO,MAAJvY,IAAI,GAAG;AACP,WAAO,KAAK0H,MAAL,CAAY1H,IAAnB;AACH;;AACDsZ,EAAAA,OAAO,CAACrN,IAAD,EAAO;AACV,UAAM6I,IAAI,GAAG9I,IAAI,CAACI,OAAL,CAAaH,IAAb,CAAb;AACA,WAAO,KAAKmN,YAAL,CAAkB/F,SAAlB,CAA4ByB,IAA5B,CAAP;AACH;;AACDb,EAAAA,QAAQ,CAAChI,IAAD,EAAO;AACX,WAAO,KAAKyH,WAAL,CAAiBb,MAAjB,CAAwBrQ,GAAxB,CAA4ByJ,IAA5B,CAAP;AACH;;AACD2K,EAAAA,OAAO,CAAC3X,CAAD,EAAIsa,WAAJ,EAAiB;AACpBta,IAAAA,CAAC,CAACE,cAAF;AACAF,IAAAA,CAAC,CAACua,eAAF;;AACA,QAAIva,CAAC,CAAC8U,MAAF,KAAa,CAAjB,EAAoB;AAChB;AACH;;AACD,UAAM;AAAE9X,MAAAA,KAAF;AAAS2F,MAAAA;AAAT,QAAsB,KAAK5B,IAAjC;AACA,UAAM6T,OAAO,GAAGpC,cAAc,CAAC8H,WAAD,CAA9B;AACA1F,IAAAA,OAAO,CAACvH,MAAR,GAAiBrQ,KAAjB,EAAwB2F,QAAxB;AACH;;AACD0B,EAAAA,MAAM,CAACtD,IAAD,EAAO;AACT,SAAKmW,WAAL,GAAmB,EAAnB;AACA,SAAKkD,eAAL,GAAuB,EAAvB;AACA,UAAM;AAAEpd,MAAAA;AAAF,QAAY+D,IAAlB;AACA,SAAKuY,cAAL,CAAoBlU,OAApB,CAA4ByP,WAAW,IAAI;AACvC,YAAMD,OAAO,GAAGpC,cAAc,CAACqC,WAAD,CAA9B;AACA,YAAMvH,QAAQ,GAAGsH,OAAO,CAACtH,QAAR,CAAiBtQ,KAAjB,CAAjB;;AACA,UAAIsQ,QAAJ,EAAc;AACV,aAAK4J,WAAL,CAAiBpY,IAAjB,CAAsB+V,WAAtB;AACH;;AACD,YAAMtH,UAAU,GAAGqH,OAAO,CAACrH,UAAR,CAAmBvQ,KAAnB,CAAnB;;AACA,UAAIuQ,UAAJ,EAAgB;AACZ,aAAK6M,eAAL,CAAqBtb,IAArB,CAA0B+V,WAA1B;AACH;AACJ,KAVD;AAWH;;AACDpL,EAAAA,QAAQ,GAAG;AACP,SAAKwL,kBAAL,GAA0B,KAAKxM,MAAL,CAAYpE,MAAZ,CACrBN,SADqB,CACVhD,IAAD,IAAU;AACrB,WAAKsD,MAAL,CAAYtD,IAAZ;AACH,KAHyB,CAA1B;AAIH;;AACDmJ,EAAAA,WAAW,GAAG;AACV,SAAK+K,kBAAL,CAAwBtQ,WAAxB;AACH;;AA7DiB;;AA+DtBuV,eAAe,CAACtY,IAAhB;AAAA,mBAA4GsY,eAA5G,EApiDqGpiB,EAoiDrG,mBAA6Ioc,gBAA7I,GApiDqGpc,EAoiDrG,mBAA0Kgc,gBAA1K;AAAA;;AACAoG,eAAe,CAACrY,IAAhB,kBAriDqG/J,EAqiDrG;AAAA,QAAgGoiB,eAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAriDqGpiB,MAAAA,EAqiD2F,gFAAhM;AAAA;;AAAA;AAriDqGA,MAAAA,EAqiDkI,mCAAvO;AAAA;AAAA;AAAA,eAAgkD+B,EAAE,CAAC+d,OAAnkD,EAA0qD/d,EAAE,CAACkI,IAA7qD,EAA2vDlI,EAAE,CAACiI,OAA9vD;AAAA;AAAA;;AACA;AAAA,qDAtiDqGhK,EAsiDrG,mBAA2FoiB,eAA3F,EAAwH,CAAC;AAC7G1b,IAAAA,IAAI,EAAExG,SADuG;AAE7GgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,YAAZ;AAA0BC,MAAAA,QAAQ,EAAE,qvBAApC;AAA2xBC,MAAAA,MAAM,EAAE,CAAC,ymBAAD;AAAnyB,KAAD;AAFuG,GAAD,CAAxH,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAE3D,MAAAA,IAAI,EAAE0V;AAAR,KAAD,EAA6B;AAAE1V,MAAAA,IAAI,EAAEsV;AAAR,KAA7B,CAAP;AAAkE,GAH5G,EAG8H;AAAErL,IAAAA,MAAM,EAAE,CAAC;AACzHjK,MAAAA,IAAI,EAAEvG;AADmH,KAAD;AAAV,GAH9H;AAAA;;AAOA,MAAMuiB,qBAAN,CAA4B;AACxB/a,EAAAA,WAAW,CAAC+H,EAAD,EAAK2S,YAAL,EAAmB;AAC1B,SAAK3S,EAAL,GAAUA,EAAV;AACA,SAAK2S,YAAL,GAAoBA,YAApB;AACA,SAAKM,OAAL,GAAe,CAAf;AACA,SAAKC,MAAL,GAAc,CAAd;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKR,eAAL,GAAuB,EAAvB;AACA,SAAKlD,WAAL,GAAmB,EAAnB;AACH;;AACU,MAAP2D,OAAO,GAAG;AACV,WAAO;AACHC,MAAAA,UAAU,EAAE,KAAKH,QAAL,GAAgB,SAAhB,GAA4B,QADrC;AAEHI,MAAAA,OAAO,EAAE,KAAKJ,QAAL,GAAgB,GAAhB,GAAsB,GAF5B;AAGHK,MAAAA,GAAG,EAAE,KAAKN,MAAL,GAAc,IAHhB;AAIHO,MAAAA,IAAI,EAAE,KAAKR,OAAL,GAAe;AAJlB,KAAP;AAMH;;AACO,MAAJ1Z,IAAI,GAAG;AACP,WAAO,KAAK0H,MAAL,CAAY1H,IAAnB;AACH;;AACDqV,EAAAA,WAAW,CAACpW,CAAD,EAAI;AACX,UAAM8P,MAAM,GAAG9P,CAAC,CAAC8P,MAAjB;;AACA,QAAI,KAAKtI,EAAL,CAAQ/G,aAAR,CAAsBsV,QAAtB,CAA+BjG,MAA/B,KAA0CA,MAAM,CAACoL,QAAP,KAAoB,OAAlE,EAA2E;AACvElb,MAAAA,CAAC,CAACE,cAAF;AACA;AACH;;AACD,SAAK0a,QAAL,GAAgB,IAAhB;AACH;;AACDO,EAAAA,SAAS,CAACnb,CAAD,EAAI;AACT,UAAM8P,MAAM,GAAG9P,CAAC,CAAC8P,MAAjB;;AACA,QAAIA,MAAM,CAACoL,QAAP,KAAoB,OAAxB,EAAiC;AAC7B;AACH;;AACD,SAAKN,QAAL,GAAgB,IAAhB;AACA,SAAKQ,IAAL;AACH;;AACD7Z,EAAAA,SAAS,CAACvB,CAAD,EAAI;AACT,UAAM8P,MAAM,GAAG9P,CAAC,CAAC8P,MAAjB;;AACA,QAAI,KAAKtI,EAAL,CAAQ/G,aAAR,CAAsBsV,QAAtB,CAA+BjG,MAA/B,KAA0CA,MAAM,CAACoL,QAAP,KAAoB,OAAlE,EAA2E;AACvElb,MAAAA,CAAC,CAACE,cAAF;AACA;AACH;;AACD,SAAK0a,QAAL,GAAgB,KAAhB;AACA,SAAKS,SAAL;AACH;;AACDC,EAAAA,OAAO,CAACtb,CAAD,EAAI;AACP,UAAM8P,MAAM,GAAG9P,CAAC,CAAC8P,MAAjB;;AACA,QAAIA,MAAM,CAACoL,QAAP,KAAoB,OAAxB,EAAiC;AAC7B;AACH;;AACD,SAAKN,QAAL,GAAgB,KAAhB;AACA,SAAKS,SAAL;AACH;;AACDA,EAAAA,SAAS,GAAG;AACR,QAAI,CAAC,KAAKta,IAAV,EAAgB;AACZ;AACH;;AACD,SAAKsD,MAAL,CAAY,KAAKtD,IAAjB;AACH;;AACDsZ,EAAAA,OAAO,CAACrN,IAAD,EAAO;AACV,UAAM6I,IAAI,GAAG9I,IAAI,CAACI,OAAL,CAAaH,IAAb,CAAb;AACA,WAAO,KAAKmN,YAAL,CAAkB/F,SAAlB,CAA4ByB,IAA5B,CAAP;AACH;;AACDuF,EAAAA,IAAI,GAAG;AACH,SAAKT,QAAL,GAAgB,KAAhB;AACH;;AACDY,EAAAA,IAAI,GAAG;AACH,SAAKZ,QAAL,GAAgB,IAAhB;AACH;;AACDa,EAAAA,uBAAuB,CAACza,IAAD,EAAO;AAC1B,UAAM;AAAE/D,MAAAA,KAAK,EAAE;AAAEgR,QAAAA;AAAF;AAAT,QAA2BjN,IAAjC;AACA,UAAM;AAAEkO,MAAAA;AAAF,QAAWjB,SAAjB,CAF0B,CAG1B;;AACA,UAAMyN,QAAQ,GAAG,KAAKjU,EAAL,CAAQ/G,aAAzB;AACA,UAAMib,MAAM,GAAGD,QAAQ,CAACE,qBAAT,EAAf,CAL0B,CAM1B;;AACA,UAAMC,GAAG,GAAGH,QAAQ,CAACI,aAAT,CAAuBF,qBAAvB,EAAZ;AACA,UAAMlW,KAAK,GAAG1E,IAAI,CAAC+a,WAAL,CAAiB7M,IAAjB,CAAd;AACA,QAAIgM,IAAI,GAAGxV,KAAK,CAACwV,IAAN,GAAaW,GAAG,CAACX,IAA5B;AACA,UAAMc,cAAc,GAAIH,GAAG,CAACI,KAAJ,GAAavW,KAAK,CAACwV,IAAN,GAAaS,MAAM,CAAC9a,KAAjC,IACpB8a,MAAM,CAACM,KAAP,GAAeJ,GAAG,CAACI,KADvB;;AAEA,QAAID,cAAJ,EAAoB;AAChBd,MAAAA,IAAI,GAAGW,GAAG,CAAChb,KAAJ,GAAY8a,MAAM,CAAC9a,KAA1B;AACH;;AACD,QAAIqa,IAAI,GAAG,CAAX,EAAc;AACVA,MAAAA,IAAI,GAAG,CAAP;AACH;;AACD,UAAMgB,YAAY,GAAGP,MAAM,CAACQ,MAAP,GAAgBhb,QAAQ,CAACJ,gBAAgB,CAAC2a,QAAD,CAAhB,CAA2BU,YAA5B,EAA0C,EAA1C,CAA7C;AACA,UAAMnB,GAAG,GAAIvV,KAAK,CAACuV,GAAN,GAAYY,GAAG,CAACZ,GAAjB,GAAwBiB,YAApC;AACA,WAAO;AACHhB,MAAAA,IADG;AAEHD,MAAAA;AAFG,KAAP;AAIH;;AACD3W,EAAAA,MAAM,CAACtD,IAAD,EAAO;AACT,UAAM;AAAE/D,MAAAA;AAAF,QAAY+D,IAAlB;AACA,UAAM;AAAEiN,MAAAA;AAAF,QAAgBhR,KAAtB;AACA,UAAM;AAAEoB,MAAAA;AAAF,QAAY4P,SAAlB;;AACA,QAAIA,SAAS,YAAYxU,aAAzB,EAAwC;AACpC,UAAIwU,SAAS,CAAC1P,IAAV,CAAeE,IAAf,CAAoBwO,IAApB,KAA6B,OAAjC,EAA0C;AACtC,aAAKoO,IAAL;AACA;AACH;AACJ;;AACD,UAAMzC,QAAQ,GAAG,KAAK5X,IAAL,CAAU4X,QAAV,EAAjB;;AACA,QAAI,CAACA,QAAD,IAAava,KAAb,IAAsB,KAAKwc,QAA/B,EAAyC;AACrC,WAAKQ,IAAL;AACA;AACH;;AACD,UAAM;AAAEJ,MAAAA,GAAF;AAAOC,MAAAA;AAAP,QAAgB,KAAKO,uBAAL,CAA6B,KAAKza,IAAlC,CAAtB;AACA,SAAK0Z,OAAL,GAAeQ,IAAf;AACA,SAAKP,MAAL,GAAcM,GAAd;AACA,SAAKO,IAAL;AACH;;AACD9R,EAAAA,QAAQ,GAAG;AACP,QAAI,CAAC,KAAKhB,MAAV,EAAkB;AACd,YAAM,IAAIiB,KAAJ,CAAU,qCAAV,CAAN;AACH;;AACD,SAAKuL,kBAAL,GAA0B,KAAKxM,MAAL,CAAYpE,MAAZ,CACrBN,SADqB,CACVhD,IAAD,IAAU;AACrB,WAAKsD,MAAL,CAAYtD,IAAZ;AACH,KAHyB,CAA1B;AAIA,SAAK+C,kBAAL,GAA0BvJ,SAAS,CAACsG,MAAD,EAAS,QAAT,CAAT,CAA4Bub,IAA5B,CAAiCngB,YAAY,CAAC,GAAD,EAAMzB,cAAN,EAAsB;AAAE6hB,MAAAA,OAAO,EAAE,IAAX;AAAiBC,MAAAA,QAAQ,EAAE;AAA3B,KAAtB,CAA7C,EAAuGvY,SAAvG,CAAiH,MAAM;AAC7I,WAAKsX,SAAL;AACH,KAFyB,CAA1B;AAGH;;AACDnR,EAAAA,WAAW,GAAG;AACV,SAAK+K,kBAAL,CAAwBtQ,WAAxB;AACA,SAAKb,kBAAL,CAAwBa,WAAxB;AACH;;AAnIuB;;AAqI5B6V,qBAAqB,CAAC5Y,IAAtB;AAAA,mBAAkH4Y,qBAAlH,EAlrDqG1iB,EAkrDrG,mBAAyJA,EAAE,CAACwS,UAA5J,GAlrDqGxS,EAkrDrG,mBAAmLoc,gBAAnL;AAAA;;AACAsG,qBAAqB,CAAC3Y,IAAtB,kBAnrDqG/J,EAmrDrG;AAAA,QAAsG0iB,qBAAtG;AAAA;AAAA;AAAA;AAAA;AAnrDqG1iB,MAAAA,EAmrDrG;AAAA,eAAsG,uBAAtG;AAAA,gBAnrDqGA,EAmrDrG;AAAA,eAAsG,qBAAtG;AAAA,gBAnrDqGA,EAmrDrG;AAAA,eAAsG,qBAAtG;AAAA,gBAnrDqGA,EAmrDrG;AAAA,eAAsG,mBAAtG;AAAA,gBAnrDqGA,EAmrDrG;AAAA;;AAAA;AAnrDqGA,MAAAA,EAmrDrG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAnrDqGA,MAAAA,EAmrDrG;AAnrDqGA,MAAAA,EAmrD2V,kCAAhc;AAnrDqGA,MAAAA,EAmrDyW,gBAA9c;AAnrDqGA,MAAAA,EAmrDoY,eAAze;AAnrDqGA,MAAAA,EAmrD4Y,sFAAjf;AAAA;;AAAA;AAAA,kBAnrDqGA,EAmrDrG;;AAnrDqGA,MAAAA,EAmrD2Z,aAAhgB;AAnrDqGA,MAAAA,EAmrD2Z,8CAAhgB;AAAA;AAAA;AAAA,eAA81B+B,EAAE,CAACkI,IAAj2B,EAAywBmY,eAAzwB;AAAA;AAAA;;AACA;AAAA,qDAprDqGpiB,EAorDrG,mBAA2F0iB,qBAA3F,EAA8H,CAAC;AACnHhc,IAAAA,IAAI,EAAExG,SAD6G;AAEnHgK,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,0BAAZ;AAAwCC,MAAAA,QAAQ,EAAE,yKAAlD;AAA6NC,MAAAA,MAAM,EAAE,CAAC,8HAAD;AAArO,KAAD;AAF6G,GAAD,CAA9H,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAE3D,MAAAA,IAAI,EAAE1G,EAAE,CAACwS;AAAX,KAAD,EAA0B;AAAE9L,MAAAA,IAAI,EAAE0V;AAAR,KAA1B,CAAP;AAA+D,GAHzG,EAG2H;AAAE2G,IAAAA,OAAO,EAAE,CAAC;AACvHrc,MAAAA,IAAI,EAAE7F,WADiH;AAEvHqJ,MAAAA,IAAI,EAAE,CAAC,OAAD;AAFiH,KAAD,CAAX;AAG3GyG,IAAAA,MAAM,EAAE,CAAC;AACTjK,MAAAA,IAAI,EAAEvG;AADG,KAAD,CAHmG;AAK3Gme,IAAAA,WAAW,EAAE,CAAC;AACd5X,MAAAA,IAAI,EAAE5F,YADQ;AAEdoJ,MAAAA,IAAI,EAAE,CAAC,oBAAD,EAAuB,CAAC,QAAD,CAAvB;AAFQ,KAAD,CAL8F;AAQ3GmZ,IAAAA,SAAS,EAAE,CAAC;AACZ3c,MAAAA,IAAI,EAAE5F,YADM;AAEZoJ,MAAAA,IAAI,EAAE,CAAC,kBAAD,EAAqB,CAAC,QAAD,CAArB;AAFM,KAAD,CARgG;AAW3GT,IAAAA,SAAS,EAAE,CAAC;AACZ/C,MAAAA,IAAI,EAAE5F,YADM;AAEZoJ,MAAAA,IAAI,EAAE,CAAC,kBAAD,EAAqB,CAAC,QAAD,CAArB;AAFM,KAAD,CAXgG;AAc3GsZ,IAAAA,OAAO,EAAE,CAAC;AACV9c,MAAAA,IAAI,EAAE5F,YADI;AAEVoJ,MAAAA,IAAI,EAAE,CAAC,gBAAD,EAAmB,CAAC,QAAD,CAAnB;AAFI,KAAD;AAdkG,GAH3H;AAAA;;AAsBA,MAAMua,UAAN,CAAiB;;AAEjBA,UAAU,CAAC3a,IAAX;AAAA,mBAAuG2a,UAAvG;AAAA;;AACAA,UAAU,CAACC,IAAX,kBA7sDqG1kB,EA6sDrG;AAAA,QAAwGykB;AAAxG;AAeAA,UAAU,CAACE,IAAX,kBA5tDqG3kB,EA4tDrG;AAAA,aAA+H,CACvHoc,gBADuH,CAA/H;AAAA,YAEiB,CACLpa,YADK,EAELT,mBAFK,CAFjB;AAAA;;AAMA;AAAA,qDAluDqGvB,EAkuDrG,mBAA2FykB,UAA3F,EAAmH,CAAC;AACxG/d,IAAAA,IAAI,EAAE3F,QADkG;AAExGmJ,IAAAA,IAAI,EAAE,CAAC;AACC0a,MAAAA,OAAO,EAAE,CACL5iB,YADK,EAELT,mBAFK,CADV;AAKCsjB,MAAAA,YAAY,EAAE,CACV;AACAzI,MAAAA,gBAFU,EAGV;AACA+E,MAAAA,aAJU,EAKVzE,sBALU,EAMVU,aANU,EAOV8B,iBAPU,EAQVH,cARU,EASViB,oBATU,EAUV0C,qBAVU,EAWVN,eAXU,CALf;AAkBCxP,MAAAA,SAAS,EAAE,CACPwJ,gBADO,CAlBZ;AAqBC0I,MAAAA,OAAO,EAAE,CACL3D,aADK,EAELuB,qBAFK;AArBV,KAAD;AAFkG,GAAD,CAAnH;AAAA;;AA8BA,MAAMqC,uBAAuB,GAAG,IAAI/jB,cAAJ,CAAmB,iBAAnB,CAAhC;;AACA,MAAMgkB,eAAN,CAAsB;AACJ,SAAPC,OAAO,CAAChJ,MAAD,EAAS;AACnB,WAAO;AACHiJ,MAAAA,QAAQ,EAAEF,eADP;AAEHpS,MAAAA,SAAS,EAAE,CACP;AACIH,QAAAA,OAAO,EAAEsS,uBADb;AAEII,QAAAA,QAAQ,EAAElJ;AAFd,OADO,EAKP;AACIxJ,QAAAA,OAAO,EAAEsJ,sBADb;AAEIqJ,QAAAA,UAAU,EAAEjJ,uBAFhB;AAGIkJ,QAAAA,IAAI,EAAE,CAACN,uBAAD;AAHV,OALO;AAFR,KAAP;AAcH;;AACc,SAARO,QAAQ,CAACrJ,MAAD,EAAS;AACpB,WAAO;AACHiJ,MAAAA,QAAQ,EAAEF,eADP;AAEHpS,MAAAA,SAAS,EAAE,CACP;AACIH,QAAAA,OAAO,EAAEsS,uBADb;AAEII,QAAAA,QAAQ,EAAElJ;AAFd,OADO,EAKP;AACIxJ,QAAAA,OAAO,EAAEsJ,sBADb;AAEIqJ,QAAAA,UAAU,EAAEjJ,uBAFhB;AAGIkJ,QAAAA,IAAI,EAAE,CAACN,uBAAD;AAHV,OALO,EAUP/I,gBAVO;AAFR,KAAP;AAeH;;AAjCiB;;AAmCtBgJ,eAAe,CAAClb,IAAhB;AAAA,mBAA4Gkb,eAA5G;AAAA;;AACAA,eAAe,CAACN,IAAhB,kBAryDqG1kB,EAqyDrG;AAAA,QAA6GglB;AAA7G;AAKAA,eAAe,CAACL,IAAhB,kBA1yDqG3kB,EA0yDrG;AAAA,aAAyI,EAAzI;AAAA,YAAuJ,CAC3IgC,YAD2I,EAE3IyiB,UAF2I,CAAvJ;AAAA;;AAIA;AAAA,qDA9yDqGzkB,EA8yDrG,mBAA2FglB,eAA3F,EAAwH,CAAC;AAC7Gte,IAAAA,IAAI,EAAE3F,QADuG;AAE7GmJ,IAAAA,IAAI,EAAE,CAAC;AACC0a,MAAAA,OAAO,EAAE,CACL5iB,YADK,EAELyiB,UAFK,CADV;AAKC7R,MAAAA,SAAS,EAAE,EALZ;AAMCiS,MAAAA,YAAY,EAAE,CACV7U,kBADU,EAEVtI,kBAFU,CANf;AAUCod,MAAAA,OAAO,EAAE,CACL9U,kBADK,EAELmR,aAFK,EAGLuB,qBAHK;AAVV,KAAD;AAFuG,GAAD,CAAxH;AAAA;;AAoBA,MAAM6C,iBAAiB,GAAIzV,KAAD,IAAW;AACjC;AACA,SAAOA,KAAK,KAAK,IAAV,IAAkBA,KAAK,CAAClJ,MAAN,KAAiB,CAA1C;AACH,CAHD;;AAIA,MAAM4e,cAAc,GAAI1V,KAAD,IAAW;AAC9B;AACA,SAAOA,KAAK,IAAI,IAAT,IAAiB,OAAOA,KAAK,CAAClJ,MAAb,KAAwB,QAAhD;AACH,CAHD;;AAIA,MAAM6e,UAAU,GAAItf,GAAD,IAAS;AACxB,MAAI,CAACA,GAAL,EAAU;AACN,WAAO,IAAP;AACH;;AACD,QAAM;AAAEE,IAAAA,UAAF;AAAcqf,IAAAA;AAAd,MAA6Bvf,GAAnC;AACA,SAAO6Q,OAAO,CAAC3Q,UAAU,KAAK,CAAf,KAAqBqf,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwDA,UAAU,CAACC,WAAxF,KAAwGD,UAAU,CAACpX,OAAX,CAAmBsX,IAAnB,KAA4B,CAArI,CAAd;AACH,CAND,C,CAOA;;;AACA,MAAMvkB,UAAN,CAAiB;AACE,SAARkc,QAAQ,CAACsI,UAAD,EAAa;AACxB,WAAQC,OAAD,IAAa;AAChB,YAAM9W,QAAQ,GAAG6W,UAAU,IAAIxjB,MAA/B;AACA,YAAM8D,GAAG,GAAG0J,YAAY,CAACiW,OAAO,CAAChW,KAAT,EAAgBd,QAAhB,CAAxB;AACA,YAAM+W,OAAO,GAAGN,UAAU,CAACtf,GAAD,CAA1B;;AACA,UAAI,CAAC4f,OAAL,EAAc;AACV,eAAO,IAAP;AACH;;AACD,aAAO;AACHxI,QAAAA,QAAQ,EAAE;AADP,OAAP;AAGH,KAVD;AAWH;;AACe,SAATyI,SAAS,CAACA,SAAD,EAAYH,UAAZ,EAAwB;AACpC,WAAQC,OAAD,IAAa;AAChB,YAAM9W,QAAQ,GAAG6W,UAAU,IAAIxjB,MAA/B;AACA,YAAM8D,GAAG,GAAG0J,YAAY,CAACiW,OAAO,CAAChW,KAAT,EAAgBd,QAAhB,CAAxB;AACA,YAAMc,KAAK,GAAG3J,GAAG,CAACC,WAAlB;;AACA,UAAIof,cAAc,CAAC1V,KAAD,CAAd,IAAyBA,KAAK,CAAClJ,MAAN,GAAeof,SAA5C,EAAuD;AACnD,eAAO;AACHC,UAAAA,SAAS,EAAE;AACPC,YAAAA,cAAc,EAAEF,SADT;AAEPG,YAAAA,YAAY,EAAErW,KAAK,CAAClJ;AAFb;AADR,SAAP;AAMH;;AACD,aAAO,IAAP;AACH,KAbD;AAcH;;AACe,SAATwf,SAAS,CAACA,SAAD,EAAYP,UAAZ,EAAwB;AACpC,WAAQC,OAAD,IAAa;AAChB,YAAM9W,QAAQ,GAAG6W,UAAU,IAAIxjB,MAA/B;AACA,YAAM8D,GAAG,GAAG0J,YAAY,CAACiW,OAAO,CAAChW,KAAT,EAAgBd,QAAhB,CAAxB;AACA,YAAMc,KAAK,GAAG3J,GAAG,CAACC,WAAlB;;AACA,UAAImf,iBAAiB,CAACzV,KAAD,CAAjB,IAA4B,CAAC0V,cAAc,CAAC1V,KAAD,CAA/C,EAAwD;AACpD;AACA;AACA,eAAO,IAAP;AACH;;AACD,UAAIA,KAAK,CAAClJ,MAAN,GAAewf,SAAnB,EAA8B;AAC1B,eAAO;AACHC,UAAAA,SAAS,EAAE;AACPH,YAAAA,cAAc,EAAEE,SADT;AACoBD,YAAAA,YAAY,EAAErW,KAAK,CAAClJ;AADxC;AADR,SAAP;AAKH;;AACD,aAAO,IAAP;AACH,KAjBD;AAkBH;;AAjDY;;AAoDjB,MAAM0f,QAAQ,GAAG,CAACpR,IAAD,EAAOK,MAAM,GAAG,KAAhB,KAA0B;AACvC,SAAO,CAACrQ,KAAD,EAAQ2F,QAAR,KAAqB;AACxB,UAAMiS,OAAO,GAAG,IAAIxH,IAAJ,CAASJ,IAAT,CAAhB;;AACA,QAAI,CAACK,MAAL,EAAa;AACT,aAAOuH,OAAO,CAAC1X,KAAR,GAAgBF,KAAhB,EAAuB2F,QAAvB,CAAP;AACH;;AACD,WAAOiS,OAAO,CAACvH,MAAR,GAAiBrQ,KAAjB,EAAwB2F,QAAxB,CAAP;AACH,GAND;AAOH,CARD;;AASA,MAAM0b,cAAN,CAAqB;AACjB5e,EAAAA,WAAW,CAACsB,IAAD,EAAO;AACd,SAAKud,QAAL,GAAiBnhB,EAAD,IAAQ;AACpB,WAAKH,KAAL,GAAa,KAAKA,KAAL,CAAWE,KAAX,CAAiBC,EAAE,KAAK,IAAP,IAAeA,EAAE,KAAK,KAAK,CAA3B,GAA+BA,EAA/B,GAAoC,KAAKA,EAA1D,CAAb;AACA,WAAKA,EAAL,GAAU,KAAKH,KAAL,CAAWG,EAArB;AACA,WAAKA,EAAL,CAAQ6L,OAAR,CAAgB,aAAhB,EAA+B,IAA/B;AACH,KAJD;;AAKA,SAAKrG,QAAL,GAAiBxF,EAAD,IAAQ;AACpB,WAAKmhB,QAAL,CAAcnhB,EAAd;AACH,KAFD;;AAGA,QAAI,CAAC4D,IAAL,EAAW;AACP,YAAM2I,KAAK,CAAC,kDAAD,CAAX;AACH;;AACD,SAAK3I,IAAL,GAAYA,IAAZ;AACA,SAAK/D,KAAL,GAAa+D,IAAI,CAAC/D,KAAlB;AACA,SAAKG,EAAL,GAAU,KAAK4D,IAAL,CAAU/D,KAAV,CAAgBG,EAA1B;AACH;;AACDqI,EAAAA,IAAI,GAAG;AACH;AACA,QAAI,CAAC,KAAKrI,EAAL,CAAQG,OAAR,CAAgB,aAAhB,CAAL,EAAqC;AACjC,aAAO,KAAP;AACH;;AACD,UAAMihB,SAAS,GAAG,CAAC,KAAKxd,IAAL,CAAU/D,KAAV,CAAgBiB,GAAhB,CAAoBugB,EAApB,CAAuB,KAAKxhB,KAAL,CAAWiB,GAAlC,CAAnB;AACA,SAAK8C,IAAL,CAAU0d,WAAV,CAAsB,KAAKzhB,KAA3B;AACA,UAAMG,EAAE,GAAG,KAAKA,EAAL,CACN6L,OADM,CACE,YADF,EACgBuV,SADhB,CAAX;AAEA,SAAKxd,IAAL,CAAU4B,QAAV,CAAmBxF,EAAnB;AACA,WAAO,IAAP;AACH;;AACDkC,EAAAA,KAAK,GAAG;AACJ,SAAK0B,IAAL,CAAU1B,KAAV;AACA,WAAO,IAAP;AACH;;AACD2Q,EAAAA,cAAc,GAAG;AACb,SAAK7S,EAAL,CAAQ6S,cAAR;AACA,SAAKsO,QAAL;AACA,WAAO,IAAP;AACH;;AACDI,EAAAA,UAAU,CAAC5gB,IAAD,EAAO;AACb,SAAKX,EAAL,CAAQuhB,UAAR,CAAmB5gB,IAAnB;AACA,SAAKwgB,QAAL;AACA,WAAO,IAAP;AACH;;AACDK,EAAAA,aAAa,GAAG;AACZ,UAAMC,eAAe,GAAG,CAAC/jB,aAAD,EAAgBC,mBAAhB,EAAqCC,cAArC,EAAqDC,UAArD,CAAxB;AACAC,IAAAA,aAAa,CAAC,GAAG2jB,eAAJ,CAAb,CAAkC,KAAK5hB,KAAvC,EAA8C,KAAK2F,QAAnD;AACA,WAAO,IAAP;AACH;;AACDvH,EAAAA,SAAS,CAAC4R,IAAD,EAAO;AACZoR,IAAAA,QAAQ,CAACpR,IAAD,EAAO,KAAP,CAAR,CAAsB,KAAKhQ,KAA3B,EAAkC,KAAK2F,QAAvC;AACA,WAAO,IAAP;AACH;;AACDlI,EAAAA,UAAU,CAACuS,IAAD,EAAO;AACboR,IAAAA,QAAQ,CAACpR,IAAD,EAAO,IAAP,CAAR,CAAqB,KAAKhQ,KAA1B,EAAiC,KAAK2F,QAAtC;AACA,WAAO,IAAP;AACH;;AACDyI,EAAAA,IAAI,GAAG;AACHgT,IAAAA,QAAQ,CAAC,QAAD,CAAR,CAAmB,KAAKphB,KAAxB,EAA+B,KAAK2F,QAApC;AACA,WAAO,IAAP;AACH;;AACDkc,EAAAA,UAAU,GAAG;AACTT,IAAAA,QAAQ,CAAC,QAAD,EAAW,IAAX,CAAR,CAAyB,KAAKphB,KAA9B,EAAqC,KAAK2F,QAA1C;AACA,WAAO,IAAP;AACH;;AACDmc,EAAAA,OAAO,GAAG;AACNV,IAAAA,QAAQ,CAAC,IAAD,CAAR,CAAe,KAAKphB,KAApB,EAA2B,KAAK2F,QAAhC;AACA,WAAO,IAAP;AACH;;AACDoc,EAAAA,aAAa,GAAG;AACZX,IAAAA,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAR,CAAqB,KAAKphB,KAA1B,EAAiC,KAAK2F,QAAtC;AACA,WAAO,IAAP;AACH;;AACD4I,EAAAA,SAAS,GAAG;AACR6S,IAAAA,QAAQ,CAAC,GAAD,CAAR,CAAc,KAAKphB,KAAnB,EAA0B,KAAK2F,QAA/B;AACA,WAAO,IAAP;AACH;;AACDqc,EAAAA,eAAe,GAAG;AACdZ,IAAAA,QAAQ,CAAC,GAAD,EAAM,IAAN,CAAR,CAAoB,KAAKphB,KAAzB,EAAgC,KAAK2F,QAArC;AACA,WAAO,IAAP;AACH;;AACD6I,EAAAA,MAAM,GAAG;AACL4S,IAAAA,QAAQ,CAAC,GAAD,CAAR,CAAc,KAAKphB,KAAnB,EAA0B,KAAK2F,QAA/B;AACA,WAAO,IAAP;AACH;;AACDsc,EAAAA,YAAY,GAAG;AACXb,IAAAA,QAAQ,CAAC,GAAD,EAAM,IAAN,CAAR,CAAoB,KAAKphB,KAAzB,EAAgC,KAAK2F,QAArC;AACA,WAAO,IAAP;AACH;;AACD2I,EAAAA,IAAI,GAAG;AACH8S,IAAAA,QAAQ,CAAC,MAAD,CAAR,CAAiB,KAAKphB,KAAtB,EAA6B,KAAK2F,QAAlC;AACA,WAAO,IAAP;AACH;;AACDuc,EAAAA,UAAU,GAAG;AACTd,IAAAA,QAAQ,CAAC,MAAD,EAAS,IAAT,CAAR,CAAuB,KAAKphB,KAA5B,EAAmC,KAAK2F,QAAxC;AACA,WAAO,IAAP;AACH;;AACDwc,EAAAA,iBAAiB,GAAG;AAChB,UAAMvK,OAAO,GAAG,IAAInH,QAAJ,CAAa,KAAb,CAAhB;AACAmH,IAAAA,OAAO,CAACvH,MAAR,GAAiB,KAAKrQ,KAAtB,EAA6B,KAAK2F,QAAlC;AACA,WAAO,IAAP;AACH;;AACDyc,EAAAA,gBAAgB,GAAG;AACf,UAAMxK,OAAO,GAAG,IAAInH,QAAJ,CAAa,IAAb,CAAhB;AACAmH,IAAAA,OAAO,CAACvH,MAAR,GAAiB,KAAKrQ,KAAtB,EAA6B,KAAK2F,QAAlC;AACA,WAAO,IAAP;AACH;;AACD0c,EAAAA,aAAa,CAACvR,KAAD,EAAQ;AACjB,UAAM8G,OAAO,GAAG,IAAI/G,OAAJ,CAAYC,KAAZ,CAAhB;AACA8G,IAAAA,OAAO,CAACvH,MAAR,GAAiB,KAAKrQ,KAAtB,EAA6B,KAAK2F,QAAlC;AACA,WAAO,IAAP;AACH;;AACD0Q,EAAAA,UAAU,CAACvV,IAAD,EAAOe,KAAP,EAAc;AACpB,UAAM+V,OAAO,GAAG,IAAIlF,MAAJ,EAAhB;AACAkF,IAAAA,OAAO,CAACjF,MAAR,CAAe7R,IAAf,EAAqBe,KAArB,EAA4B,KAAK7B,KAAjC,EAAwC,KAAK2F,QAA7C;AACA,WAAO,IAAP;AACH;;AACD2c,EAAAA,UAAU,CAACzgB,KAAD,EAAQ;AACd,UAAM+V,OAAO,GAAG,IAAIlF,MAAJ,EAAhB;AACAkF,IAAAA,OAAO,CAACvQ,MAAR,CAAexF,KAAf,EAAsB,KAAK7B,KAA3B,EAAkC,KAAK2F,QAAvC;AACA,WAAO,IAAP;AACH;;AACD2Q,EAAAA,WAAW,CAAClR,GAAD,EAAMvD,KAAK,GAAG,EAAd,EAAkB;AACzB,UAAM+V,OAAO,GAAG,IAAIxE,OAAJ,EAAhB;AACAwE,IAAAA,OAAO,CAACjF,MAAR,CAAevN,GAAf,EAAoBvD,KAApB,EAA2B,KAAK7B,KAAhC,EAAuC,KAAK2F,QAA5C;AACA,WAAO,IAAP;AACH;;AACDsJ,EAAAA,SAAS,CAAC+E,KAAD,EAAQ;AACb,UAAM4D,OAAO,GAAG,IAAIlE,WAAJ,CAAgB,YAAhB,CAAhB;AACAkE,IAAAA,OAAO,CAAC1X,KAAR,CAAc;AAAE8T,MAAAA;AAAF,KAAd,EAAyB,KAAKhU,KAA9B,EAAqC,KAAK2F,QAA1C;AACA,WAAO,IAAP;AACH;;AACDsO,EAAAA,eAAe,CAACD,KAAD,EAAQ;AACnB,UAAM4D,OAAO,GAAG,IAAIlE,WAAJ,CAAgB,uBAAhB,CAAhB;AACAkE,IAAAA,OAAO,CAAC1X,KAAR,CAAc;AAAE+T,MAAAA,eAAe,EAAED;AAAnB,KAAd,EAA0C,KAAKhU,KAA/C,EAAsD,KAAK2F,QAA3D;AACA,WAAO,IAAP;AACH;;AACD4c,EAAAA,eAAe,GAAG;AACd,UAAM3K,OAAO,GAAG,IAAIlE,WAAJ,CAAgB,YAAhB,CAAhB;AACAkE,IAAAA,OAAO,CAAC1E,MAAR,GAAiB,KAAKlT,KAAtB,EAA6B,KAAK2F,QAAlC;AACA,WAAO,IAAP;AACH;;AACD6c,EAAAA,qBAAqB,GAAG;AACpB,UAAM5K,OAAO,GAAG,IAAIlE,WAAJ,CAAgB,uBAAhB,CAAhB;AACAkE,IAAAA,OAAO,CAAC1E,MAAR,GAAiB,KAAKlT,KAAtB,EAA6B,KAAK2F,QAAlC;AACA,WAAO,IAAP;AACH;;AACDqM,EAAAA,KAAK,CAACyQ,CAAD,EAAI;AACL,UAAM7K,OAAO,GAAG,IAAI7F,SAAJ,CAAc0Q,CAAd,CAAhB;AACA7K,IAAAA,OAAO,CAACvH,MAAR,GAAiB,KAAKrQ,KAAtB,EAA6B,KAAK2F,QAAlC;AACA,WAAO,IAAP;AACH;;AACD+c,EAAAA,UAAU,CAACzY,IAAD,EAAO;AACb,UAAM;AAAE+G,MAAAA,SAAF;AAAa7T,MAAAA,MAAb;AAAqBgD,MAAAA;AAArB,QAA4B,KAAKH,KAAvC;AACA,UAAM;AAAEiS,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAelB,SAArB;AACA,UAAM2R,OAAO,GAAGne,QAAQ,CAAC6B,aAAT,CAAuB,KAAvB,CAAhB;AACAsc,IAAAA,OAAO,CAACrY,SAAR,GAAoBL,IAAI,CAAC2Y,IAAL,EAApB;AACA,UAAM7Z,KAAK,GAAG7L,SAAS,CAACgN,UAAV,CAAqB/M,MAArB,EAA6B0lB,UAA7B,CAAwCF,OAAxC,CAAd;AACA,UAAM/c,WAAW,GAAGzF,EAAE,CAAC2iB,YAAH,CAAgB7Q,IAAhB,EAAsBC,EAAtB,EAA0BnJ,KAA1B,CAApB;AACA,SAAKuY,QAAL,CAAc1b,WAAd;AACA,WAAO,IAAP;AACH;;AAhKgB;;AAmKrB,MAAMmd,OAAO,GAAG,OAAOC,SAAP,KAAqB,WAArB,GAAmC,MAAMC,IAAN,CAAWD,SAAS,CAACE,QAArB,CAAnC,GAAoE,KAApF,C,CACA;AACA;AACA;AACA;;AACA,MAAMC,cAAc,GAAI9Q,QAAD,IAAc;AACjC,SAAO9S,iBAAiB,CAAC,UAAD,EAAa8S,QAAb,CAAxB;AACH,CAFD,C,CAGA;AACA;AACA;;;AACA,MAAM+Q,eAAe,GAAI/Q,QAAD,IAAc;AAClC,SAAO9S,iBAAiB,CAAC,aAAD,EAAgB8S,QAAhB,EAA0B9J,KAAK,KAAK;AAAE8a,IAAAA,KAAK,EAAE,CAAC9a,KAAK,CAAC,CAAD;AAAf,GAAL,CAA/B,EAA2D,CAACA,KAAD,EAAQjH,IAAR,KAAiBA,IAAI,CAACH,UAAL,GAAkBG,IAAI,CAACO,KAAL,CAAW,OAAX,CAAlB,KAA0C,CAAC0G,KAAK,CAAC,CAAD,CAA5H,CAAxB;AACH,CAFD,C,CAGA;AACA;AACA;AACA;;;AACA,MAAM+a,cAAc,GAAIjR,QAAD,IAAc;AACjC,SAAO9S,iBAAiB,CAAC,gBAAD,EAAmB8S,QAAnB,CAAxB;AACH,CAFD,C,CAGA;AACA;AACA;;;AACA,MAAMkR,aAAa,GAAIlR,QAAD,IAAc;AAChC,SAAO7S,sBAAsB,CAAC,OAAD,EAAU6S,QAAV,CAA7B;AACH,CAFD,C,CAGA;AACA;AACA;AACA;AACA;;;AACA,MAAMmR,WAAW,GAAG,CAACnR,QAAD,EAAWoR,QAAX,KAAwB;AACxC,SAAOjkB,sBAAsB,CAAC,IAAIkkB,MAAJ,CAAW,WAAWD,QAAX,GAAsB,QAAjC,CAAD,EAA6CpR,QAA7C,EAAwD9J,KAAD,KAAY;AAAEuI,IAAAA,KAAK,EAAEvI,KAAK,CAAC,CAAD,CAAL,CAAS7G;AAAlB,GAAZ,CAAvD,CAA7B;AACH,CAFD,C,CAGA;AACA;;;AACA,MAAMiiB,QAAQ,GAAIC,QAAD,IAAc;AAC3B,SAAOjlB,aAAa,CAAC,+CAAD,EAAkDilB,QAAlD,CAApB;AACH,CAFD,C,CAGA;AACA;;;AACA,MAAMC,MAAM,GAAID,QAAD,IAAc;AACzB,SAAOjlB,aAAa,CAAC,yCAAD,EAA4CilB,QAA5C,CAApB;AACH,CAFD,C,CAGA;AACA;AACA;;;AACA,MAAME,eAAe,GAAI3mB,MAAD,IAAY;AAChC,QAAM4mB,KAAK,GAAGtkB,WAAW,CAACukB,MAAZ,CAAmBtkB,QAAnB,EAA6BC,MAA7B,CAAd;AACAokB,EAAAA,KAAK,CAACjiB,IAAN,CAAW6hB,QAAQ,CAACxmB,MAAM,CAACC,KAAP,CAAa,QAAb,CAAD,CAAnB;AACA2mB,EAAAA,KAAK,CAACjiB,IAAN,CAAW+hB,MAAM,CAAC1mB,MAAM,CAACC,KAAP,CAAa,IAAb,CAAD,CAAjB;AACA2mB,EAAAA,KAAK,CAACjiB,IAAN,CAAWqhB,cAAc,CAAChmB,MAAM,CAACE,KAAP,CAAa,YAAb,CAAD,CAAzB;AACA0mB,EAAAA,KAAK,CAACjiB,IAAN,CAAWshB,eAAe,CAACjmB,MAAM,CAACE,KAAP,CAAa,cAAb,CAAD,CAA1B;AACA0mB,EAAAA,KAAK,CAACjiB,IAAN,CAAWwhB,cAAc,CAACnmB,MAAM,CAACE,KAAP,CAAa,aAAb,CAAD,CAAzB;AACA0mB,EAAAA,KAAK,CAACjiB,IAAN,CAAWyhB,aAAa,CAACpmB,MAAM,CAACE,KAAP,CAAa,YAAb,CAAD,CAAxB;AACA0mB,EAAAA,KAAK,CAACjiB,IAAN,CAAW0hB,WAAW,CAACrmB,MAAM,CAACE,KAAP,CAAa,SAAb,CAAD,EAA0B,CAA1B,CAAtB;AACA,SAAOuC,UAAU,CAAC;AAAEmkB,IAAAA;AAAF,GAAD,CAAjB;AACH,CAVD;;AAWA,MAAME,oBAAoB,GAAG,CAAC9mB,MAAD,EAAS8V,OAAT,KAAqB;AAC9C,QAAMiR,aAAa,GAAG,EAAtB;AACAA,EAAAA,aAAa,CAAC,OAAD,CAAb,GAAyB9kB,IAAzB;;AACA,MAAI2jB,OAAJ,EAAa;AACTmB,IAAAA,aAAa,CAAC,aAAD,CAAb,GAA+B7kB,IAA/B;AACH,GAFD,MAGK;AACD6kB,IAAAA,aAAa,CAAC,OAAD,CAAb,GAAyB7kB,IAAzB;AACH;;AACD,QAAM8kB,OAAO,GAAG,CACZhlB,MAAM,CAAC;AACH,aAAS1B,UAAU,CAACN,MAAM,CAACC,KAAP,CAAa,QAAb,CAAD,CADhB;AAEH,aAASK,UAAU,CAACN,MAAM,CAACC,KAAP,CAAa,IAAb,CAAD,CAFhB;AAGH,aAASK,UAAU,CAACN,MAAM,CAACC,KAAP,CAAa,GAAb,CAAD,CAHhB;AAIH,aAASK,UAAU,CAACN,MAAM,CAACC,KAAP,CAAa,MAAb,CAAD;AAJhB,GAAD,CADM,EAOZ+B,MAAM,CAAC;AACHilB,IAAAA,KAAK,EAAEtlB,aAAa,CAAC3B,MAAM,CAACE,KAAP,CAAa,WAAb,CAAD,CADjB;AAEH,mBAAeY,aAAa,CAACC,QAAD,EAAW,CAAC8B,KAAD,EAAQ2F,QAAR,KAAqB;AACxD,YAAMxF,EAAE,GAAGH,KAAK,CAACG,EAAjB;AACA,YAAMkkB,EAAE,GAAGlnB,MAAM,CAACE,KAAP,CAAa,YAAb,CAAX;AACAsI,MAAAA,QAAQ,CAACxF,EAAE,CAAC4S,oBAAH,CAAwBsR,EAAE,CAACriB,MAAH,EAAxB,EAAqCgR,cAArC,EAAD,CAAR;AACA,aAAO,IAAP;AACH,KAL2B,CAFzB;AAQH,aAASpU,YAAY,CAACzB,MAAM,CAACE,KAAP,CAAa,WAAb,CAAD,CARlB;AASH,aAAS0B,YAAY,CAAC5B,MAAM,CAACE,KAAP,CAAa,WAAb,CAAD,CATlB;AAUHinB,IAAAA,GAAG,EAAEvlB,YAAY,CAAC5B,MAAM,CAACE,KAAP,CAAa,WAAb,CAAD;AAVd,GAAD,CAPM,EAmBZ8B,MAAM,CAAChB,UAAD,CAnBM,CAAhB;;AAqBA,MAAI8U,OAAO,CAAC3T,OAAZ,EAAqB;AACjB6kB,IAAAA,OAAO,CAACriB,IAAR,CAAa3C,MAAM,CAAC+kB,aAAD,CAAnB;AACH;;AACD,SAAOC,OAAP;AACH,CAlCD;;AAmCA,MAAMI,iBAAiB,GAAG,CAACpnB,MAAD,EAAS8V,OAAT,KAAqB;AAC3C,QAAMkR,OAAO,GAAG,EAAhB;;AACA,MAAIlR,OAAO,CAACuR,iBAAZ,EAA+B;AAC3BL,IAAAA,OAAO,CAACriB,IAAR,CAAa,GAAGmiB,oBAAoB,CAAC9mB,MAAD,EAAS;AAAEmC,MAAAA,OAAO,EAAE2T,OAAO,CAAC3T;AAAnB,KAAT,CAApC;AACH;;AACD,MAAI2T,OAAO,CAAC3T,OAAZ,EAAqB;AACjB6kB,IAAAA,OAAO,CAACriB,IAAR,CAAaxC,OAAO,EAApB;AACH;;AACD,MAAI2T,OAAO,CAACrT,UAAZ,EAAwB;AACpBukB,IAAAA,OAAO,CAACriB,IAAR,CAAagiB,eAAe,CAAC3mB,MAAD,CAA5B;AACH;;AACD,SAAOgnB,OAAP;AACH,CAZD;;AAcA,MAAMM,eAAe,GAAG;AACpBjY,EAAAA,WAAW,EAAE,IADO;AAEpBrJ,EAAAA,WAAW,EAAE;AAFO,CAAxB;AAIA,MAAMuhB,eAAe,GAAG;AACpBtb,EAAAA,OAAO,EAAE,IADW;AAEpB9J,EAAAA,OAAO,EAAE,IAFW;AAGpBklB,EAAAA,iBAAiB,EAAE,IAHC;AAIpB5kB,EAAAA,UAAU,EAAE,IAJQ;AAKpBzC,EAAAA,MAAM,EAAEA,MALY;AAMpBgnB,EAAAA,OAAO,EAAE,EANW;AAOpBrc,EAAAA,SAAS,EAAE,EAPS;AAQpBrH,EAAAA,UAAU,EAAE,EARQ;AASpB8L,EAAAA,QAAQ,EAAEkY;AATU,CAAxB;;AAWA,MAAME,MAAN,CAAa;AACTliB,EAAAA,WAAW,CAACwQ,OAAO,GAAGyR,eAAX,EAA4B;AACnC,SAAKE,mBAAL,GAA2B,IAAItnB,OAAJ,EAA3B;AACA,SAAKunB,aAAL,GAAqB,IAAIvnB,OAAJ,EAArB;AACA,SAAK2V,OAAL,GAAe3B,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBmT,eAAlB,EAAmCzR,OAAnC,CAAf;AACA,SAAK6R,YAAL;AACH;;AACe,MAAZjY,YAAY,GAAG;AACf,WAAO,KAAK+X,mBAAL,CAAyBG,YAAzB,EAAP;AACH;;AACS,MAAN1d,MAAM,GAAG;AACT,WAAO,KAAKwd,aAAL,CAAmBE,YAAnB,EAAP;AACH;;AACS,MAAN5nB,MAAM,GAAG;AACT,WAAO,KAAK8V,OAAL,CAAa9V,MAAb,IAAuBA,MAA9B;AACH;;AACW,MAAR6nB,QAAQ,GAAG;AACX,WAAO,IAAI3D,cAAJ,CAAmB,KAAKtd,IAAxB,CAAP;AACH;;AACW,MAARwI,QAAQ,GAAG;AACX,WAAO+E,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBkT,eAAlB,CAAd,EAAkD,KAAKxR,OAAL,CAAa1G,QAA/D,CAAP;AACH;;AACD0Y,EAAAA,kBAAkB,CAAC9kB,EAAD,EAAK;AACnB,UAAMH,KAAK,GAAG,KAAK+D,IAAL,CAAU/D,KAAV,CAAgBE,KAAhB,CAAsBC,EAAtB,CAAd;AACA,SAAK4D,IAAL,CAAU0d,WAAV,CAAsBzhB,KAAtB;AACA,SAAK6kB,aAAL,CAAmB5W,IAAnB,CAAwB,KAAKlK,IAA7B;;AACA,QAAI,CAAC5D,EAAE,CAACmS,UAAJ,IAAkB,CAACnS,EAAE,CAACG,OAAH,CAAW,YAAX,CAAvB,EAAiD;AAC7C;AACH;;AACD,UAAMsJ,IAAI,GAAG5J,KAAK,CAACiB,GAAN,CAAUyJ,MAAV,EAAb;AACA,SAAKka,mBAAL,CAAyB3W,IAAzB,CAA8BrE,IAA9B;AACH;;AACDkb,EAAAA,YAAY,GAAG;AACX,QAAIzkB,EAAJ,EAAQuS,EAAR;;AACA,UAAM;AAAEK,MAAAA;AAAF,QAAc,IAApB;AACA,UAAM;AAAE7J,MAAAA,OAAO,GAAG,IAAZ;AAAkBtB,MAAAA;AAAlB,QAAgCmL,OAAtC;AACA,UAAM;AAAE3T,MAAAA,OAAO,GAAG,IAAZ;AAAkBklB,MAAAA,iBAAiB,GAAG,IAAtC;AAA4C5kB,MAAAA,UAAU,GAAG;AAAzD,QAAkEqT,OAAxE;AACA,UAAM9V,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM8D,GAAG,GAAG0J,YAAY,CAACvB,OAAD,EAAUjM,MAAV,CAAxB;AACA,UAAMgnB,OAAO,GAAG,CAAC9jB,EAAE,GAAG4S,OAAO,CAACkR,OAAd,MAA2B,IAA3B,IAAmC9jB,EAAE,KAAK,KAAK,CAA/C,GAAmDA,EAAnD,GAAwD,EAAxE;AACA,UAAMI,UAAU,GAAG,CAACmS,EAAE,GAAGK,OAAO,CAACxS,UAAd,MAA8B,IAA9B,IAAsCmS,EAAE,KAAK,KAAK,CAAlD,GAAsDA,EAAtD,GAA2D,EAA9E;AACA,UAAMsS,cAAc,GAAGX,iBAAiB,CAACpnB,MAAD,EAAS;AAC7CmC,MAAAA,OAD6C;AAE7CklB,MAAAA,iBAF6C;AAG7C5kB,MAAAA;AAH6C,KAAT,CAAxC;AAKA,SAAKmE,IAAL,GAAY,IAAInH,UAAJ,CAAe,IAAf,EAAqB;AAC7BoD,MAAAA,KAAK,EAAEvD,WAAW,CAACuF,MAAZ,CAAmB;AACtBf,QAAAA,GADsB;AAEtB9D,QAAAA,MAFsB;AAGtBgnB,QAAAA,OAAO,EAAE,CAAC,GAAGe,cAAJ,EAAoB,GAAGf,OAAvB;AAHa,OAAnB,CADsB;AAM7Brc,MAAAA,SAN6B;AAO7Bqd,MAAAA,mBAAmB,EAAE,KAAKF,kBAAL,CAAwBG,IAAxB,CAA6B,IAA7B,CAPQ;AAQ7B3kB,MAAAA;AAR6B,KAArB,CAAZ;AAUH;;AACDiL,EAAAA,UAAU,CAACtC,OAAD,EAAU;AAChB,QAAIlK,KAAK,CAACkK,OAAD,CAAT,EAAoB;AAChB;AACH;;AACD,UAAM;AAAEpJ,MAAAA;AAAF,QAAY,KAAK+D,IAAvB;AACA,UAAM;AAAE5D,MAAAA,EAAF;AAAMc,MAAAA;AAAN,QAAcjB,KAApB;AACA,UAAMqlB,MAAM,GAAG1a,YAAY,CAACvB,OAAD,EAAU,KAAKjM,MAAf,CAA3B;AACAgD,IAAAA,EAAE,CAACmlB,WAAH,CAAe,CAAf,EAAkBtlB,KAAK,CAACiB,GAAN,CAAUmI,OAAV,CAAkBsX,IAApC,EAA0C2E,MAA1C,EAPgB,CAQhB;;AACA,QAAIpkB,GAAG,CAACugB,EAAJ,CAAOrhB,EAAE,CAACc,GAAV,CAAJ,EAAoB;AAChB;AACH;;AACD,QAAI,CAACd,EAAE,CAACmS,UAAR,EAAoB;AAChB;AACH;;AACD,SAAKvO,IAAL,CAAU4B,QAAV,CAAmBxF,EAAnB;AACH;;AACDmM,EAAAA,cAAc,CAACiZ,MAAD,EAAS;AACnB,UAAM;AAAEvlB,MAAAA;AAAF,QAAY,KAAK+D,IAAvB;AACA,UAAMogB,OAAO,GAAG,CAAC,GAAGnkB,KAAK,CAACmkB,OAAV,EAAmBoB,MAAnB,CAAhB;AACA,UAAMC,QAAQ,GAAGxlB,KAAK,CAACylB,WAAN,CAAkB;AAAEtB,MAAAA;AAAF,KAAlB,CAAjB;AACA,SAAKpgB,IAAL,CAAU0d,WAAV,CAAsB+D,QAAtB;AACH;;AACD9d,EAAAA,OAAO,GAAG;AACN,SAAK3D,IAAL,CAAU2D,OAAV;AACH;;AAlFQ;AAqFb;AACA;AACA;;AAEA;AACA;AACA;;;AAEA,SAASoU,eAAT,EAA0B6I,MAA1B,EAAkCnH,qBAAlC,EAAyDvB,aAAzD,EAAwEnR,kBAAxE,EAA4FgV,eAA5F,EAA6G/D,eAA7G,EAA8H5f,UAA9H,EAA0IuN,QAA1I,EAAoJiB,YAApJ,EAAkKJ,KAAlK,EAAyKZ,MAAzK","sourcesContent":["import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, ViewChild, ComponentFactoryResolver, ApplicationRef, forwardRef, ViewEncapsulation, Injectable, Optional, Pipe, HostBinding, HostListener, NgModule, InjectionToken } from '@angular/core';\nimport * as i4 from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, FormGroup, FormControl, Validators as Validators$1, ReactiveFormsModule } from '@angular/forms';\nimport { Plugin, PluginKey, NodeSelection, EditorState } from 'prosemirror-state';\nimport { DecorationSet, Decoration, EditorView } from 'prosemirror-view';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport { Fragment, Slice, DOMSerializer, DOMParser } from 'prosemirror-model';\nimport { schema } from 'ngx-editor/schema';\nexport { marks, nodes, schema } from 'ngx-editor/schema';\nimport { Subject, fromEvent, asyncScheduler } from 'rxjs';\nimport { toggleMark, lift, wrapIn, setBlockType, newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock, chainCommands, exitCode, baseKeymap } from 'prosemirror-commands';\nimport { applyMark, removeLink, removeMark } from 'ngx-editor/commands';\nimport { isMarkActive, isNodeActive, getSelectionNodes, getSelectionMarks, markInputRule } from 'ngx-editor/helpers';\nimport { liftListItem, wrapInList, splitListItem, sinkListItem } from 'prosemirror-schema-list';\nimport * as i1 from '@angular/platform-browser';\nimport { throttleTime } from 'rxjs/operators';\nimport { isNil } from 'ngx-editor/utils';\nimport { keymap } from 'prosemirror-keymap';\nimport { undo, redo, history } from 'prosemirror-history';\nimport { wrappingInputRule, textblockTypeInputRule, smartQuotes, ellipsis, emDash, inputRules } from 'prosemirror-inputrules';\n\nconst editablePlugin = (editable = true) => {\n    return new Plugin({\n        key: new PluginKey('editable'),\n        state: {\n            init() {\n                return editable;\n            },\n            apply(tr, previousVal) {\n                var _a;\n                return (_a = tr.getMeta('UPDATE_EDITABLE')) !== null && _a !== void 0 ? _a : previousVal;\n            }\n        },\n        props: {\n            editable(state) {\n                return this.getState(state);\n            },\n            attributes(state) {\n                const isEnabled = this.getState(state);\n                if (isEnabled) {\n                    return null;\n                }\n                return {\n                    class: 'NgxEditor__Content--Disabled'\n                };\n            }\n        }\n    });\n};\n\nconst PLACEHOLDER_CLASSNAME = 'NgxEditor__Placeholder';\nconst placeholderPlugin = (text) => {\n    return new Plugin({\n        key: new PluginKey('placeholder'),\n        state: {\n            init() {\n                return text !== null && text !== void 0 ? text : '';\n            },\n            apply(tr, previousVal) {\n                var _a;\n                const placeholder = (_a = tr.getMeta('UPDATE_PLACEHOLDER')) !== null && _a !== void 0 ? _a : previousVal;\n                return placeholder;\n            }\n        },\n        props: {\n            decorations(state) {\n                const { doc } = state;\n                const { textContent, childCount } = doc;\n                const placeholder = this.getState(state);\n                if (!placeholder || childCount > 1) {\n                    return DecorationSet.empty;\n                }\n                const decorations = [];\n                const decorate = (node, pos) => {\n                    var _a;\n                    if (node.type.isBlock && node.childCount === 0 && textContent.length === 0) {\n                        const placeholderNode = Decoration.node(pos, (pos + node.nodeSize), {\n                            class: PLACEHOLDER_CLASSNAME,\n                            'data-placeholder': placeholder,\n                            'data-align': (_a = node.attrs['align']) !== null && _a !== void 0 ? _a : null\n                        });\n                        decorations.push(placeholderNode);\n                    }\n                    return false;\n                };\n                doc.descendants(decorate);\n                return DecorationSet.create(doc, decorations);\n            }\n        }\n    });\n};\n\nconst attributesPlugin = (attributes = {}) => {\n    return new Plugin({\n        key: new PluginKey('attributes'),\n        props: {\n            attributes\n        }\n    });\n};\n\nconst focusPlugin = (cb) => {\n    return new Plugin({\n        key: new PluginKey('focus'),\n        props: {\n            handleDOMEvents: {\n                focus: () => {\n                    cb();\n                    return false;\n                }\n            }\n        }\n    });\n};\n\nconst blurPlugin = (cb) => {\n    return new Plugin({\n        key: new PluginKey('blur'),\n        props: {\n            handleDOMEvents: {\n                blur: () => {\n                    cb();\n                    return false;\n                }\n            }\n        }\n    });\n};\n\nclass ImageViewComponent {\n    constructor() {\n        this.alt = '';\n        this.title = '';\n        this.outerWidth = '';\n        this.selected = false;\n        this.imageResize = new EventEmitter();\n    }\n    startResizing(e, direction) {\n        e.preventDefault();\n        this.resizeImage(e, direction);\n    }\n    resizeImage(evt, direction) {\n        const startX = evt.pageX;\n        const startWidth = this.imgEl.nativeElement.clientWidth;\n        const isLeftResize = direction === 'left';\n        const { width } = window.getComputedStyle(this.view.dom);\n        const editorWidth = parseInt(width, 10);\n        const onMouseMove = (e) => {\n            const currentX = e.pageX;\n            const diffInPx = currentX - startX;\n            const computedWidth = isLeftResize ? startWidth - diffInPx : startWidth + diffInPx;\n            // prevent image overflow the editor\n            // prevent resizng below 20px\n            if (computedWidth > editorWidth || computedWidth < 20) {\n                return;\n            }\n            this.outerWidth = `${computedWidth}px`;\n        };\n        const onMouseUp = (e) => {\n            e.preventDefault();\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n            this.imageResize.emit();\n        };\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n    }\n}\nImageViewComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: ImageViewComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nImageViewComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: ImageViewComponent, selector: \"ngx-image-view\", inputs: { src: \"src\", alt: \"alt\", title: \"title\", outerWidth: \"outerWidth\", selected: \"selected\", view: \"view\" }, outputs: { imageResize: \"imageResize\" }, viewQueries: [{ propertyName: \"imgEl\", first: true, predicate: [\"imgEl\"], descendants: true, static: true }], ngImport: i0, template: \"<span class=\\\"NgxEditor__ImageWrapper\\\" [ngClass]=\\\"{'NgxEditor__Resizer--Active': selected}\\\" [style.width]=\\\"outerWidth\\\">\\n  <span class=\\\"NgxEditor__ResizeHandle\\\" *ngIf=\\\"selected\\\">\\n    <span class=\\\"NgxEditor__ResizeHandle--TL\\\"  (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--TR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n  </span>\\n  <img [src]=\\\"src\\\" [alt]=\\\"alt\\\" [title]=\\\"title\\\" #imgEl />\\n</span>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}img{width:100%;height:100%}.NgxEditor__ImageWrapper{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL{bottom:-5px;left:-5px;cursor:sw-resize}\\n\"], directives: [{ type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: ImageViewComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-image-view', template: \"<span class=\\\"NgxEditor__ImageWrapper\\\" [ngClass]=\\\"{'NgxEditor__Resizer--Active': selected}\\\" [style.width]=\\\"outerWidth\\\">\\n  <span class=\\\"NgxEditor__ResizeHandle\\\" *ngIf=\\\"selected\\\">\\n    <span class=\\\"NgxEditor__ResizeHandle--TL\\\"  (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--TR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n  </span>\\n  <img [src]=\\\"src\\\" [alt]=\\\"alt\\\" [title]=\\\"title\\\" #imgEl />\\n</span>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}img{width:100%;height:100%}.NgxEditor__ImageWrapper{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL{bottom:-5px;left:-5px;cursor:sw-resize}\\n\"] }]\n        }], propDecorators: { src: [{\n                type: Input\n            }], alt: [{\n                type: Input\n            }], title: [{\n                type: Input\n            }], outerWidth: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], view: [{\n                type: Input\n            }], imageResize: [{\n                type: Output\n            }], imgEl: [{\n                type: ViewChild,\n                args: ['imgEl', { static: true }]\n            }] } });\n\nclass ImageRezieView {\n    constructor(node, view, getPos, injector) {\n        this.updating = false;\n        this.handleResize = () => {\n            if (this.updating) {\n                return;\n            }\n            const { state, dispatch } = this.view;\n            const { tr } = state;\n            const transaction = tr.setNodeMarkup(this.getPos(), undefined, {\n                src: this.imageComponentRef.instance.src,\n                width: this.imageComponentRef.instance.outerWidth\n            });\n            const resolvedPos = transaction.doc.resolve(this.getPos());\n            const newSelection = new NodeSelection(resolvedPos);\n            transaction.setSelection(newSelection);\n            dispatch(transaction);\n        };\n        const dom = document.createElement('image-view');\n        const componentFactoryResolver = injector.get(ComponentFactoryResolver);\n        this.applicationRef = injector.get(ApplicationRef);\n        // Create the component and wire it up with the element\n        const factory = componentFactoryResolver.resolveComponentFactory(ImageViewComponent);\n        this.imageComponentRef = factory.create(injector, [], dom);\n        // Attach to the view so that the change detector knows to run\n        this.applicationRef.attachView(this.imageComponentRef.hostView);\n        this.setNodeAttributes(node.attrs);\n        this.imageComponentRef.instance.view = view;\n        this.dom = dom;\n        this.view = view;\n        this.node = node;\n        this.getPos = getPos;\n        this.resizeSubscription = this.imageComponentRef.instance.imageResize.subscribe(() => {\n            this.handleResize();\n        });\n    }\n    computeChanges(prevAttrs, newAttrs) {\n        return JSON.stringify(prevAttrs) === JSON.stringify(newAttrs);\n    }\n    setNodeAttributes(attrs) {\n        this.imageComponentRef.instance.src = attrs['src'];\n        this.imageComponentRef.instance.alt = attrs['alt'];\n        this.imageComponentRef.instance.title = attrs['title'];\n        this.imageComponentRef.instance.outerWidth = attrs['width'];\n    }\n    update(node) {\n        if (node.type !== this.node.type) {\n            return false;\n        }\n        this.node = node;\n        const changed = this.computeChanges(this.node.attrs, node.attrs);\n        if (changed) {\n            this.updating = true;\n            this.setNodeAttributes(node.attrs);\n            this.updating = false;\n        }\n        return true;\n    }\n    ignoreMutation() {\n        return true;\n    }\n    selectNode() {\n        this.imageComponentRef.instance.selected = true;\n    }\n    deselectNode() {\n        this.imageComponentRef.instance.selected = false;\n    }\n    destroy() {\n        this.resizeSubscription.unsubscribe();\n        this.applicationRef.detachView(this.imageComponentRef.hostView);\n    }\n}\nconst imageResizePlugin = (injector) => {\n    return new Plugin({\n        key: new PluginKey('image-resize'),\n        props: {\n            nodeViews: {\n                image: (node, view, getPos) => {\n                    return new ImageRezieView(node, view, getPos, injector);\n                },\n            }\n        }\n    });\n};\n\nconst HTTP_LINK_REGEX = /((https?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+\\.?(:\\d+)?(\\/\\S*)?)$/;\nconst linkify = (fragment) => {\n    const linkified = [];\n    fragment.forEach((child) => {\n        if (child.isText) {\n            const text = child.text;\n            let pos = 0;\n            const match = HTTP_LINK_REGEX.exec(text);\n            if (match) {\n                const start = match.index;\n                const end = start + match[0].length;\n                const link = child.type.schema.marks.link;\n                if (start > 0) {\n                    linkified.push(child.cut(pos, start));\n                }\n                const urlText = text.slice(start, end);\n                linkified.push(child.cut(start, end).mark(link.create({ href: urlText }).addToSet(child.marks)));\n                pos = end;\n            }\n            if (pos < text.length) {\n                linkified.push(child.cut(pos));\n            }\n        }\n        else {\n            linkified.push(child.copy(linkify(child.content)));\n        }\n    });\n    return Fragment.fromArray(linkified);\n};\nconst linkifyPlugin = () => {\n    return new Plugin({\n        key: new PluginKey('linkify'),\n        props: {\n            transformPasted: (slice) => {\n                return new Slice(linkify(slice.content), slice.openStart, slice.openEnd);\n            }\n        }\n    });\n};\n\nconst emptyDoc = {\n    type: 'doc',\n    content: [\n        {\n            type: 'paragraph',\n        }\n    ],\n};\n// https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\nconst toHTML = (json, inputSchema) => {\n    const schema$1 = inputSchema !== null && inputSchema !== void 0 ? inputSchema : schema;\n    const contentNode = schema$1.nodeFromJSON(json);\n    const html = DOMSerializer.fromSchema(schema$1).serializeFragment(contentNode.content);\n    const div = document.createElement('div');\n    div.appendChild(html);\n    return div.innerHTML;\n};\nconst toDoc = (html, inputSchema) => {\n    const schema$1 = inputSchema !== null && inputSchema !== void 0 ? inputSchema : schema;\n    const el = document.createElement('div');\n    el.innerHTML = html;\n    return DOMParser.fromSchema(schema$1).parse(el).toJSON();\n};\nconst parseContent = (value, schema) => {\n    if (!value) {\n        return schema.nodeFromJSON(emptyDoc);\n    }\n    if (typeof value !== 'string') {\n        return schema.nodeFromJSON(value);\n    }\n    const docJson = toDoc(value, schema);\n    return schema.nodeFromJSON(docJson);\n};\n\nclass NgxEditorComponent {\n    constructor(_renderer, _injector, _elementRef) {\n        this._renderer = _renderer;\n        this._injector = _injector;\n        this._elementRef = _elementRef;\n        this.placeholder = 'Type Here...';\n        this.focusOut = new EventEmitter();\n        this.focusIn = new EventEmitter();\n        this.subscriptions = [];\n        this.onChange = () => { };\n        this.onTouched = () => { };\n    }\n    writeValue(value) {\n        if (!this.outputFormat && typeof value === 'string') {\n            this.outputFormat = 'html';\n        }\n        this.editor.setContent(value);\n    }\n    registerOnChange(fn) {\n        this.onChange = fn;\n    }\n    registerOnTouched(fn) {\n        this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n        this.setMeta('UPDATE_EDITABLE', !isDisabled);\n        this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n    }\n    handleChange(jsonDoc) {\n        if (this.outputFormat === 'html') {\n            const html = toHTML(jsonDoc, this.editor.schema);\n            this.onChange(html);\n            return;\n        }\n        this.onChange(jsonDoc);\n    }\n    setMeta(key, value) {\n        const { dispatch, state: { tr } } = this.editor.view;\n        dispatch(tr.setMeta(key, value));\n    }\n    setPlaceholder(placeholder) {\n        this.setMeta('UPDATE_PLACEHOLDER', placeholder);\n    }\n    registerPlugins() {\n        this.editor.registerPlugin(editablePlugin());\n        this.editor.registerPlugin(placeholderPlugin(this.placeholder));\n        this.editor.registerPlugin(attributesPlugin({\n            class: 'NgxEditor__Content'\n        }));\n        this.editor.registerPlugin(focusPlugin(() => {\n            this.focusIn.emit();\n        }));\n        this.editor.registerPlugin(focusPlugin(() => {\n            this.focusIn.emit();\n        }));\n        this.editor.registerPlugin(blurPlugin(() => {\n            this.focusOut.emit();\n            this.onTouched();\n        }));\n        if (this.editor.features.resizeImage) {\n            this.editor.registerPlugin(imageResizePlugin(this._injector));\n        }\n        if (this.editor.features.linkOnPaste) {\n            this.editor.registerPlugin(linkifyPlugin());\n        }\n    }\n    ngOnInit() {\n        if (!this.editor) {\n            throw new Error('NgxEditor: Required editor instance');\n        }\n        this.registerPlugins();\n        this._renderer.appendChild(this.ngxEditor.nativeElement, this.editor.view.dom);\n        const contentChangeSubscription = this.editor.valueChanges.subscribe(jsonDoc => {\n            this.handleChange(jsonDoc);\n        });\n        this.subscriptions.push(contentChangeSubscription);\n    }\n    ngOnChanges(changes) {\n        if ((changes === null || changes === void 0 ? void 0 : changes['placeholder']) && !changes['placeholder'].isFirstChange()) {\n            this.setPlaceholder(changes['placeholder'].currentValue);\n        }\n    }\n    ngOnDestroy() {\n        this.subscriptions.forEach(subscription => {\n            subscription.unsubscribe();\n        });\n    }\n}\nNgxEditorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorComponent, deps: [{ token: i0.Renderer2 }, { token: i0.Injector }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });\nNgxEditorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: NgxEditorComponent, selector: \"ngx-editor\", inputs: { editor: \"editor\", outputFormat: \"outputFormat\", placeholder: \"placeholder\" }, outputs: { focusOut: \"focusOut\", focusIn: \"focusIn\" }, providers: [{\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => NgxEditorComponent),\n            multi: true\n        }], viewQueries: [{ propertyName: \"ngxEditor\", first: true, predicate: [\"ngxEditor\"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: \"<div class=\\\"NgxEditor\\\" #ngxEditor>\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\".NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active{background-color:#e8f0fe}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active.NgxEditor__MenuItem--Text{color:#1a73e8}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active svg{fill:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open{background-color:#e8f0fe}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected .NgxEditor__Dropdown--Text,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open .NgxEditor__Dropdown--Text{color:#1a73e8}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\\n\"], encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-editor', providers: [{\n                            provide: NG_VALUE_ACCESSOR,\n                            useExisting: forwardRef(() => NgxEditorComponent),\n                            multi: true\n                        }], encapsulation: ViewEncapsulation.None, template: \"<div class=\\\"NgxEditor\\\" #ngxEditor>\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\".NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active{background-color:#e8f0fe}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active.NgxEditor__MenuItem--Text{color:#1a73e8}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active svg{fill:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open{background-color:#e8f0fe}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected .NgxEditor__Dropdown--Text,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open .NgxEditor__Dropdown--Text{color:#1a73e8}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.Injector }, { type: i0.ElementRef }]; }, propDecorators: { ngxEditor: [{\n                type: ViewChild,\n                args: ['ngxEditor', { static: true }]\n            }], editor: [{\n                type: Input\n            }], outputFormat: [{\n                type: Input\n            }], placeholder: [{\n                type: Input\n            }], focusOut: [{\n                type: Output\n            }], focusIn: [{\n                type: Output\n            }] } });\n\nclass MenuService {\n    constructor() {\n        this.customMenuRefChange = new Subject();\n    }\n    setCustomMenuRef(c) {\n        this.customMenuRefChange.next(c);\n    }\n}\nMenuService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: MenuService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nMenuService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: MenuService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: MenuService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }] });\n\nvar bold = `\n  <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n`;\n\nvar italic = `\n  <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\" />\n`;\n\nvar code = `\n<path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n`;\n\nvar underline = `\n<path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"/>\n`;\n\nvar strike = `\n<path d=\"M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z\"/>\n`;\n\nvar orderedList = `\n<path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"/>\n`;\n\nvar bulletList = `\n<path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\"/>\n`;\n\nvar quote = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z\"/>\n`;\n\nvar link = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n`;\n\nvar unlink = `\n<path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\"/>\n`;\n\nvar image = `\n<path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n`;\n\nvar alignLeft = `\n<path d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\"/>\n`;\n\nvar alignCenter = `\n<path d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\"/>\n`;\n\nvar alignRight = `\n<path d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\"/>\n`;\n\nvar alignJustify = `\n<path d=\"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z\"/>\n`;\n\nvar textColor = `\n<path d=\"M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z\"/>\n`;\n\nvar colorFill = `\n<path d=\"M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z\"/>\n`;\n\n// Icons source: https://material.io/\nconst DEFAULT_ICON_HEIGHT = 20;\nconst DEFAULT_ICON_WIDTH = 20;\nconst icons = {\n    bold,\n    italic,\n    code,\n    underline,\n    strike,\n    ordered_list: orderedList,\n    bullet_list: bulletList,\n    blockquote: quote,\n    link,\n    unlink,\n    image,\n    align_left: alignLeft,\n    align_center: alignCenter,\n    align_right: alignRight,\n    align_justify: alignJustify,\n    text_color: textColor,\n    color_fill: colorFill\n};\nclass Icon {\n    static get(name, fill = '#000') {\n        const path = icons[name] || '<path></path>';\n        return `\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=${fill}\n        height=${DEFAULT_ICON_HEIGHT}\n        width=${DEFAULT_ICON_WIDTH}\n      >\n        ${path}\n      </svg>\n    `;\n    }\n    static getPath(name) {\n        const path = icons[name] || '<path></path>';\n        return path;\n    }\n}\n\nclass Mark {\n    constructor(name) {\n        this.name = name;\n    }\n    apply() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            return applyMark(type)(state, dispatch);\n        };\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            return toggleMark(type)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = schema.marks[this.name];\n        if (!type) {\n            return false;\n        }\n        return isMarkActive(state, type);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass Blockqote {\n    toggle() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.nodes.blockquote;\n            if (!type) {\n                return false;\n            }\n            if (this.isActive(state)) {\n                return lift(state, dispatch);\n            }\n            return wrapIn(type)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = schema.nodes.blockquote;\n        if (!type) {\n            return false;\n        }\n        return isNodeActive(state, type);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass ListItem {\n    constructor(isBulletList = false) {\n        this.isBulletList = false;\n        this.isBulletList = isBulletList;\n    }\n    getType(schema) {\n        return this.isBulletList ? schema.nodes['bullet_list'] : schema.nodes['ordered_list'];\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = this.getType(schema);\n            if (!type) {\n                return false;\n            }\n            if (this.isActive(state)) {\n                return liftListItem(schema.nodes.list_item)(state, dispatch);\n            }\n            return wrapInList(type)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = this.getType(schema);\n        if (!type) {\n            return false;\n        }\n        return isNodeActive(state, type);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass Heading {\n    constructor(level) {\n        this.level = level;\n    }\n    apply() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.nodes.heading;\n            if (!type) {\n                return false;\n            }\n            return setBlockType(type)(state, dispatch);\n        };\n    }\n    toggle() {\n        return (state, dispatch) => {\n            var _a;\n            const { schema, selection, doc } = state;\n            const type = schema.nodes.heading;\n            if (!type) {\n                return false;\n            }\n            const nodePos = selection.$from.before(1);\n            const node = doc.nodeAt(nodePos);\n            const attrs = (_a = node === null || node === void 0 ? void 0 : node.attrs) !== null && _a !== void 0 ? _a : {};\n            if (this.isActive(state)) {\n                return setBlockType(schema.nodes.paragraph, attrs)(state, dispatch);\n            }\n            return setBlockType(type, Object.assign(Object.assign({}, attrs), { level: this.level }))(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const nodesInSelection = getSelectionNodes(state);\n        const type = schema.nodes.heading;\n        if (!type) {\n            return false;\n        }\n        const supportedNodes = [\n            type,\n            schema.nodes.text,\n            schema.nodes.blockquote\n        ];\n        // heading is a text node\n        // don't mark as active when it has more nodes\n        const nodes = nodesInSelection.filter(node => {\n            return supportedNodes.includes(node.type);\n        });\n        const acitveNode = nodes.find((node) => {\n            return node.attrs['level'] === this.level;\n        });\n        return Boolean(acitveNode);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass TextAlign {\n    constructor(align) {\n        this.align = align;\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { doc, selection, tr, schema } = state;\n            const { from, to } = selection;\n            let applicable = false;\n            doc.nodesBetween(from, to, (node, pos) => {\n                const nodeType = node.type;\n                if ([schema.nodes.paragraph, schema.nodes.heading].includes(nodeType)) {\n                    applicable = true;\n                    tr.setNodeMarkup(pos, nodeType, Object.assign(Object.assign({}, node.attrs), { align: this.align }));\n                }\n                return true;\n            });\n            if (!applicable) {\n                return false;\n            }\n            if (tr.docChanged) {\n                dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n            }\n            return true;\n        };\n    }\n    isActive(state) {\n        const nodes = getSelectionNodes(state);\n        const active = nodes.find((node) => {\n            return node.attrs['align'] === this.align;\n        });\n        return Boolean(active);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nconst defaultOptions = {\n    strict: true\n};\nclass Link$1 {\n    update(attrs) {\n        return (state, dispatch) => {\n            const { schema, selection } = state;\n            const type = schema.marks.link;\n            if (!type) {\n                return false;\n            }\n            if (selection.empty) {\n                return false;\n            }\n            return toggleMark(type, attrs)(state, dispatch);\n        };\n    }\n    insert(text, attrs) {\n        return (state, dispatch) => {\n            var _a, _b;\n            const { schema, tr } = state;\n            const type = schema.marks.link;\n            if (!type) {\n                return false;\n            }\n            const linkAttrs = {\n                href: attrs.href,\n                title: (_a = attrs.title) !== null && _a !== void 0 ? _a : text,\n                target: (_b = attrs.target) !== null && _b !== void 0 ? _b : '_blank'\n            };\n            const node = schema.text(text, [schema.marks.link.create(linkAttrs)]);\n            tr.replaceSelectionWith(node, false)\n                .scrollIntoView();\n            if (tr.docChanged) {\n                dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n                return true;\n            }\n            return false;\n        };\n    }\n    isActive(state, options = defaultOptions) {\n        if (options.strict) {\n            return true;\n        }\n        const { schema } = state;\n        const type = schema.marks.link;\n        if (!type) {\n            return false;\n        }\n        return isMarkActive(state, type);\n    }\n    remove(state, dispatch) {\n        return removeLink()(state, dispatch);\n    }\n    canExecute(state) {\n        const testAttrs = {\n            href: ''\n        };\n        return this.insert('Exec', testAttrs)(state) || this.update(testAttrs)(state);\n    }\n}\n\nclass Image$1 {\n    insert(src, attrs) {\n        return (state, dispatch) => {\n            const { schema, tr, selection } = state;\n            const type = schema.nodes.image;\n            if (!type) {\n                return false;\n            }\n            const imageAttrs = Object.assign({ width: null, src }, attrs);\n            if (!imageAttrs.width && selection instanceof NodeSelection && selection.node.type === type) {\n                imageAttrs.width = selection.node.attrs['width'];\n            }\n            tr.replaceSelectionWith(type.createAndFill(imageAttrs));\n            const resolvedPos = tr.doc.resolve(tr.selection.anchor - tr.selection.$anchor.nodeBefore.nodeSize);\n            tr\n                .setSelection(new NodeSelection(resolvedPos))\n                .scrollIntoView();\n            if (tr.docChanged) {\n                dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n                return true;\n            }\n            return false;\n        };\n    }\n    isActive(state) {\n        const { selection } = state;\n        if (selection instanceof NodeSelection) {\n            return selection.node.type.name === 'image';\n        }\n        return false;\n    }\n}\n\nclass TextColor$1 {\n    constructor(name) {\n        this.name = name;\n    }\n    apply(attrs) {\n        return (state, dispatch) => {\n            const { schema, selection, doc } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            const { from, to, empty } = selection;\n            if (!empty && (from + 1 === to)) {\n                const node = doc.nodeAt(from);\n                if ((node === null || node === void 0 ? void 0 : node.isAtom) && !node.isText && node.isLeaf) {\n                    // An atomic node (e.g. Image) is selected.\n                    return false;\n                }\n            }\n            return applyMark(type, attrs)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = schema.marks[this.name];\n        if (!type) {\n            return false;\n        }\n        return isMarkActive(state, type);\n    }\n    getActiveColors(state) {\n        if (!this.isActive(state)) {\n            return [];\n        }\n        const { schema } = state;\n        const marks = getSelectionMarks(state);\n        const colors = marks\n            .filter(mark => mark.type === schema.marks[this.name])\n            .map(mark => mark.attrs['color'])\n            .filter(Boolean);\n        return colors;\n    }\n    remove() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            return removeMark(type)(state, dispatch);\n        };\n    }\n    canExecute(state) {\n        const attrs = this.name === 'text_color' ? { color: '' } : { backgroundColor: '' };\n        return this.apply(attrs)(state);\n    }\n}\n\nconst STRONG = new Mark('strong');\nconst EM = new Mark('em');\nconst CODE = new Mark('code');\nconst UNDERLINE = new Mark('u');\nconst STRIKE = new Mark('s');\nconst BLOCKQUOTE = new Blockqote();\nconst UL = new ListItem(true);\nconst OL = new ListItem(false);\nconst H1 = new Heading(1);\nconst H2 = new Heading(2);\nconst H3 = new Heading(3);\nconst H4 = new Heading(4);\nconst H5 = new Heading(5);\nconst H6 = new Heading(6);\nconst ALIGN_LEFT = new TextAlign('left');\nconst ALIGN_CENTER = new TextAlign('center');\nconst ALIGN_RIGHT = new TextAlign('right');\nconst ALIGN_JUSTIFY = new TextAlign('justify');\nconst LINK = new Link$1();\nconst IMAGE = new Image$1();\nconst TEXT_COLOR = new TextColor$1('text_color');\nconst TEXT_BACKGROUND_COLOR = new TextColor$1('text_background_color');\n\nconst ToggleCommands = {\n    bold: STRONG,\n    italic: EM,\n    code: CODE,\n    underline: UNDERLINE,\n    strike: STRIKE,\n    blockquote: BLOCKQUOTE,\n    bullet_list: UL,\n    ordered_list: OL,\n    h1: H1,\n    h2: H2,\n    h3: H3,\n    h4: H4,\n    h5: H5,\n    h6: H6,\n    align_left: ALIGN_LEFT,\n    align_center: ALIGN_CENTER,\n    align_right: ALIGN_RIGHT,\n    align_justify: ALIGN_JUSTIFY\n};\nconst Link = LINK;\nconst Image = IMAGE;\nconst TextColor = TEXT_COLOR;\nconst TextBackgroundColor = TEXT_BACKGROUND_COLOR;\n\nconst defaults = {\n    // menu\n    bold: 'Bold',\n    italic: 'Italic',\n    code: 'Code',\n    underline: 'Underline',\n    strike: 'Strike',\n    blockquote: 'Blockquote',\n    bullet_list: 'Bullet List',\n    ordered_list: 'Ordered List',\n    heading: 'Heading',\n    h1: 'Header 1',\n    h2: 'Header 2',\n    h3: 'Header 3',\n    h4: 'Header 4',\n    h5: 'Header 5',\n    h6: 'Header 6',\n    align_left: 'Left Align',\n    align_center: 'Center Align',\n    align_right: 'Right Align',\n    align_justify: 'Justify',\n    text_color: 'Text Color',\n    background_color: 'Background Color',\n    insertLink: 'Insert Link',\n    removeLink: 'Remove Link',\n    insertImage: 'Insert Image',\n    // pupups, forms, others...\n    url: 'URL',\n    text: 'Text',\n    openInNewTab: 'Open in new tab',\n    insert: 'Insert',\n    altText: 'Alt Text',\n    title: 'Title',\n    remove: 'Remove',\n};\nclass Locals {\n    constructor(newLocals = {}) {\n        this.locals = defaults;\n        this.get = (key) => {\n            var _a;\n            return (_a = this.locals[key]) !== null && _a !== void 0 ? _a : '';\n        };\n        this.locals = Object.assign({}, defaults, newLocals);\n    }\n}\n\nclass NgxEditorServiceConfig {\n    constructor() {\n        this.locals = {};\n    }\n}\nNgxEditorServiceConfig.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorServiceConfig, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nNgxEditorServiceConfig.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorServiceConfig, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorServiceConfig, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }] });\nclass NgxEditorService {\n    constructor(config) {\n        this.config = config;\n    }\n    get locals() {\n        return new Locals(this.config.locals);\n    }\n}\nNgxEditorService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorService, deps: [{ token: NgxEditorServiceConfig, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\nNgxEditorService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }], ctorParameters: function () {\n        return [{ type: NgxEditorServiceConfig, decorators: [{\n                        type: Optional\n                    }] }];\n    } });\nconst provideMyServiceOptions = (config) => {\n    var _a;\n    return {\n        locals: (_a = config.locals) !== null && _a !== void 0 ? _a : {}\n    };\n};\n\nclass SanitizeHtmlPipe {\n    constructor(sanitizer) {\n        this.sanitizer = sanitizer;\n    }\n    transform(value) {\n        return this.sanitizer.bypassSecurityTrustHtml(value);\n    }\n}\nSanitizeHtmlPipe.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: SanitizeHtmlPipe, deps: [{ token: i1.DomSanitizer }], target: i0.ɵɵFactoryTarget.Pipe });\nSanitizeHtmlPipe.ɵpipe = i0.ɵɵngDeclarePipe({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: SanitizeHtmlPipe, name: \"sanitizeHtml\" });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: SanitizeHtmlPipe, decorators: [{\n            type: Pipe,\n            args: [{\n                    name: 'sanitizeHtml'\n                }]\n        }], ctorParameters: function () { return [{ type: i1.DomSanitizer }]; } });\n\nclass ToggleCommandComponent {\n    constructor(ngxeService, menuService) {\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.isActive = false;\n        this.disabled = false;\n        this.update = (view) => {\n            const { state } = view;\n            const command = ToggleCommands[this.name];\n            this.isActive = command.isActive(state);\n            this.disabled = !command.canExecute(state);\n        };\n    }\n    get name() {\n        return this.toolbarItem;\n    }\n    toggle(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.editorView;\n        const command = ToggleCommands[this.name];\n        command.toggle()(state, dispatch);\n    }\n    getTitle(name) {\n        return this.ngxeService.locals.get(name);\n    }\n    ngOnInit() {\n        this.html = Icon.get(this.name);\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nToggleCommandComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: ToggleCommandComponent, deps: [{ token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\nToggleCommandComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: ToggleCommandComponent, selector: \"ngx-toggle-command\", inputs: { toolbarItem: \"toolbarItem\" }, host: { properties: { \"class.NgxEditor__MenuItem--Active\": \"this.isActive\", \"class.NgxEditor--Disabled\": \"this.disabled\" } }, ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"html | sanitizeHtml\\\" (mousedown)=\\\"toggle($event)\\\"\\n  [title]=\\\"getTitle(name)\\\">\\n</div>\\n\", styles: [\"\"], pipes: { \"sanitizeHtml\": SanitizeHtmlPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: ToggleCommandComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-toggle-command', template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"html | sanitizeHtml\\\" (mousedown)=\\\"toggle($event)\\\"\\n  [title]=\\\"getTitle(name)\\\">\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: NgxEditorService }, { type: MenuService }]; }, propDecorators: { toolbarItem: [{\n                type: Input\n            }], isActive: [{\n                type: HostBinding,\n                args: ['class.NgxEditor__MenuItem--Active']\n            }], disabled: [{\n                type: HostBinding,\n                args: ['class.NgxEditor--Disabled']\n            }] } });\n\nclass LinkComponent {\n    constructor(el, ngxeService, menuService) {\n        this.el = el;\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.showPopup = false;\n        this.isActive = false;\n        this.canExecute = true;\n        this.form = new FormGroup({\n            href: new FormControl('', [\n                Validators$1.required,\n                Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)')\n            ]),\n            text: new FormControl('', [Validators$1.required]),\n            openInNewTab: new FormControl(true)\n        });\n        this.setText = () => {\n            const { state: { selection, doc } } = this.editorView;\n            const { empty, from, to } = selection;\n            const selectedText = !empty ? doc.textBetween(from, to) : '';\n            if (selectedText) {\n                this.text.patchValue(selectedText);\n                this.text.disable();\n            }\n        };\n        this.update = (view) => {\n            const { state } = view;\n            this.isActive = Link.isActive(state, { strict: false });\n            this.canExecute = Link.canExecute(state);\n        };\n    }\n    get valid() {\n        return this.isActive || this.showPopup;\n    }\n    get disabled() {\n        return !this.canExecute;\n    }\n    get icon() {\n        return Icon.get(this.isActive ? 'unlink' : 'link');\n    }\n    get title() {\n        return this.ngxeService.locals.get(this.isActive ? 'removeLink' : 'insertLink');\n    }\n    get href() {\n        return this.form.get('href');\n    }\n    get text() {\n        return this.form.get('text');\n    }\n    onDocumentClick(e) {\n        if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n            this.hideForm();\n        }\n    }\n    getLabel(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    hideForm() {\n        this.showPopup = false;\n        this.form.reset({\n            href: '',\n            text: '',\n            openInNewTab: true\n        });\n        this.text.enable();\n    }\n    onMouseDown(e) {\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.editorView;\n        if (this.isActive) {\n            Link.remove(state, dispatch);\n            return;\n        }\n        this.showPopup = !this.showPopup;\n        if (this.showPopup) {\n            this.setText();\n        }\n    }\n    insertLink(e) {\n        e.preventDefault();\n        const { text, href, openInNewTab } = this.form.getRawValue();\n        const { dispatch, state } = this.editorView;\n        const { selection } = state;\n        const attrs = {\n            title: href,\n            href,\n            target: openInNewTab ? '_blank' : '_self'\n        };\n        if (selection.empty) {\n            Link.insert(text, attrs)(state, dispatch);\n            this.editorView.focus();\n        }\n        else {\n            Link.update(attrs)(state, dispatch);\n        }\n        this.hideForm();\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nLinkComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: LinkComponent, deps: [{ token: i0.ElementRef }, { token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\nLinkComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: LinkComponent, selector: \"ngx-link\", host: { listeners: { \"document:mousedown\": \"onDocumentClick($event)\" }, properties: { \"class.NgxEditor__MenuItem--Active\": \"this.valid\", \"class.NgxEditor--Disabled\": \"this.disabled\" } }, ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"href\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"href.touched && href.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ href.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('text')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"text\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"text.touched && text.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ text.errors?.['required'] && 'This is required' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" formControlName=\\\"openInNewTab\\\" />\\n          {{getLabel('openInNewTab')}}\\n        </label>\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\", styles: [\"\"], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i4.ɵNgNoValidate, selector: \"form:not([ngNoForm]):not([ngNativeValidate])\" }, { type: i4.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { type: i4.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { type: i4.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { type: i4.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { type: i4.FormControlName, selector: \"[formControlName]\", inputs: [\"formControlName\", \"disabled\", \"ngModel\"], outputs: [\"ngModelChange\"] }, { type: i4.CheckboxControlValueAccessor, selector: \"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]\" }], pipes: { \"sanitizeHtml\": SanitizeHtmlPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: LinkComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-link', template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"href\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"href.touched && href.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ href.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('text')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"text\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"text.touched && text.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ text.errors?.['required'] && 'This is required' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" formControlName=\\\"openInNewTab\\\" />\\n          {{getLabel('openInNewTab')}}\\n        </label>\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: NgxEditorService }, { type: MenuService }]; }, propDecorators: { valid: [{\n                type: HostBinding,\n                args: ['class.NgxEditor__MenuItem--Active']\n            }], disabled: [{\n                type: HostBinding,\n                args: ['class.NgxEditor--Disabled']\n            }], onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }] } });\n\nclass ImageComponent {\n    constructor(el, ngxeService, menuService) {\n        this.el = el;\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.showPopup = false;\n        this.isActive = false;\n        this.form = new FormGroup({\n            src: new FormControl('', [\n                Validators$1.required,\n                Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)')\n            ]),\n            alt: new FormControl(''),\n            title: new FormControl('')\n        });\n        this.update = (view) => {\n            const { state } = view;\n            this.isActive = Image.isActive(state);\n        };\n    }\n    get valid() {\n        return this.isActive || this.showPopup;\n    }\n    get icon() {\n        return Icon.get('image');\n    }\n    get src() {\n        return this.form.get('src');\n    }\n    onDocumentClick(e) {\n        if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n            this.hideForm();\n        }\n    }\n    getLabel(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    hideForm() {\n        this.showPopup = false;\n        this.form.reset({\n            src: '',\n            alt: '',\n            title: ''\n        });\n    }\n    onMouseDown(e) {\n        if (e.button !== 0) {\n            return;\n        }\n        this.showPopup = !this.showPopup;\n        if (this.showPopup) {\n            this.fillForm();\n        }\n    }\n    fillForm() {\n        const { state } = this.editorView;\n        const { selection } = state;\n        if (selection instanceof NodeSelection && this.isActive) {\n            const { src, alt = '', title = '' } = selection.node.attrs;\n            this.form.setValue({\n                src,\n                alt,\n                title\n            });\n        }\n    }\n    insertLink(e) {\n        e.preventDefault();\n        const { src, alt, title } = this.form.getRawValue();\n        const { dispatch, state } = this.editorView;\n        const attrs = {\n            alt,\n            title\n        };\n        Image.insert(src, attrs)(state, dispatch);\n        this.editorView.focus();\n        this.hideForm();\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nImageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: ImageComponent, deps: [{ token: i0.ElementRef }, { token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\nImageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: ImageComponent, selector: \"ngx-image\", host: { listeners: { \"document:mousedown\": \"onDocumentClick($event)\" }, properties: { \"class.NgxEditor__MenuItem--Active\": \"this.valid\" } }, ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\"\\n  [title]=\\\"getLabel('insertImage')\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"src\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"src.touched && src.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ src.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('altText')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"alt\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('title')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"title\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid || !form.dirty\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\", styles: [\"\"], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i4.ɵNgNoValidate, selector: \"form:not([ngNoForm]):not([ngNativeValidate])\" }, { type: i4.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { type: i4.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { type: i4.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { type: i4.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { type: i4.FormControlName, selector: \"[formControlName]\", inputs: [\"formControlName\", \"disabled\", \"ngModel\"], outputs: [\"ngModelChange\"] }], pipes: { \"sanitizeHtml\": SanitizeHtmlPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: ImageComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-image', template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\"\\n  [title]=\\\"getLabel('insertImage')\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"src\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"src.touched && src.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ src.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('altText')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"alt\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('title')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"title\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid || !form.dirty\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: NgxEditorService }, { type: MenuService }]; }, propDecorators: { valid: [{\n                type: HostBinding,\n                args: ['class.NgxEditor__MenuItem--Active']\n            }], onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }] } });\n\nclass DropdownComponent {\n    constructor(ngxeService, menuService, el) {\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.el = el;\n        this.isDropdownOpen = false;\n        this.activeItems = [];\n        this.disabledItems = [];\n        this.update = (view) => {\n            const { state } = view;\n            this.activeItems = [];\n            this.disabledItems = [];\n            this.items.forEach((item) => {\n                const command = ToggleCommands[item];\n                const isActive = command.isActive(state);\n                if (isActive) {\n                    this.activeItems.push(item);\n                }\n                if (!command.canExecute(state)) {\n                    this.disabledItems.push(item);\n                }\n            });\n            if (this.activeItems.length === 1) {\n                this.activeItem = this.activeItems[0];\n            }\n            else {\n                this.activeItem = null;\n            }\n        };\n    }\n    get isSelected() {\n        return Boolean(this.activeItem || this.isDropdownOpen);\n    }\n    get isDropdownDisabled() {\n        return this.disabledItems.length === this.items.length;\n    }\n    onDocumentClick(target) {\n        if (!this.el.nativeElement.contains(target) && this.isDropdownOpen) {\n            this.isDropdownOpen = false;\n        }\n    }\n    getName(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    toggleDropdown(e) {\n        e.preventDefault();\n        this.isDropdownOpen = !this.isDropdownOpen;\n    }\n    onClick(e, item) {\n        e.preventDefault();\n        // consider only left click\n        if (e.button !== 0) {\n            return;\n        }\n        const command = ToggleCommands[item];\n        const { state, dispatch } = this.editorView;\n        command.toggle()(state, dispatch);\n        this.isDropdownOpen = false;\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nDropdownComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: DropdownComponent, deps: [{ token: NgxEditorService }, { token: MenuService }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });\nDropdownComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: DropdownComponent, selector: \"ngx-dropdown\", inputs: { group: \"group\", items: \"items\" }, host: { listeners: { \"document:mousedown\": \"onDocumentClick($event.target)\" }, properties: { \"class.NgxEditor__Dropdown--Selected\": \"this.isSelected\", \"class.NgxEditor--Disabled\": \"this.isDropdownDisabled\" } }, ngImport: i0, template: \"<div class=\\\"NgxEditor__Dropdown--Text\\\" (mousedown)=\\\"toggleDropdown($event)\\\">\\n  {{getName(activeItem || group)}}\\n</div>\\n\\n<div class=\\\"NgxEditor__Dropdown--DropdownMenu\\\" *ngIf=\\\"isDropdownOpen\\\">\\n  <div class=\\\"NgxEditor__Dropdown--Item\\\" *ngFor=\\\"let item of items\\\" (mousedown)=\\\"onClick($event, item)\\\"\\n    [ngClass]=\\\"{'NgxEditor__Dropdown--Active': item === activeItem, 'NgxEditor--Disabled':disabledItems.includes(item)}\\\">\\n    {{getName(item)}}\\n  </div>\\n</div>\\n\", styles: [\"\"], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: DropdownComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-dropdown', template: \"<div class=\\\"NgxEditor__Dropdown--Text\\\" (mousedown)=\\\"toggleDropdown($event)\\\">\\n  {{getName(activeItem || group)}}\\n</div>\\n\\n<div class=\\\"NgxEditor__Dropdown--DropdownMenu\\\" *ngIf=\\\"isDropdownOpen\\\">\\n  <div class=\\\"NgxEditor__Dropdown--Item\\\" *ngFor=\\\"let item of items\\\" (mousedown)=\\\"onClick($event, item)\\\"\\n    [ngClass]=\\\"{'NgxEditor__Dropdown--Active': item === activeItem, 'NgxEditor--Disabled':disabledItems.includes(item)}\\\">\\n    {{getName(item)}}\\n  </div>\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: NgxEditorService }, { type: MenuService }, { type: i0.ElementRef }]; }, propDecorators: { group: [{\n                type: Input\n            }], items: [{\n                type: Input\n            }], isSelected: [{\n                type: HostBinding,\n                args: ['class.NgxEditor__Dropdown--Selected']\n            }], isDropdownDisabled: [{\n                type: HostBinding,\n                args: ['class.NgxEditor--Disabled']\n            }], onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event.target']]\n            }] } });\n\nclass ColorPickerComponent {\n    constructor(el, menuService, ngxeService) {\n        this.el = el;\n        this.menuService = menuService;\n        this.ngxeService = ngxeService;\n        this.showPopup = false;\n        this.isActive = false;\n        this.activeColors = [];\n        this.canExecute = true;\n        this.update = (view) => {\n            const { state } = view;\n            this.canExecute = this.command.canExecute(state);\n            this.isActive = this.command.isActive(state);\n            this.activeColors = [];\n            if (this.isActive) {\n                this.activeColors = this.command.getActiveColors(state);\n            }\n        };\n    }\n    get valid() {\n        return this.isActive || this.showPopup;\n    }\n    get disabled() {\n        return !this.canExecute;\n    }\n    get title() {\n        return this.getLabel(this.type === 'text_color' ? 'text_color' : 'background_color');\n    }\n    get icon() {\n        return Icon.get(this.type === 'text_color' ? 'text_color' : 'color_fill');\n    }\n    get command() {\n        return this.type === 'text_color' ? TextColor : TextBackgroundColor;\n    }\n    getContrastYIQ(hexcolor) {\n        hexcolor = hexcolor.replace('#', '');\n        const r = parseInt(hexcolor.substr(0, 2), 16);\n        const g = parseInt(hexcolor.substr(2, 2), 16);\n        const b = parseInt(hexcolor.substr(4, 2), 16);\n        const yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n        return (yiq >= 128) ? 'black' : 'white';\n    }\n    onDocumentClick(e) {\n        if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n            this.hidePopup();\n        }\n    }\n    hidePopup() {\n        this.showPopup = false;\n    }\n    togglePopup(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        this.showPopup = !this.showPopup;\n    }\n    remove(e) {\n        e.preventDefault();\n        const { state, dispatch } = this.editorView;\n        this.command.remove()(state, dispatch);\n        this.hidePopup();\n    }\n    onColorSelect(e, color) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.editorView;\n        if (this.type === 'text_color') {\n            const attrs = { color };\n            this.command.apply(attrs)(state, dispatch);\n        }\n        else {\n            const attrs = { backgroundColor: color };\n            this.command.apply(attrs)(state, dispatch);\n        }\n        if (!this.editorView.hasFocus()) {\n            this.editorView.focus();\n        }\n        this.hidePopup();\n    }\n    getLabel(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nColorPickerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: ColorPickerComponent, deps: [{ token: i0.ElementRef }, { token: MenuService }, { token: NgxEditorService }], target: i0.ɵɵFactoryTarget.Component });\nColorPickerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: ColorPickerComponent, selector: \"ngx-color-picker\", inputs: { presets: \"presets\", type: \"type\" }, host: { listeners: { \"document:mousedown\": \"onDocumentClick($event)\" }, properties: { \"class.NgxEditor__MenuItem--Active\": \"this.valid\", \"class.NgxEditor--Disabled\": \"this.disabled\" } }, ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"togglePopup($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <div *ngFor=\\\"let colorGroup of presets\\\" class=\\\"NgxEditor__ColorContainer\\\">\\n    <button class=\\\"NgxEditor__Color\\\" *ngFor=\\\"let color of colorGroup\\\"\\n      [ngStyle]=\\\"{backgroundColor: color, color:getContrastYIQ(color)}\\\" [title]=\\\"color\\\"\\n      (mousedown)=\\\"onColorSelect($event, color)\\\"\\n      [ngClass]=\\\"{'NgxEditor__Color--Active': activeColors.includes(color)}\\\"></button>\\n  </div>\\n\\n  <button class=\\\"NgxEditor__MenuItem--Button\\\" (mousedown)=\\\"remove($event)\\\" [disabled]=\\\"!isActive\\\">\\n    {{getLabel('remove')}}\\n  </button>\\n</div>\\n\", styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup{width:230px}.NgxEditor__ColorContainer{display:flex;justify-content:space-between}.NgxEditor__ColorContainer+.NgxEditor__ColorContainer{margin-top:5px}.NgxEditor__Color{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button{margin-top:5px}\\n\"], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }, { type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }], pipes: { \"sanitizeHtml\": SanitizeHtmlPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: ColorPickerComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-color-picker', template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"togglePopup($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <div *ngFor=\\\"let colorGroup of presets\\\" class=\\\"NgxEditor__ColorContainer\\\">\\n    <button class=\\\"NgxEditor__Color\\\" *ngFor=\\\"let color of colorGroup\\\"\\n      [ngStyle]=\\\"{backgroundColor: color, color:getContrastYIQ(color)}\\\" [title]=\\\"color\\\"\\n      (mousedown)=\\\"onColorSelect($event, color)\\\"\\n      [ngClass]=\\\"{'NgxEditor__Color--Active': activeColors.includes(color)}\\\"></button>\\n  </div>\\n\\n  <button class=\\\"NgxEditor__MenuItem--Button\\\" (mousedown)=\\\"remove($event)\\\" [disabled]=\\\"!isActive\\\">\\n    {{getLabel('remove')}}\\n  </button>\\n</div>\\n\", styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup{width:230px}.NgxEditor__ColorContainer{display:flex;justify-content:space-between}.NgxEditor__ColorContainer+.NgxEditor__ColorContainer{margin-top:5px}.NgxEditor__Color{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button{margin-top:5px}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: MenuService }, { type: NgxEditorService }]; }, propDecorators: { presets: [{\n                type: Input\n            }], type: [{\n                type: Input\n            }], valid: [{\n                type: HostBinding,\n                args: ['class.NgxEditor__MenuItem--Active']\n            }], disabled: [{\n                type: HostBinding,\n                args: ['class.NgxEditor--Disabled']\n            }], onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }] } });\n\nconst DEFAULT_TOOLBAR = [\n    ['bold', 'italic'],\n    ['code', 'blockquote'],\n    ['underline', 'strike'],\n    ['ordered_list', 'bullet_list'],\n    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n    ['link', 'image'],\n    ['text_color', 'background_color'],\n    ['align_left', 'align_center', 'align_right', 'align_justify'],\n];\nconst TOOLBAR_MINIMAL = [\n    ['bold', 'italic'],\n    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n    ['link', 'image'],\n    ['text_color', 'background_color'],\n];\nconst DEFAULT_COLOR_PRESETS = [\n    '#b60205',\n    '#d93f0b',\n    '#fbca04',\n    '#0e8a16',\n    '#006b75',\n    '#1d76db',\n    '#0052cc',\n    '#5319e7',\n    '#e99695',\n    '#f9d0c4',\n    '#fef2c0',\n    '#c2e0c6',\n    '#bfdadc',\n    '#c5def5',\n    '#bfd4f2',\n    '#d4c5f9'\n];\nclass MenuComponent {\n    constructor(menuService) {\n        this.menuService = menuService;\n        this.toolbar = TOOLBAR_MINIMAL;\n        this.colorPresets = DEFAULT_COLOR_PRESETS;\n        this.disabled = false;\n        this.customMenuRef = null;\n        this.dropdownPlacement = 'bottom';\n        this.toggleCommands = [\n            'bold', 'italic',\n            'underline', 'strike',\n            'code', 'blockquote',\n            'ordered_list', 'bullet_list',\n            'align_left', 'align_center', 'align_right', 'align_justify'\n        ];\n        this.iconContainerClass = ['NgxEditor__MenuItem', 'NgxEditor__MenuItem--Icon'];\n        this.dropdownContainerClass = ['NgxEditor__Dropdown'];\n        this.seperatorClass = ['NgxEditor__Seperator'];\n    }\n    get presets() {\n        const col = 8;\n        const colors = [];\n        this.colorPresets.forEach((color, index) => {\n            const row = Math.floor(index / col);\n            if (!colors[row]) {\n                colors.push([]);\n            }\n            colors[row].push(color);\n        });\n        return colors;\n    }\n    isDropDown(item) {\n        if (item === null || item === void 0 ? void 0 : item.heading) {\n            return true;\n        }\n        return false;\n    }\n    getDropdownItems(item) {\n        return item;\n    }\n    ngOnInit() {\n        if (!this.editor) {\n            throw new Error('NgxEditor: Required editor instance');\n        }\n        this.menuService.editor = this.editor;\n    }\n}\nMenuComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: MenuComponent, deps: [{ token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\nMenuComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: MenuComponent, selector: \"ngx-editor-menu\", inputs: { toolbar: \"toolbar\", colorPresets: \"colorPresets\", disabled: \"disabled\", editor: \"editor\", customMenuRef: \"customMenuRef\", dropdownPlacement: \"dropdownPlacement\" }, providers: [MenuService], ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuBar\\\" [ngClass]=\\\"{'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top'}\\\">\\n\\n  <ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last\\\">\\n    <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last\\\">\\n\\n      <!-- toggle icons -->\\n      <ngx-toggle-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"toggleCommands.includes(item)\\\">\\n      </ngx-toggle-command>\\n\\n      <!-- link -->\\n      <ngx-link [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'link'\\\"></ngx-link>\\n\\n      <!-- image -->\\n      <ngx-image [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'image'\\\">\\n      </ngx-image>\\n\\n      <!-- dropdown -->\\n      <ng-container *ngIf=\\\"isDropDown(item)\\\">\\n        <ngx-dropdown *ngFor=\\\"let dropdownItem of getDropdownItems(item) | keyvalue\\\" [class]=\\\"dropdownContainerClass\\\"\\n          [group]=\\\"dropdownItem.key\\\" [items]=\\\"dropdownItem.value\\\">\\n        </ngx-dropdown>\\n      </ng-container>\\n\\n      <!-- text color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'text_color'\\\" type=\\\"text_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n      <!-- background color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'background_color'\\\" type=\\\"background_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n\\n      <!-- seperator -->\\n      <div [class]=\\\"seperatorClass\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <!-- custom menu -->\\n  <ng-container *ngIf=\\\"customMenuRef\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"customMenuRef\\\"></ng-container>\\n  </ng-container>\\n\\n</div>\\n\", styles: [\"\"], components: [{ type: ToggleCommandComponent, selector: \"ngx-toggle-command\", inputs: [\"toolbarItem\"] }, { type: LinkComponent, selector: \"ngx-link\" }, { type: ImageComponent, selector: \"ngx-image\" }, { type: DropdownComponent, selector: \"ngx-dropdown\", inputs: [\"group\", \"items\"] }, { type: ColorPickerComponent, selector: \"ngx-color-picker\", inputs: [\"presets\", \"type\"] }], directives: [{ type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }], pipes: { \"keyvalue\": i3.KeyValuePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: MenuComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-editor-menu', providers: [MenuService], template: \"<div class=\\\"NgxEditor__MenuBar\\\" [ngClass]=\\\"{'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top'}\\\">\\n\\n  <ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last\\\">\\n    <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last\\\">\\n\\n      <!-- toggle icons -->\\n      <ngx-toggle-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"toggleCommands.includes(item)\\\">\\n      </ngx-toggle-command>\\n\\n      <!-- link -->\\n      <ngx-link [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'link'\\\"></ngx-link>\\n\\n      <!-- image -->\\n      <ngx-image [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'image'\\\">\\n      </ngx-image>\\n\\n      <!-- dropdown -->\\n      <ng-container *ngIf=\\\"isDropDown(item)\\\">\\n        <ngx-dropdown *ngFor=\\\"let dropdownItem of getDropdownItems(item) | keyvalue\\\" [class]=\\\"dropdownContainerClass\\\"\\n          [group]=\\\"dropdownItem.key\\\" [items]=\\\"dropdownItem.value\\\">\\n        </ngx-dropdown>\\n      </ng-container>\\n\\n      <!-- text color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'text_color'\\\" type=\\\"text_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n      <!-- background color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'background_color'\\\" type=\\\"background_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n\\n      <!-- seperator -->\\n      <div [class]=\\\"seperatorClass\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <!-- custom menu -->\\n  <ng-container *ngIf=\\\"customMenuRef\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"customMenuRef\\\"></ng-container>\\n  </ng-container>\\n\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: MenuService }]; }, propDecorators: { toolbar: [{\n                type: Input\n            }], colorPresets: [{\n                type: Input\n            }], disabled: [{\n                type: Input\n            }], editor: [{\n                type: Input\n            }], customMenuRef: [{\n                type: Input\n            }], dropdownPlacement: [{\n                type: Input\n            }] } });\n\nclass BubbleComponent {\n    constructor(sanitizeHTML, ngxeService) {\n        this.sanitizeHTML = sanitizeHTML;\n        this.ngxeService = ngxeService;\n        this.execulableItems = [];\n        this.activeItems = [];\n        this.toolbar = [\n            ['bold', 'italic', 'underline', 'strike'],\n            ['ordered_list', 'bullet_list', 'blockquote', 'code'],\n            ['align_left', 'align_center', 'align_right', 'align_justify']\n        ];\n        this.toggleCommands = [\n            'bold', 'italic', 'underline', 'strike',\n            'ordered_list', 'bullet_list', 'blockquote', 'code',\n            'align_left', 'align_center', 'align_right', 'align_justify'\n        ];\n    }\n    get view() {\n        return this.editor.view;\n    }\n    getIcon(name) {\n        const icon = Icon.getPath(name);\n        return this.sanitizeHTML.transform(icon);\n    }\n    getTitle(name) {\n        return this.ngxeService.locals.get(name);\n    }\n    onClick(e, commandName) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.view;\n        const command = ToggleCommands[commandName];\n        command.toggle()(state, dispatch);\n    }\n    update(view) {\n        this.activeItems = [];\n        this.execulableItems = [];\n        const { state } = view;\n        this.toggleCommands.forEach(toolbarItem => {\n            const command = ToggleCommands[toolbarItem];\n            const isActive = command.isActive(state);\n            if (isActive) {\n                this.activeItems.push(toolbarItem);\n            }\n            const canExecute = command.canExecute(state);\n            if (canExecute) {\n                this.execulableItems.push(toolbarItem);\n            }\n        });\n    }\n    ngOnInit() {\n        this.updateSubscription = this.editor.update\n            .subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nBubbleComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: BubbleComponent, deps: [{ token: SanitizeHtmlPipe }, { token: NgxEditorService }], target: i0.ɵɵFactoryTarget.Component });\nBubbleComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: BubbleComponent, selector: \"ngx-bubble\", inputs: { editor: \"editor\" }, ngImport: i0, template: \"<ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last\\\">\\n  <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last\\\">\\n      <div class=\\\"NgxBubbleMenu__Icon\\\" [ngClass]=\\\"{'NgxBubbleMenu__Icon--Active': this.activeItems.includes(item),\\n  'NgxEditor--Disabled': !this.execulableItems.includes(item)}\\\" (mousedown)=\\\"onClick($event, item)\\\"\\n          *ngIf=\\\"toggleCommands.includes(item)\\\" [title]=\\\"getTitle(item)\\\">\\n          <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" height=\\\"20\\\" width=\\\"20\\\"\\n              [innerHTML]=\\\"getIcon(item)\\\"></svg>\\n      </div>\\n      <div class=\\\"NgxBubbleMenu__Seperator\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n  </ng-container>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{display:flex;background-color:#000;color:#fff;padding:5px;border-radius:4px}.NgxBubbleMenu__Icon{height:30px;width:30px;transition:.3s ease-in-out;border-radius:2px;display:flex;align-items:center;justify-content:center}.NgxBubbleMenu__Icon svg{fill:#fff}.NgxBubbleMenu__Icon:hover{background-color:#636262}.NgxBubbleMenu__Icon+.NgxBubbleMenu__Icon{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active{background-color:#fff}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active svg{fill:#000}.NgxBubbleMenu__Seperator{border-left:1px solid white;margin:0 5px}\\n\"], directives: [{ type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: BubbleComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-bubble', template: \"<ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last\\\">\\n  <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last\\\">\\n      <div class=\\\"NgxBubbleMenu__Icon\\\" [ngClass]=\\\"{'NgxBubbleMenu__Icon--Active': this.activeItems.includes(item),\\n  'NgxEditor--Disabled': !this.execulableItems.includes(item)}\\\" (mousedown)=\\\"onClick($event, item)\\\"\\n          *ngIf=\\\"toggleCommands.includes(item)\\\" [title]=\\\"getTitle(item)\\\">\\n          <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\" height=\\\"20\\\" width=\\\"20\\\"\\n              [innerHTML]=\\\"getIcon(item)\\\"></svg>\\n      </div>\\n      <div class=\\\"NgxBubbleMenu__Seperator\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n  </ng-container>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{display:flex;background-color:#000;color:#fff;padding:5px;border-radius:4px}.NgxBubbleMenu__Icon{height:30px;width:30px;transition:.3s ease-in-out;border-radius:2px;display:flex;align-items:center;justify-content:center}.NgxBubbleMenu__Icon svg{fill:#fff}.NgxBubbleMenu__Icon:hover{background-color:#636262}.NgxBubbleMenu__Icon+.NgxBubbleMenu__Icon{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active{background-color:#fff}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active svg{fill:#000}.NgxBubbleMenu__Seperator{border-left:1px solid white;margin:0 5px}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: SanitizeHtmlPipe }, { type: NgxEditorService }]; }, propDecorators: { editor: [{\n                type: Input\n            }] } });\n\nclass FloatingMenuComponent {\n    constructor(el, sanitizeHTML) {\n        this.el = el;\n        this.sanitizeHTML = sanitizeHTML;\n        this.posLeft = 0;\n        this.posTop = 0;\n        this.showMenu = false;\n        this.dragging = false;\n        this.execulableItems = [];\n        this.activeItems = [];\n    }\n    get display() {\n        return {\n            visibility: this.showMenu ? 'visible' : 'hidden',\n            opacity: this.showMenu ? '1' : '0',\n            top: this.posTop + 'px',\n            left: this.posLeft + 'px',\n        };\n    }\n    get view() {\n        return this.editor.view;\n    }\n    onMouseDown(e) {\n        const target = e.target;\n        if (this.el.nativeElement.contains(target) && target.nodeName !== 'INPUT') {\n            e.preventDefault();\n            return;\n        }\n        this.dragging = true;\n    }\n    onKeyDown(e) {\n        const target = e.target;\n        if (target.nodeName === 'INPUT') {\n            return;\n        }\n        this.dragging = true;\n        this.hide();\n    }\n    onMouseUp(e) {\n        const target = e.target;\n        if (this.el.nativeElement.contains(target) || target.nodeName === 'INPUT') {\n            e.preventDefault();\n            return;\n        }\n        this.dragging = false;\n        this.useUpdate();\n    }\n    onKeyUp(e) {\n        const target = e.target;\n        if (target.nodeName === 'INPUT') {\n            return;\n        }\n        this.dragging = false;\n        this.useUpdate();\n    }\n    useUpdate() {\n        if (!this.view) {\n            return;\n        }\n        this.update(this.view);\n    }\n    getIcon(name) {\n        const icon = Icon.getPath(name);\n        return this.sanitizeHTML.transform(icon);\n    }\n    hide() {\n        this.showMenu = false;\n    }\n    show() {\n        this.showMenu = true;\n    }\n    calculateBubblePosition(view) {\n        const { state: { selection } } = view;\n        const { from } = selection;\n        // the floating bubble itself\n        const bubbleEl = this.el.nativeElement;\n        const bubble = bubbleEl.getBoundingClientRect();\n        // The box in which the tooltip is positioned, to use as base\n        const box = bubbleEl.parentElement.getBoundingClientRect();\n        const start = view.coordsAtPos(from);\n        let left = start.left - box.left;\n        const overflowsRight = (box.right < (start.left + bubble.width) ||\n            bubble.right > box.right);\n        if (overflowsRight) {\n            left = box.width - bubble.width;\n        }\n        if (left < 0) {\n            left = 0;\n        }\n        const bubbleHeight = bubble.height + parseInt(getComputedStyle(bubbleEl).marginBottom, 10);\n        const top = (start.top - box.top) - bubbleHeight;\n        return {\n            left,\n            top\n        };\n    }\n    update(view) {\n        const { state } = view;\n        const { selection } = state;\n        const { empty } = selection;\n        if (selection instanceof NodeSelection) {\n            if (selection.node.type.name === 'image') {\n                this.hide();\n                return;\n            }\n        }\n        const hasFocus = this.view.hasFocus();\n        if (!hasFocus || empty || this.dragging) {\n            this.hide();\n            return;\n        }\n        const { top, left } = this.calculateBubblePosition(this.view);\n        this.posLeft = left;\n        this.posTop = top;\n        this.show();\n    }\n    ngOnInit() {\n        if (!this.editor) {\n            throw new Error('NgxEditor: Required editor instance');\n        }\n        this.updateSubscription = this.editor.update\n            .subscribe((view) => {\n            this.update(view);\n        });\n        this.resizeSubscription = fromEvent(window, 'resize').pipe(throttleTime(500, asyncScheduler, { leading: true, trailing: true })).subscribe(() => {\n            this.useUpdate();\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n        this.resizeSubscription.unsubscribe();\n    }\n}\nFloatingMenuComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: FloatingMenuComponent, deps: [{ token: i0.ElementRef }, { token: SanitizeHtmlPipe }], target: i0.ɵɵFactoryTarget.Component });\nFloatingMenuComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.2\", type: FloatingMenuComponent, selector: \"ngx-editor-floating-menu\", inputs: { editor: \"editor\" }, host: { listeners: { \"document:mousedown\": \"onMouseDown($event)\", \"document:keydown\": \"onKeyDown($event)\", \"document:mouseup\": \"onMouseUp($event)\", \"document:keyup\": \"onKeyUp($event)\" }, properties: { \"style\": \"this.display\" } }, ngImport: i0, template: \"<div #ref>\\n  <ng-content></ng-content>\\n</div>\\n<ng-container *ngIf=\\\"ref.children.length === 0\\\">\\n  <ngx-bubble [editor]=\\\"editor\\\"></ngx-bubble>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\\n\"], components: [{ type: BubbleComponent, selector: \"ngx-bubble\", inputs: [\"editor\"] }], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: FloatingMenuComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-editor-floating-menu', template: \"<div #ref>\\n  <ng-content></ng-content>\\n</div>\\n<ng-container *ngIf=\\\"ref.children.length === 0\\\">\\n  <ngx-bubble [editor]=\\\"editor\\\"></ngx-bubble>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: SanitizeHtmlPipe }]; }, propDecorators: { display: [{\n                type: HostBinding,\n                args: ['style']\n            }], editor: [{\n                type: Input\n            }], onMouseDown: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }], onKeyDown: [{\n                type: HostListener,\n                args: ['document:keydown', ['$event']]\n            }], onMouseUp: [{\n                type: HostListener,\n                args: ['document:mouseup', ['$event']]\n            }], onKeyUp: [{\n                type: HostListener,\n                args: ['document:keyup', ['$event']]\n            }] } });\n\nclass MenuModule {\n}\nMenuModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: MenuModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nMenuModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: MenuModule, declarations: [\n        // pipes\n        SanitizeHtmlPipe,\n        // components\n        MenuComponent,\n        ToggleCommandComponent,\n        LinkComponent,\n        DropdownComponent,\n        ImageComponent,\n        ColorPickerComponent,\n        FloatingMenuComponent,\n        BubbleComponent\n    ], imports: [CommonModule,\n        ReactiveFormsModule], exports: [MenuComponent,\n        FloatingMenuComponent] });\nMenuModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: MenuModule, providers: [\n        SanitizeHtmlPipe,\n    ], imports: [[\n            CommonModule,\n            ReactiveFormsModule\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: MenuModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule,\n                        ReactiveFormsModule\n                    ],\n                    declarations: [\n                        // pipes\n                        SanitizeHtmlPipe,\n                        // components\n                        MenuComponent,\n                        ToggleCommandComponent,\n                        LinkComponent,\n                        DropdownComponent,\n                        ImageComponent,\n                        ColorPickerComponent,\n                        FloatingMenuComponent,\n                        BubbleComponent\n                    ],\n                    providers: [\n                        SanitizeHtmlPipe,\n                    ],\n                    exports: [\n                        MenuComponent,\n                        FloatingMenuComponent\n                    ],\n                }]\n        }] });\n\nconst NGX_EDITOR_CONFIG_TOKEN = new InjectionToken('NgxEditorConfig');\nclass NgxEditorModule {\n    static forRoot(config) {\n        return {\n            ngModule: NgxEditorModule,\n            providers: [\n                {\n                    provide: NGX_EDITOR_CONFIG_TOKEN,\n                    useValue: config\n                },\n                {\n                    provide: NgxEditorServiceConfig,\n                    useFactory: provideMyServiceOptions,\n                    deps: [NGX_EDITOR_CONFIG_TOKEN]\n                }\n            ]\n        };\n    }\n    static forChild(config) {\n        return {\n            ngModule: NgxEditorModule,\n            providers: [\n                {\n                    provide: NGX_EDITOR_CONFIG_TOKEN,\n                    useValue: config\n                },\n                {\n                    provide: NgxEditorServiceConfig,\n                    useFactory: provideMyServiceOptions,\n                    deps: [NGX_EDITOR_CONFIG_TOKEN]\n                },\n                NgxEditorService,\n            ]\n        };\n    }\n}\nNgxEditorModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nNgxEditorModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorModule, declarations: [NgxEditorComponent,\n        ImageViewComponent], imports: [CommonModule,\n        MenuModule], exports: [NgxEditorComponent,\n        MenuComponent,\n        FloatingMenuComponent] });\nNgxEditorModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorModule, providers: [], imports: [[\n            CommonModule,\n            MenuModule,\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.2\", ngImport: i0, type: NgxEditorModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule,\n                        MenuModule,\n                    ],\n                    providers: [],\n                    declarations: [\n                        NgxEditorComponent,\n                        ImageViewComponent\n                    ],\n                    exports: [\n                        NgxEditorComponent,\n                        MenuComponent,\n                        FloatingMenuComponent\n                    ]\n                }]\n        }] });\n\nconst isEmptyInputValue = (value) => {\n    // we don't check for string here so it also works with arrays\n    return value === null || value.length === 0;\n};\nconst hasValidLength = (value) => {\n    // non-strict comparison is intentional, to check for both `null` and `undefined` values\n    return value != null && typeof value.length === 'number';\n};\nconst isDocEmpty = (doc) => {\n    if (!doc) {\n        return true;\n    }\n    const { childCount, firstChild } = doc;\n    return Boolean(childCount === 1 && (firstChild === null || firstChild === void 0 ? void 0 : firstChild.isTextblock) && firstChild.content.size === 0);\n};\n// @dynamic\nclass Validators {\n    static required(userSchema) {\n        return (control) => {\n            const schema$1 = userSchema || schema;\n            const doc = parseContent(control.value, schema$1);\n            const isEmpty = isDocEmpty(doc);\n            if (!isEmpty) {\n                return null;\n            }\n            return {\n                required: true\n            };\n        };\n    }\n    static maxLength(maxLength, userSchema) {\n        return (control) => {\n            const schema$1 = userSchema || schema;\n            const doc = parseContent(control.value, schema$1);\n            const value = doc.textContent;\n            if (hasValidLength(value) && value.length > maxLength) {\n                return {\n                    maxlength: {\n                        requiredLength: maxLength,\n                        actualLength: value.length\n                    }\n                };\n            }\n            return null;\n        };\n    }\n    static minLength(minLength, userSchema) {\n        return (control) => {\n            const schema$1 = userSchema || schema;\n            const doc = parseContent(control.value, schema$1);\n            const value = doc.textContent;\n            if (isEmptyInputValue(value) || !hasValidLength(value)) {\n                // don't validate empty values to allow optional controls\n                // don't validate values without `length` property\n                return null;\n            }\n            if (value.length < minLength) {\n                return {\n                    minlength: {\n                        requiredLength: minLength, actualLength: value.length\n                    }\n                };\n            }\n            return null;\n        };\n    }\n}\n\nconst execMark = (name, toggle = false) => {\n    return (state, dispatch) => {\n        const command = new Mark(name);\n        if (!toggle) {\n            return command.apply()(state, dispatch);\n        }\n        return command.toggle()(state, dispatch);\n    };\n};\nclass EditorCommands {\n    constructor(view) {\n        this.applyTrx = (tr) => {\n            this.state = this.state.apply(tr !== null && tr !== void 0 ? tr : this.tr);\n            this.tr = this.state.tr;\n            this.tr.setMeta('APPLIED_TRX', true);\n        };\n        this.dispatch = (tr) => {\n            this.applyTrx(tr);\n        };\n        if (!view) {\n            throw Error('NgxEditor: Required view to initialize commands.');\n        }\n        this.view = view;\n        this.state = view.state;\n        this.tr = this.view.state.tr;\n    }\n    exec() {\n        // No changes applied\n        if (!this.tr.getMeta('APPLIED_TRX')) {\n            return false;\n        }\n        const forceEmit = !this.view.state.doc.eq(this.state.doc);\n        this.view.updateState(this.state);\n        const tr = this.tr\n            .setMeta('FORCE_EMIT', forceEmit);\n        this.view.dispatch(tr);\n        return true;\n    }\n    focus() {\n        this.view.focus();\n        return this;\n    }\n    scrollIntoView() {\n        this.tr.scrollIntoView();\n        this.applyTrx();\n        return this;\n    }\n    insertText(text) {\n        this.tr.insertText(text);\n        this.applyTrx();\n        return this;\n    }\n    insertNewLine() {\n        const newLineCommands = [newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock];\n        chainCommands(...newLineCommands)(this.state, this.dispatch);\n        return this;\n    }\n    applyMark(name) {\n        execMark(name, false)(this.state, this.dispatch);\n        return this;\n    }\n    toggleMark(name) {\n        execMark(name, true)(this.state, this.dispatch);\n        return this;\n    }\n    bold() {\n        execMark('strong')(this.state, this.dispatch);\n        return this;\n    }\n    toggleBold() {\n        execMark('strong', true)(this.state, this.dispatch);\n        return this;\n    }\n    italics() {\n        execMark('em')(this.state, this.dispatch);\n        return this;\n    }\n    toggleItalics() {\n        execMark('em', true)(this.state, this.dispatch);\n        return this;\n    }\n    underline() {\n        execMark('u')(this.state, this.dispatch);\n        return this;\n    }\n    toggleUnderline() {\n        execMark('u', true)(this.state, this.dispatch);\n        return this;\n    }\n    strike() {\n        execMark('s')(this.state, this.dispatch);\n        return this;\n    }\n    toggleStrike() {\n        execMark('s', true)(this.state, this.dispatch);\n        return this;\n    }\n    code() {\n        execMark('code')(this.state, this.dispatch);\n        return this;\n    }\n    toggleCode() {\n        execMark('code', true)(this.state, this.dispatch);\n        return this;\n    }\n    toggleOrderedList() {\n        const command = new ListItem(false);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    toggleBulletList() {\n        const command = new ListItem(true);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    toggleHeading(level) {\n        const command = new Heading(level);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    insertLink(text, attrs) {\n        const command = new Link$1();\n        command.insert(text, attrs)(this.state, this.dispatch);\n        return this;\n    }\n    updateLink(attrs) {\n        const command = new Link$1();\n        command.update(attrs)(this.state, this.dispatch);\n        return this;\n    }\n    insertImage(src, attrs = {}) {\n        const command = new Image$1();\n        command.insert(src, attrs)(this.state, this.dispatch);\n        return this;\n    }\n    textColor(color) {\n        const command = new TextColor$1('text_color');\n        command.apply({ color })(this.state, this.dispatch);\n        return this;\n    }\n    backgroundColor(color) {\n        const command = new TextColor$1('text_background_color');\n        command.apply({ backgroundColor: color })(this.state, this.dispatch);\n        return this;\n    }\n    removeTextColor() {\n        const command = new TextColor$1('text_color');\n        command.remove()(this.state, this.dispatch);\n        return this;\n    }\n    removeBackgroundColor() {\n        const command = new TextColor$1('text_background_color');\n        command.remove()(this.state, this.dispatch);\n        return this;\n    }\n    align(p) {\n        const command = new TextAlign(p);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    insertHTML(html) {\n        const { selection, schema, tr } = this.state;\n        const { from, to } = selection;\n        const element = document.createElement('div');\n        element.innerHTML = html.trim();\n        const slice = DOMParser.fromSchema(schema).parseSlice(element);\n        const transaction = tr.replaceRange(from, to, slice);\n        this.applyTrx(transaction);\n        return this;\n    }\n}\n\nconst isMacOs = typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false;\n// Input rules ref: https://github.com/ProseMirror/prosemirror-example-setup/\n// : (NodeType) → InputRule\n// Given a blockquote node type, returns an input rule that turns `\"> \"`\n// at the start of a textblock into a blockquote.\nconst blockQuoteRule = (nodeType) => {\n    return wrappingInputRule(/^\\s*>\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a number\n// followed by a dot at the start of a textblock into an ordered list.\nconst orderedListRule = (nodeType) => {\n    return wrappingInputRule(/^(\\d+)\\.\\s$/, nodeType, match => ({ order: +match[1] }), (match, node) => node.childCount + node.attrs['order'] === +match[1]);\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a bullet\n// (dash, plush, or asterisk) at the start of a textblock into a\n// bullet list.\nconst bulletListRule = (nodeType) => {\n    return wrappingInputRule(/^\\s*([-+*])\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a code block node type, returns an input rule that turns a\n// textblock starting with three backticks into a code block.\nconst codeBlockRule = (nodeType) => {\n    return textblockTypeInputRule(/^```$/, nodeType);\n};\n// : (NodeType, number) → InputRule\n// Given a node type and a maximum level, creates an input rule that\n// turns up to that number of `#` characters followed by a space at\n// the start of a textblock into a heading whose level corresponds to\n// the number of `#` signs.\nconst headingRule = (nodeType, maxLevel) => {\n    return textblockTypeInputRule(new RegExp('^(#{1,' + maxLevel + '})\\\\s$'), nodeType, (match) => ({ level: match[1].length }));\n};\n// : (MarkType) → InputRule\n// Wraps matching text with bold mark\nconst boldRule = (markType) => {\n    return markInputRule(/(?:^|\\s)((?:\\*\\*|__)((?:[^*_]+))(?:\\*\\*|__))$/, markType);\n};\n// : (MarkType) → InputRule\n// Wraps matching text with em mark\nconst emRule = (markType) => {\n    return markInputRule(/(?:^|\\s)((?:\\*|_)((?:[^*_]+))(?:\\*|_))$/, markType);\n};\n// : (Schema) → Plugin\n// A set of input rules for creating the basic block quotes, lists,\n// code blocks, and heading.\nconst buildInputRules = (schema) => {\n    const rules = smartQuotes.concat(ellipsis, emDash);\n    rules.push(boldRule(schema.marks['strong']));\n    rules.push(emRule(schema.marks['em']));\n    rules.push(blockQuoteRule(schema.nodes['blockquote']));\n    rules.push(orderedListRule(schema.nodes['ordered_list']));\n    rules.push(bulletListRule(schema.nodes['bullet_list']));\n    rules.push(codeBlockRule(schema.nodes['code_block']));\n    rules.push(headingRule(schema.nodes['heading'], 6));\n    return inputRules({ rules });\n};\nconst getKeyboardShortcuts = (schema, options) => {\n    const historyKeyMap = {};\n    historyKeyMap['Mod-z'] = undo;\n    if (isMacOs) {\n        historyKeyMap['Shift-Mod-z'] = redo;\n    }\n    else {\n        historyKeyMap['Mod-y'] = redo;\n    }\n    const plugins = [\n        keymap({\n            'Mod-b': toggleMark(schema.marks['strong']),\n            'Mod-i': toggleMark(schema.marks['em']),\n            'Mod-u': toggleMark(schema.marks['u']),\n            'Mod-`': toggleMark(schema.marks['code']),\n        }),\n        keymap({\n            Enter: splitListItem(schema.nodes['list_item']),\n            'Shift-Enter': chainCommands(exitCode, (state, dispatch) => {\n                const tr = state.tr;\n                const br = schema.nodes['hard_break'];\n                dispatch(tr.replaceSelectionWith(br.create()).scrollIntoView());\n                return true;\n            }),\n            'Mod-[': liftListItem(schema.nodes['list_item']),\n            'Mod-]': sinkListItem(schema.nodes['list_item']),\n            Tab: sinkListItem(schema.nodes['list_item'])\n        }),\n        keymap(baseKeymap)\n    ];\n    if (options.history) {\n        plugins.push(keymap(historyKeyMap));\n    }\n    return plugins;\n};\nconst getDefaultPlugins = (schema, options) => {\n    const plugins = [];\n    if (options.keyboardShortcuts) {\n        plugins.push(...getKeyboardShortcuts(schema, { history: options.history }));\n    }\n    if (options.history) {\n        plugins.push(history());\n    }\n    if (options.inputRules) {\n        plugins.push(buildInputRules(schema));\n    }\n    return plugins;\n};\n\nconst defaultFeatures = {\n    linkOnPaste: true,\n    resizeImage: true\n};\nconst DEFAULT_OPTIONS = {\n    content: null,\n    history: true,\n    keyboardShortcuts: true,\n    inputRules: true,\n    schema: schema,\n    plugins: [],\n    nodeViews: {},\n    attributes: {},\n    features: defaultFeatures\n};\nclass Editor {\n    constructor(options = DEFAULT_OPTIONS) {\n        this.valueChangesSubject = new Subject();\n        this.updateSubject = new Subject();\n        this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n        this.createEditor();\n    }\n    get valueChanges() {\n        return this.valueChangesSubject.asObservable();\n    }\n    get update() {\n        return this.updateSubject.asObservable();\n    }\n    get schema() {\n        return this.options.schema || schema;\n    }\n    get commands() {\n        return new EditorCommands(this.view);\n    }\n    get features() {\n        return Object.assign(Object.assign({}, defaultFeatures), this.options.features);\n    }\n    handleTransactions(tr) {\n        const state = this.view.state.apply(tr);\n        this.view.updateState(state);\n        this.updateSubject.next(this.view);\n        if (!tr.docChanged && !tr.getMeta('FORCE_EMIT')) {\n            return;\n        }\n        const json = state.doc.toJSON();\n        this.valueChangesSubject.next(json);\n    }\n    createEditor() {\n        var _a, _b;\n        const { options } = this;\n        const { content = null, nodeViews } = options;\n        const { history = true, keyboardShortcuts = true, inputRules = true } = options;\n        const schema = this.schema;\n        const doc = parseContent(content, schema);\n        const plugins = (_a = options.plugins) !== null && _a !== void 0 ? _a : [];\n        const attributes = (_b = options.attributes) !== null && _b !== void 0 ? _b : {};\n        const defaultPlugins = getDefaultPlugins(schema, {\n            history,\n            keyboardShortcuts,\n            inputRules\n        });\n        this.view = new EditorView(null, {\n            state: EditorState.create({\n                doc,\n                schema,\n                plugins: [...defaultPlugins, ...plugins],\n            }),\n            nodeViews,\n            dispatchTransaction: this.handleTransactions.bind(this),\n            attributes\n        });\n    }\n    setContent(content) {\n        if (isNil(content)) {\n            return;\n        }\n        const { state } = this.view;\n        const { tr, doc } = state;\n        const newDoc = parseContent(content, this.schema);\n        tr.replaceWith(0, state.doc.content.size, newDoc);\n        // don't emit if both content is same\n        if (doc.eq(tr.doc)) {\n            return;\n        }\n        if (!tr.docChanged) {\n            return;\n        }\n        this.view.dispatch(tr);\n    }\n    registerPlugin(plugin) {\n        const { state } = this.view;\n        const plugins = [...state.plugins, plugin];\n        const newState = state.reconfigure({ plugins });\n        this.view.updateState(newState);\n    }\n    destroy() {\n        this.view.destroy();\n    }\n}\n\n/*\n * Public API Surface of ngx-editor\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DEFAULT_TOOLBAR, Editor, FloatingMenuComponent, MenuComponent, NgxEditorComponent, NgxEditorModule, TOOLBAR_MINIMAL, Validators, emptyDoc, parseContent, toDoc, toHTML };\n"]},"metadata":{},"sourceType":"module"}