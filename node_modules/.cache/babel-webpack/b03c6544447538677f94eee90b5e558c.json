{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/requests.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction MessagesComponent_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵelement(2, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵelementStart(4, \"div\", 15);\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 16);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const message_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(message_r1.message);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind2(9, 3, message_r1.created_at, \"h:mm a\"), \" | \", i0.ɵɵpipeBind1(10, 6, message_r1.created_at), \"\");\n  }\n}\n\nfunction MessagesComponent_div_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵelementStart(1, \"div\", 18);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 16);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const message_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(message_r1.message);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind2(6, 3, message_r1.created_at, \"h:mm a\"), \" | \", i0.ɵɵpipeBind1(7, 6, message_r1.created_at), \"\");\n  }\n}\n\nfunction MessagesComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, MessagesComponent_div_2_div_1_Template, 11, 8, \"div\", 9);\n    i0.ɵɵtemplate(2, MessagesComponent_div_2_div_2_Template, 8, 8, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const message_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", message_r1.reciever[0] == ctx_r0.currebtData.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", message_r1.reciever[0] != ctx_r0.currebtData.id);\n  }\n}\n\nexport let MessagesComponent = /*#__PURE__*/(() => {\n  class MessagesComponent {\n    constructor(route, request, alert) {\n      this.route = route;\n      this.request = request;\n      this.alert = alert;\n      this.messages = \"\";\n      this.id = \"\";\n      this.data = \"\";\n      this.currebtData = \"\";\n      this.validationMapping = {\n        'message': {\n          required: \"Message is required\"\n        }\n      };\n      this.validationField = false;\n      this.validationFieldMessage = {};\n    }\n\n    ngOnInit() {\n      this.id = this.route.snapshot.paramMap.get(\"id\");\n      this.showMessages();\n      this.currebtData = localStorage.getItem(\"user-name\");\n      this.currebtData = this.currebtData ? JSON.parse(this.currebtData) : '';\n      this.initializeForm();\n      setInterval(() => {\n        this.showMessages();\n      }, 1000);\n    }\n\n    initializeForm() {\n      this.messageForm = new FormGroup({\n        message: new FormControl('', [Validators.required])\n      });\n    }\n\n    showMessages() {\n      this.request.Get(\"view-message/\" + this.id).subscribe(res => {\n        console.log(res);\n        this.data = res.data;\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    sendMessage() {\n      if (this.messageForm.value.message == \"\") {\n        this.alert.warning(\"Please enter a message\");\n        return;\n      }\n\n      var data = {\n        \"sender\": this.currebtData.id,\n        \"reciever\": this.id,\n        \"message\": this.messageForm.value.message\n      };\n      this.request.Post(\"send-message\", data).subscribe(res => {\n        console.log(res);\n        this.showMessages();\n        this.messageForm.reset();\n      }, err => {\n        console.log(err);\n      }); // this.request.Post(\"\")\n      // this.alert.success(this.messageForm.value.message);\n    }\n\n  }\n\n  MessagesComponent.ɵfac = function MessagesComponent_Factory(t) {\n    return new (t || MessagesComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.RequestsService), i0.ɵɵdirectiveInject(i3.ToastrService));\n  };\n\n  MessagesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MessagesComponent,\n    selectors: [[\"app-messages\"]],\n    inputs: {\n      messages: \"messages\"\n    },\n    decls: 9,\n    vars: 2,\n    consts: [[1, \"mesgs\"], [1, \"msg_history\"], [4, \"ngFor\", \"ngForOf\"], [1, \"type_msg\"], [1, \"input_msg_write\"], [3, \"formGroup\", \"submit\"], [\"type\", \"text\", \"placeholder\", \"Type a message\", \"formControlName\", \"message\", 1, \"write_msg\"], [\"type\", \"submit\", 1, \"msg_send_btn\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-paper-plane\"], [\"class\", \"incoming_msg\", 4, \"ngIf\"], [\"class\", \"outgoing_msg\", 4, \"ngIf\"], [1, \"incoming_msg\"], [1, \"incoming_msg_img\"], [\"src\", \"https://ptetutorials.com/images/user-profile.png\", \"alt\", \"sunil\"], [1, \"received_msg\"], [1, \"received_withd_msg\"], [1, \"time_date\"], [1, \"outgoing_msg\"], [1, \"sent_msg\"]],\n    template: function MessagesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, MessagesComponent_div_2_Template, 3, 2, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"form\", 5);\n        i0.ɵɵlistener(\"submit\", function MessagesComponent_Template_form_submit_5_listener() {\n          return ctx.sendMessage();\n        });\n        i0.ɵɵelement(6, \"input\", 6);\n        i0.ɵɵelementStart(7, \"button\", 7);\n        i0.ɵɵelement(8, \"i\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.data);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.messageForm);\n      }\n    },\n    directives: [i4.NgForOf, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i4.NgIf],\n    pipes: [i4.DatePipe],\n    styles: [\".container[_ngcontent-%COMP%]{max-width:1170px;margin:auto}img[_ngcontent-%COMP%]{max-width:100%}.inbox_people[_ngcontent-%COMP%]{background:#f8f8f8 none repeat scroll 0 0;float:left;overflow:hidden;width:40%;border-right:1px solid #c4c4c4}.inbox_msg[_ngcontent-%COMP%]{border:1px solid #c4c4c4;clear:both;overflow:hidden}.top_spac[_ngcontent-%COMP%]{margin:20px 0 0}.recent_heading[_ngcontent-%COMP%]{float:left;width:40%}.srch_bar[_ngcontent-%COMP%]{display:inline-block;text-align:right;width:60%}.headind_srch[_ngcontent-%COMP%]{padding:10px 29px 10px 20px;overflow:hidden;border-bottom:1px solid #c4c4c4}.recent_heading[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#05728f;font-size:21px;margin:auto}.srch_bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #cdcdcd;border-width:0 0 1px 0;width:80%;padding:2px 0 4px 6px;background:none}.srch_bar[_ngcontent-%COMP%]   .input-group-addon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:rgba(0,0,0,0) none repeat scroll 0 0;border:medium none;padding:0;color:#707070;font-size:18px}.srch_bar[_ngcontent-%COMP%]   .input-group-addon[_ngcontent-%COMP%]{margin:0 0 0 -27px}.chat_ib[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:15px;color:#464646;margin:0 0 8px}.chat_ib[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;float:right}.chat_ib[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#989898;margin:auto}.chat_img[_ngcontent-%COMP%]{float:left;width:11%}.chat_ib[_ngcontent-%COMP%]{float:left;padding:0 0 0 15px;width:88%}.chat_people[_ngcontent-%COMP%]{overflow:hidden;clear:both}.chat_list[_ngcontent-%COMP%]{border-bottom:1px solid #c4c4c4;margin:0;padding:18px 16px 10px}.inbox_chat[_ngcontent-%COMP%]{height:550px;overflow-y:scroll}.active_chat[_ngcontent-%COMP%]{background:#ebebeb}.incoming_msg_img[_ngcontent-%COMP%]{display:inline-block;width:6%}.received_msg[_ngcontent-%COMP%]{display:inline-block;padding:0 0 0 10px;vertical-align:top;width:92%}.received_withd_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#ebebeb none repeat scroll 0 0;border-radius:3px;color:#646464;font-size:14px;margin:0;padding:5px 10px 5px 12px;width:100%}.time_date[_ngcontent-%COMP%]{color:#747474;display:block;font-size:12px;margin:8px 0 0}.received_withd_msg[_ngcontent-%COMP%]{width:57%}.mesgs[_ngcontent-%COMP%]{float:left;padding:30px 15px 0 25px;width:60%}.sent_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;border-radius:3px;font-size:14px;margin:0;color:#fff;padding:5px 10px 5px 12px;width:100%}.outgoing_msg[_ngcontent-%COMP%]{overflow:hidden;margin:26px 0}.sent_msg[_ngcontent-%COMP%]{float:right;width:46%}.input_msg_write[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:rgba(0,0,0,0) none repeat scroll 0 0;border:medium none;color:#4c4c4c;font-size:15px;min-height:48px;width:100%}.type_msg[_ngcontent-%COMP%]{border-top:1px solid #c4c4c4;position:relative}.msg_send_btn[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;border:medium none;border-radius:50%;color:#fff;cursor:pointer;font-size:17px;height:33px;position:absolute;right:0;top:11px;width:33px}.messaging[_ngcontent-%COMP%]{padding:0 0 50px}.msg_history[_ngcontent-%COMP%]{height:516px;overflow-y:auto}\"]\n  });\n  return MessagesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}